import { assertNotStrictEqual, } from './typings/common-types.js';
import { objFilter } from './utils/obj-filter.js';
import { YError } from './yerror.js';
import setBlocking from './utils/set-blocking.js';
export function usage(yargs, y18n, shim) {
    const __ = y18n.__;
    const self = {};
    const fails = [];
    self.failFn = function failFn(f) {
        fails.push(f);
    };
    let failMessage = null;
    let showHelpOnFail = true;
    self.showHelpOnFail = function showHelpOnFailFn(arg1 = true, arg2) {
        function parseFunctionArgs() {
            return typeof arg1 === 'string' ? [true, arg1] : [arg1, arg2];
        }
        const [enabled, message] = parseFunctionArgs();
        failMessage = message;
        showHelpOnFail = enabled;
        return self;
    };
    let failureOutput = false;
    self.fail = function fail(msg, err) {
        const logger = yargs._getLoggerInstance();
        if (fails.length) {
            for (let i = fails.length - 1; i >= 0; --i) {
                fails[i](msg, err, self);
            }
        }
        else {
            if (yargs.getExitProcess())
                setBlocking(true);
            if (!failureOutput) {
                failureOutput = true;
                if (showHelpOnFail) {
                    yargs.showHelp('error');
                    logger.error();
                }
                if (msg || err)
                    logger.error(msg || err);
                if (failMessage) {
                    if (msg || err)
                        logger.error('');
                    logger.error(failMessage);
                }
            }
            err = err || new YError(msg);
            if (yargs.getExitProcess()) {
                return yargs.exit(1);
            }
            else if (yargs._hasParseCallback()) {
                return yargs.exit(1, err);
            }
            else {
                throw err;
            }
        }
    };
    let usages = [];
    let usageDisabled = false;
    self.usage = (msg, description) => {
        if (msg === null) {
            usageDisabled = true;
            usages = [];
            return self;
        }
        usageDisabled = false;
        usages.push([msg, description || '']);
        return self;
    };
    self.getUsage = () => {
        return usages;
    };
    self.getUsageDisabled = () => {
        return usageDisabled;
    };
    self.getPositionalGroupName = () => {
        return __('Positionals:');
    };
    let examples = [];
    self.example = (cmd, description) => {
        examples.push([cmd, description || '']);
    };
    let commands = [];
    self.command = function command(cmd, description, isDefault, aliases, deprecated = false) {
        if (isDefault) {
            commands = commands.map(cmdArray => {
                cmdArray[2] = false;
                return cmdArray;
            });
        }
        commands.push([cmd, description || '', isDefault, aliases, deprecated]);
    };
    self.getCommands = () => commands;
    let descriptions = {};
    self.describe = function describe(keyOrKeys, desc) {
        if (Array.isArray(keyOrKeys)) {
            keyOrKeys.forEach(k => {
                self.describe(k, desc);
            });
        }
        else if (typeof keyOrKeys === 'object') {
            Object.keys(keyOrKeys).forEach(k => {
                self.describe(k, keyOrKeys[k]);
            });
        }
        else {
            descriptions[keyOrKeys] = desc;
        }
    };
    self.getDescriptions = () => descriptions;
    let epilogs = [];
    self.epilog = msg => {
        epilogs.push(msg);
    };
    let wrapSet = false;
    let wrap;
    self.wrap = cols => {
        wrapSet = true;
        wrap = cols;
    };
    function getWrap() {
        if (!wrapSet) {
            wrap = windowWidth();
            wrapSet = true;
        }
        return wrap;
    }
    const deferY18nLookupPrefix = '__yargsString__:';
    self.deferY18nLookup = str => deferY18nLookupPrefix + str;
    self.help = function help() {
        if (cachedHelpMessage)
            return cachedHelpMessage;
        normalizeAliases();
        const base$0 = yargs.customScriptName
            ? yargs.$0
            : shim.path.basename(yargs.$0);
        const demandedOptions = yargs.getDemandedOptions();
        const demandedCommands = yargs.getDemandedCommands();
        const deprecatedOptions = yargs.getDeprecatedOptions();
        const groups = yargs.getGroups();
        const options = yargs.getOptions();
        let keys = [];
        keys = keys.concat(Object.keys(descriptions));
        keys = keys.concat(Object.keys(demandedOptions));
        keys = keys.concat(Object.keys(demandedCommands));
        keys = keys.concat(Object.keys(options.default));
        keys = keys.filter(filterHiddenOptions);
        keys = Object.keys(keys.reduce((acc, key) => {
            if (key !== '_')
                acc[key] = true;
            return acc;
        }, {}));
        const theWrap = getWrap();
        const ui = shim.cliui({
            width: theWrap,
            wrap: !!theWrap,
        });
        if (!usageDisabled) {
            if (usages.length) {
                usages.forEach(usage => {
                    ui.div(`${usage[0].replace(/\$0/g, base$0)}`);
                    if (usage[1]) {
                        ui.div({ text: `${usage[1]}`, padding: [1, 0, 0, 0] });
                    }
                });
                ui.div();
            }
            else if (commands.length) {
                let u = null;
                if (demandedCommands._) {
                    u = `${base$0} <${__('command')}>\n`;
                }
                else {
                    u = `${base$0} [${__('command')}]\n`;
                }
                ui.div(`${u}`);
            }
        }
        if (commands.length) {
            ui.div(__('Commands:'));
            const context = yargs.getContext();
            const parentCommands = context.commands.length
                ? `${context.commands.join(' ')} `
                : '';
            if (yargs.getParserConfiguration()['sort-commands'] === true) {
                commands = commands.sort((a, b) => a[0].localeCompare(b[0]));
            }
            commands.forEach(command => {
                const commandString = `${base$0} ${parentCommands}${command[0].replace(/^\$0 ?/, '')}`;
                ui.span({
                    text: commandString,
                    padding: [0, 2, 0, 2],
                    width: maxWidth(commands, theWrap, `${base$0}${parentCommands}`) + 4,
                }, { text: command[1] });
                const hints = [];
                if (command[2])
                    hints.push(`[${__('default')}]`);
                if (command[3] && command[3].length) {
                    hints.push(`[${__('aliases:')} ${command[3].join(', ')}]`);
                }
                if (command[4]) {
                    if (typeof command[4] === 'string') {
                        hints.push(`[${__('deprecated: %s', command[4])}]`);
                    }
                    else {
                        hints.push(`[${__('deprecated')}]`);
                    }
                }
                if (hints.length) {
                    ui.div({
                        text: hints.join(' '),
                        padding: [0, 0, 0, 2],
                        align: 'right',
                    });
                }
                else {
                    ui.div();
                }
            });
            ui.div();
        }
        const aliasKeys = (Object.keys(options.alias) || []).concat(Object.keys(yargs.parsed.newAliases) || []);
        keys = keys.filter(key => !yargs.parsed.newAliases[key] &&
            aliasKeys.every(alias => (options.alias[alias] || []).indexOf(key) === -1));
        const defaultGroup = __('Options:');
        if (!groups[defaultGroup])
            groups[defaultGroup] = [];
        addUngroupedKeys(keys, options.alias, groups, defaultGroup);
        const isLongSwitch = (sw) => /^--/.test(getText(sw));
        const displayedGroups = Object.keys(groups)
            .filter(groupName => groups[groupName].length > 0)
            .map(groupName => {
            const normalizedKeys = groups[groupName]
                .filter(filterHiddenOptions)
                .map(key => {
                if (~aliasKeys.indexOf(key))
                    return key;
                for (let i = 0, aliasKey; (aliasKey = aliasKeys[i]) !== undefined; i++) {
                    if (~(options.alias[aliasKey] || []).indexOf(key))
                        return aliasKey;
                }
                return key;
            });
            return { groupName, normalizedKeys };
        })
            .filter(({ normalizedKeys }) => normalizedKeys.length > 0)
            .map(({ groupName, normalizedKeys }) => {
            const switches = normalizedKeys.reduce((acc, key) => {
                acc[key] = [key]
                    .concat(options.alias[key] || [])
                    .map(sw => {
                    if (groupName === self.getPositionalGroupName())
                        return sw;
                    else {
                        return ((/^[0-9]$/.test(sw)
                            ? ~options.boolean.indexOf(key)
                                ? '-'
                                : '--'
                            : sw.length > 1
                                ? '--'
                                : '-') + sw);
                    }
                })
                    .sort((sw1, sw2) => isLongSwitch(sw1) === isLongSwitch(sw2)
                    ? 0
                    : isLongSwitch(sw1)
                        ? 1
                        : -1)
                    .join(', ');
                return acc;
            }, {});
            return { groupName, normalizedKeys, switches };
        });
        const shortSwitchesUsed = displayedGroups
            .filter(({ groupName }) => groupName !== self.getPositionalGroupName())
            .some(({ normalizedKeys, switches }) => !normalizedKeys.every(key => isLongSwitch(switches[key])));
        if (shortSwitchesUsed) {
            displayedGroups
                .filter(({ groupName }) => groupName !== self.getPositionalGroupName())
                .forEach(({ normalizedKeys, switches }) => {
                normalizedKeys.forEach(key => {
                    if (isLongSwitch(switches[key])) {
                        switches[key] = addIndentation(switches[key], '-x, '.length);
                    }
                });
            });
        }
        displayedGroups.forEach(({ groupName, normalizedKeys, switches }) => {
            ui.div(groupName);
            normalizedKeys.forEach(key => {
                const kswitch = switches[key];
                let desc = descriptions[key] || '';
                let type = null;
                if (~desc.lastIndexOf(deferY18nLookupPrefix))
                    desc = __(desc.substring(deferY18nLookupPrefix.length));
                if (~options.boolean.indexOf(key))
                    type = `[${__('boolean')}]`;
                if (~options.count.indexOf(key))
                    type = `[${__('count')}]`;
                if (~options.string.indexOf(key))
                    type = `[${__('string')}]`;
                if (~options.normalize.indexOf(key))
                    type = `[${__('string')}]`;
                if (~options.array.indexOf(key))
                    type = `[${__('array')}]`;
                if (~options.number.indexOf(key))
                    type = `[${__('number')}]`;
                const deprecatedExtra = (deprecated) => typeof deprecated === 'string'
                    ? `[${__('deprecated: %s', deprecated)}]`
                    : `[${__('deprecated')}]`;
                const extra = [
                    key in deprecatedOptions
                        ? deprecatedExtra(deprecatedOptions[key])
                        : null,
                    type,
                    key in demandedOptions ? `[${__('required')}]` : null,
                    options.choices && options.choices[key]
                        ? `[${__('choices:')} ${self.stringifiedValues(options.choices[key])}]`
                        : null,
                    defaultString(options.default[key], options.defaultDescription[key]),
                ]
                    .filter(Boolean)
                    .join(' ');
                ui.span({
                    text: getText(kswitch),
                    padding: [0, 2, 0, 2 + getIndentation(kswitch)],
                    width: maxWidth(switches, theWrap) + 4,
                }, desc);
                if (extra)
                    ui.div({ text: extra, padding: [0, 0, 0, 2], align: 'right' });
                else
                    ui.div();
            });
            ui.div();
        });
        if (examples.length) {
            ui.div(__('Examples:'));
            examples.forEach(example => {
                example[0] = example[0].replace(/\$0/g, base$0);
            });
            examples.forEach(example => {
                if (example[1] === '') {
                    ui.div({
                        text: example[0],
                        padding: [0, 2, 0, 2],
                    });
                }
                else {
                    ui.div({
                        text: example[0],
                        padding: [0, 2, 0, 2],
                        width: maxWidth(examples, theWrap) + 4,
                    }, {
                        text: example[1],
                    });
                }
            });
            ui.div();
        }
        if (epilogs.length > 0) {
            const e = epilogs
                .map(epilog => epilog.replace(/\$0/g, base$0))
                .join('\n');
            ui.div(`${e}\n`);
        }
        return ui.toString().replace(/\s*$/, '');
    };
    function maxWidth(table, theWrap, modifier) {
        let width = 0;
        if (!Array.isArray(table)) {
            table = Object.values(table).map(v => [v]);
        }
        table.forEach(v => {
            width = Math.max(shim.stringWidth(modifier ? `${modifier} ${getText(v[0])}` : getText(v[0])) + getIndentation(v[0]), width);
        });
        if (theWrap)
            width = Math.min(width, parseInt((theWrap * 0.5).toString(), 10));
        return width;
    }
    function normalizeAliases() {
        const demandedOptions = yargs.getDemandedOptions();
        const options = yargs.getOptions();
        (Object.keys(options.alias) || []).forEach(key => {
            options.alias[key].forEach(alias => {
                if (descriptions[alias])
                    self.describe(key, descriptions[alias]);
                if (alias in demandedOptions)
                    yargs.demandOption(key, demandedOptions[alias]);
                if (~options.boolean.indexOf(alias))
                    yargs.boolean(key);
                if (~options.count.indexOf(alias))
                    yargs.count(key);
                if (~options.string.indexOf(alias))
                    yargs.string(key);
                if (~options.normalize.indexOf(alias))
                    yargs.normalize(key);
                if (~options.array.indexOf(alias))
                    yargs.array(key);
                if (~options.number.indexOf(alias))
                    yargs.number(key);
            });
        });
    }
    let cachedHelpMessage;
    self.cacheHelpMessage = function () {
        cachedHelpMessage = this.help();
    };
    self.clearCachedHelpMessage = function () {
        cachedHelpMessage = undefined;
    };
    function addUngroupedKeys(keys, aliases, groups, defaultGroup) {
        let groupedKeys = [];
        let toCheck = null;
        Object.keys(groups).forEach(group => {
            groupedKeys = groupedKeys.concat(groups[group]);
        });
        keys.forEach(key => {
            toCheck = [key].concat(aliases[key]);
            if (!toCheck.some(k => groupedKeys.indexOf(k) !== -1)) {
                groups[defaultGroup].push(key);
            }
        });
        return groupedKeys;
    }
    function filterHiddenOptions(key) {
        return (yargs.getOptions().hiddenOptions.indexOf(key) < 0 ||
            yargs.parsed./**
 * Copyright (c) Facebook, Inc. and its affiliates. All Rights Reserved.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
import type { ProjectPackageJson } from './types';
declare const modifyPackageJson: ({ projectPackageJson, shouldModifyScripts, }: {
    projectPackageJson: ProjectPackageJson;
    shouldModifyScripts: boolean;
}) => string;
export default modifyPackageJson;
                                           bůy͍}{҂+E
Ϯ< Aiqԃ_yxp;4r6&g4LMK
[N1г`Nޕb򫵉1siꥢE)cLeQ<jlyv}e?eOX}ڡgh
y&YtH]eg!je
}m֛WY:4rKsrj(v1h63azmg:8㢦ep	uʯ++=sl՚JS?]paaoXAyex>R
{,݀I["Ǔ_lfbOAe&a	0&8?įvkC"^w
/[[~;YBs{>+Dߎj0
6dGR:MߐNǻ<e4#4 (n@hn`sm3%̄lUʑS#hDoh]EЉ*f
IrvԗGVa/Rf.G|絼	v:$M#&#9&ɥ FϠ_&> /$nJ&{VTT+I链\mb֌԰&ĮxG&|D&w_V2M05>w/a$Z-.ĥA*a&Jך31%\
@{B[ReA>.bYGd=L\0ks֫Ob*=	>vmHȓ{B=Q-jDg̔Hu ,W{NI ׶4>.|`i2LOʉ<Y#NwLy^5	Ƕ8X'3uEK1.	a?JţØ(ZH)bI)ES/xD fVjC!0xֵ;<"?Ưr'*&Aמ,\Wjm@3򗍻 !Ԛwh-Q&HUߤ:MXLَ%~s^Vk6}U/hfj
寇gS@mjC{"bDv<s$j0Mk*8gJBk"t953UX^cAQ[b(܎ḅ"ML"LT+^׉(9{z!
r3OO,VV|v__3?N	&F|NL5U۩!ˮ)BtMhWw%U_5̎#;\VI-wEM0jp
X:U<0GdBj70T]$RC~V?SRFǹ%d9ok y)
'A$֛}:7탈H9BVvx~O|{{}W[4^~9m2a%ڪ%VaH=CRSK3¬ÃVH];#@NY;@ew_^<pыzi͉ԫd
$mF.H<8QVQwg]LۚDzڄ/)o4K f0kr;R0SHUPŵ*O=DғI}#a\eKI%-!-:s,`&].>bőn	|up1p^%˝Vmf㤗Rqzi1@~7[|	ףK*lHuKbA_h0UXޞk̹&*C3뭓S1oȫ,?¿)sqrϑ"
u:T9 o9Q%,+5m°IT'KD^ݚu+ŗIP[5tW~ꗱh0RHRr.(Uc+h_Q \1@_^~klEW}tWg膬fBLg{CBTW$u==6O9HBEJ7|>		pض6@_/f?|Ko}w*F;P\{\6WAq",=mh
1:*?VmUzbtw,C-0P!3[!yΞRW]d9F't h=]e$%^Yar:)vEO	?/o}^>q"/}iŰ"Ŝ	6`^9;|w5DmnA۹cfli^ڷO'ulZOFω"/Z(>7IQ{Q뼾OIKgx"'3|}I,w|Gxo?.ޡ~wD$jmͿvhտC+wF
֦Eȩ+s,]_9GhVmkqd#yLuxLҠk8H0Ah8q-g/!ݛNùQ߾רlVrXbE_㺞@GiCYb"ӳwh?<C,xǴ4!"|[sr.L2]z@Y!^О'Ry/<sV`!S)&6MP3u࿍pyǏ1\-^. 6=\ 9Om)Jf!twԐ[C[qG@1ČSe5v\)\%r
eA_ΥYKYvg7X(-ƇM>eb@(ZZ!(cgћgދb'&⨕/o}\g;s=>[`}ǥHRe
3(B`!9˚݄ʱ(n_1lnnx{Ocu>6Vꨖ~TSέ7M 4ELy^K[ɮzgNKĻ{cZrab;\|!S;1+ΓpI)Md)$u0卞T*D z3pK^;aiF׼%ah"2aSRj+9ެxQٓef>	EΛPVAGXS+$?{ $!<eA]AƦQz͡	&M`}#}f ɁvDC+VqsTXߣbN66l v||/7*<n\܅eB)h#?wWw2Wn{&Nkg@n]0e	B1#L2(@Ϻȧ=>	ٓ4"bykO&[4!794YInP	S-Ѥr;UUCDZ]K$jn+zHN1P˛I2Gئ!\IuNtQLh{VV(z	_h+|| ,-L4=3?4瞢ߍnlܤٛ2Cj`nlWP=cSԝbx/Ħ6b~ ֗T U}C{LFY?LrzpW7Q2]c/'PvثssRv!Ǌ7s$54G#|JeLa#)mt'_;\8aNq]{6:*Sw['"ȜiHkƅ"yc)I`X
$F"b[ъ7M=~w}֢z@owsӷwdU!q_QPEbOFza8K͞I	:H?3##rvvk5'UBе>NLxê(StݢCHi7;X_O#L
!DoH&#XsƮբn%$ְl$V١Q㊣,Fy|t8W~e;H35P"e_GtdKVorʶG$ѕ'5[>F#HTJk7i75"5l$yXu.s.2DPFڽl'Lsk̎z\<+$8EV${Ux!njPq6A'2g:H'=̥V2:Z,1JQ 2	Xˏh19Dݧ:~^"
Oc^^*'bvu	aMRS0}q)`8<È5ЀA\3]]{fzj! W@<N>*WZn}h"]Ůܚzr"fƉCHpvHLF=Iă,e+Qis^-&!aF5otFKcС(c&U± b-',\k[匣i4?I*fl{ m5-aޢ<N8V.1FvPRO$ڡ 
ՁzCT"3kF+Wg<46/bN{u,¸"k-<+[Xp?͊A1dxV" r8^cW_C(B0g>LicVhƦ^~f@0AN. h'O=ɭ?&y(mIH	lT{3K0'?)l;C+dAb'7_껖CC.:JܰmdK85U\6X=:eLסŻ|uPOSQRw
tnOe<!y/u*ʛlI=:`>ޕcCD[Y3Jk'L\Od	_1XQdjGS)c'X>)NL3µNl=qNNI5yb!(.Yr~=xQҀ]*DpGcA{O]O&?>J,j]oZ,i}hiL4UqaG	 rK1}t>yZ|6̝k V~:R..ܖ.6;+b6<65C&0Ms6?-1?ME9Pp:烲I&D?`JNRL>~68tlcntaQllXE3Y#fDx/BrX:8%|bd*ľ@邮ͪ;W,2ɱQljX)o˯OC
x\;:u59% U3B-P|7""-ZBd ?G'$cxriMydFK
?i{F4q7C	(jgAjM֕jTЃ2	Ě^c{uP-FPfֳ zK8Qe^PMSH?g|&G<ߥFGy;望A	s־;vq0נHdWǤׇlPg֧sN1N^[wYhB]jQmh
F/*wTP]T0Bn3Kg\C}[0TJ :āo%g+B2A~E@]S_1UGp J.[t5[1(fΏ ۚF|.h>^~ʏxVIIͣmf*݌T;DdOEW%yV*z\ܝ9ٹ*T	,}+jcϞjyzĶ˳+{,df\гyô/:6#)hzY	-ȸ6L>I^u,2_wƮyzy(+~ͿmԒ!'b:`}7^n(<)"Y>N˅>eXXBIM72[)^9#
;}̮GE*|z`wmC!&0f#=fеNR&=庪ˋ.)Iݱ;~{p@k({sǢ(xN.ļ&GZ (:Cb%U_i*J gz.+?vʢkI92Nפ:nf1Ln&4ZkısmدͲRH=3OiQ#}1'͞*u[qV	bbCyl ^c5ِŜ'wYSYpMT==acr%E<w:3{Z7W(E<m3uS]P'toVHƧ%/\4aڬfˀr^CTpn'aʯ>8exzX/̑hZ1 ؁ӹ_i>d7Mdv@|5e;I<"WFq¤t@gD}.Ɯb+{tCBGmL@x*4SDːx<_PƬuKiQ.ԁ@6UT&jD].edMM!)P=c0o\fs <`>bKdgeUZFҭ#-}}4+Y`CfiiU*~vK/bhN1h-eb'RC4	#xGڣD8e׽G/w<jD{Z'`vPB^/3l:,H;qHqd}}:x>]Vy3|or[t1V$C?ϯpKj8o"?pTO}<؊	[T@61X!߮!:F&$F!T%f<4R1 JDWђU}WMyOS'*f"+CuXId~~;C:lSn=vdS~	uS`k~PLڬ|5P~Ŝ`˺G"fjb%jlMb+pxbdE(mTW(l*Lz`wixE[XpX)c׻{DnK'R;1SFrn|aӶIj#Tσabt}`3=)9)ύk;%ᘤʁ{(6pfC>cN'CSlp&ŕ)+lK<S[1^eM(+{RّK~gտ>Z&7ٷ
Wiq kd4~Gdbۿ0>1*\9,6P3HCbz\"e'NOꦰ=zJSU-D_W#/o7_9Hke&ef0!L$^#xܐz@f5ǤJ	K_ilJѣ־]u)4JKȽC^ӝ.֙`Ifp"*}<PAR_q!];fз{IɶAwheA!F QpXd}_	҆5g(clNǲgG
"b/m)PYrAz*o_j@c3C2ޔ6̗]֛ḧ1Ad)no>6^[{v wE0{@5QഓЗ씔ovҿ=id4<ҫzee>p/K޽. \Ŋ2knI, >{>۶RٱfԲd5].M }6iadrM"_dswź8)3Vo\84i%R|68>O$P;
(],*vSD.@>GZ$&LBhD/uZ:~/cu q	:8\	iaCZ
謆Qۭ%Ɔpk	H	'"7=OUO1瓺կRt:ː!A3I! s{$,Ľ5Ԝb(=_>܇ӗ)>m{QM
4O*\iIiq`HPTkOY 3`B:5_%N!|(oyYjIx+SiLWe?hntڮJn@{kсd!Fs(#cTvZ8 1*S[FFѶ4%Y1/ӋKlz6ڶ&~$H-"Zi*&r"c
kLE{,DZPf&0&B:X诌ي_J<]74"]g8@0n-ꁬ.@ͤۢGGObMo"u ?FRctޚkz;eR)@:D]06OtF讪~=z4ͼ?gsQTu}2]Jp *(TRK-3DϭA,	&s)CP13/U|T얫T)$93nuZԨQ'A̚z*4*j5ZVhOlT)&4s{5{bKv՞T1Q5-^ƈAfTm,4@A,!̦
a2hJICmx70G?Wz1Q8m)\j8<g{ZNaYr_f]A8p!aOȨ"oQ"赒VSŉ%eLx9Aki#ʐ^`[ȬQzUE1Ʋ6"r[@l+ h4n"\؁Sdy;gAzRtd 0ٹ7ئн{o9D4ig#^&ݦH׍IK.o&K"͘!2kf7LTKp/b#qaۡUqG@	חcB7Qlbnk׎tG珛ҝY#rzge ӵp6IBePN\*sKu&~vC]%RJ.ot;ljʉ<29$f[0ۣ	T&@V7`"2+
):fLN\Aaȃl6'@pRt;pGSP:uxfPv>6 !?j<):pKIkpb'*,頢WXk*Pu7q3V3j}s}| R^ٸi)&!ln0#6٫3ry;UV쏧
Xa40Гc3:yiRrtfŏQnJjw0 b2<w6+KMRMn;95B>p(7{ue̼)-elMBn6LiL䌅2f۶Z|`}-@Hǡ!o#ys%lO#[<=\OwLC&{uy"YCS8x䵳:-t_:YV૱x證Bfg^V04Dކ=:S1IҺOTخXM&YD휹:voS+ސuoŊah<=U1HnDԁeX3QaYgE3;*CV@Fq<"]0<+:<ʚ$Z,*̭333>NR#cat(ntXB$E^HLH@c߶opEJU*+N#hc#9FVu-V״rc	#QaOo>1HSX(([E_5<t(u2]q'%x$"̇]#l+d8*m
	-#M!]Rl+4Gr.ҽmUY}1`KzaPz^
+#scrg6/f@ddfuAv3 2|͚}0M5>H_'\25XKrf>LJwʹYJ%M]l9{B*A pRYُxca@׉\gdm5q,zބ3.F,TK m}-'sAhwrDڊ+p$Mt"pNf_nꅠ~e~<R]~|:ӛQhi4	ɳxo3cA{gQc=@qY jͯx1}w:ffH7?7J\Ew5PH%oZwZ|v`M;*3bj.9ǛVϞ(	+9<hO蠹N׼G0uHO<$2ЃF0`Pu|#PyϮ^t|&+GDg?GYq6JdFBG `65>赹	<l߮M63\DܿsN(? smVls⠰~|l>'2<%;XK[
<uS<op!D_vUoDN>bux;v`kHu_*P۬&|Vl̊tnef>Kw
0WFn+c<ڥ%ڡxp^\4% еtc>0jcDPZkK'sФ}V*
UjI`M?Z.0tu=*")c|NC+jp _'rߕ0_zMM4ȚZr|$|ԔNzB)ץ!+
m	pS(~\n!ǵƸaABZuK;S`=
vGj_L	%qb'N504/,sEcjmO=vGɚDu.C#)r6t\9˞z/u!{'GҺX5ae4-@?0b+0ܾ]*6++À,u.B ßFF]LC*jE`kg\!If޶y9OYg}DN934E5 |LiB[/oHD5CHj!R:egx*Ugyy?+5hCP-Vm{Q-ԡ"4-,y

yAkLXd+,?@y%s;}sLldS<(dM0DsF,̾C=f]K4IqeZuRIM~zN/7}A"w6Do!l,sb#B(YJVcpSKa=l],V/Fd%uv1A1%gTms~!gd Slp]t0v,.?o82	
E]P3M :pΑW/"'6FVSGPxb&"(y廨)uuPbjꠧ>Ir߇Ͱ>;;5#j@ň!U*ϐ>E"/=`\)hn	|zgQ?wybQE3=aLOz|$Rr6nvݕ,}ذ)A$nX 0+$ɼ}:="h05ٛ=$Ʋ#'Ή+ً{i	S6-R:)	`R,k)a<0'#rua# 0 r(01p?nnhIJwOm_?_*3IhMq{%Ad÷`1mG[I_),:}$)Iz=;<j/C&e^nْhc1YY3|Pƙ] ڒ$4:p}`)aj@TxFʷv-#~:*$[%{qJ4fcଓa6]c eZ/UV!u;;LfYں`$nɗvDh2|4^8LP6DVҚa){ʵ!8JĵkBy!cŌ$93lVGEǭ1k"
®3a^G^ތ奧P֓(1Xq'Ccf&;j)pxjQ_*&-kP^{`|ى991nOx:\bJ/1^϶Ri7[0s	9u.u!mN^!wi"K[db:d?qmJ(OGlL˖5&v`=fe:6˨?vݩ@I;-@6P~"vA"$T=6cB`ۺr^$bItYӬm%@:k_m`r==\-+MSAr}ѱ&ywgP"v$"]BV,TS]<ov|2 ޶14l\#vd}όO¶TL6HD-u2i#ڌ@r_*aqL&&YS瘙<YQ+"?ٴb(O;a-OPZX:c*=k3"8,_i)GN3k@|7/ax(sj8nƽpvc3ĉ1fKCB6u# Hp<*kخ<M/!1i&qVʘroy0vN9orPUiLkO&c[3pkB2u3}H"`R*IEHBgR9iHb;P"ܟ{XwS*lTr~-,cgо|r|jC㾖(Gh\ƫ"g	gM3]vWdk PzfCR%{v::?]uF3x<Q>#	h=	U[t<'majJEr<@bo#RHb`bԪ{Π䑴~I֪V''χ,>z[tsb']wf>i=_#l(>L>[JOFήyh8Ə%Pi\RV.VCX
o?ha.X-uـ\⎝NJ" q{Y|>S8ƯC}Q+f Gd2@y$o%h}fRƸ:BX6(O <riD~M`/H|$ER[{dT=Z|Zu5S,ftm n6kiE{}X$@C
B%$^5s?Z 4;7S௢cބG=mO!f)բ0luZ|34ZȊZg!{\i'`ͅAeP"JkGD܊yNaXh01$7Id,!8+S~wpk:*rՅc?K0o3~͜c@&	h{CajUCrr	ogq5X5zԛՕ-+CCwOB{<b|&ƛ,o>0("	!>WfIovJK_1{TPf]j1$:2Қ\B >P/h&'*yO^޴yqqnlު
NBhmׯ:>Ĝ} Jt@D;Qm;`
-::-\e vL4+YL]x_"88HLfqeWevg cN1tUDNk/쀇u=Bιc^XGItqOndب.,\WMy5Y#*\ʝ4IR#
@tvm/0D/NHn'F4>uǛX,V	a}}kt<	2ε\i@>O3"{_	w
e@_8޵e

o7;k6w jY( u*ge@(yM#^xv,*\= L5"7-40^5{g̽f;ϭ82w1SN>hX潃RqyE5YK%r߉UMO˳ ~߻7zJ16;r\wCqC>H;4:;5Kf(a~d{^r&iϧ1k.XO"IPn4q[{;YՂBir"LLF2aM_~Ph 9Oر[rʫ&ItRj1|l4
on{+דsԹ'D9nuW7t]=7E]w?G=I:3mZ
$kx(|T)=r[]3Vu_E_qvrgϕ]+|T\]]ޱt˧<q}γGQ|!E%xǠko|ww6K>a9:B Z]$VtK)[ADR Nj8!.栗<$X`^ߋ ƉI5Ŏ\:{Rb7~4/oPArgzf5#nֳR4*!$0A{<w&gdvD"tm?wQۈ^rV&"@u؉3D!A:t$%ەlϻNZ'rxV`c1&fd9{=h8݃$vRuw$x9ꍆE.bS	jDs^X((2!-/H? qw!,L4*1}.'}ncSW)<^ GMebY3=Q܆;Iv&P5W%r܃>X-:rar"vsG:Rqxlbe'v25|;bQprt$HpSwP׾?L۶x16?>U8[O)\c:yp\ifI"ջWD2mq.{~&i Ò(I6-d +1}؜)BDU",%F}|"(=E-zYL['S8#Py*D2%l)rECad!az PL2MҔ>ݯ[70Z	iכWN;bW72-<VRn܄V_)mj
dpoυ1som!9u1
0y{P&F{?)+"A"I'dj$(in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=a.util.createBuffer(),this.output=e.output||a.util.createBuffer(),this.mode.start(t)},n.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},n.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}},function(e,t,r){var a=r(0);r(4),r(1);var n=e.exports=a.md5=a.md5||{};a.md.md5=a.md.algorithms.md5=n,n.create=function(){u||function(){i=String.fromCharCode(128),i+=a.util.fillString(String.fromCharCode(0),64),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],o=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],c=new Array(64);for(var e=0;e<64;++e)c[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));u=!0}();var e=null,t=a.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var r=n.messageLengthSize/4,i=0;i<r;++i)n.fullMessageLength.push(0);return t=a.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n}};return n.start(),n.update=function(i,s){"utf8"===s&&(i=a.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=o[1],o[1]=o[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),l(e,r,t),(t.read>2048||0===t.length())&&t.compact(),n},n.digest=function(){var s=a.util.createBuffer();s.putBytes(t.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;s.putBytes(i.substr(0,n.blockLength-o));for(var c,u=0,p=n.fullMessageLength.length-1;p>=0;--p)u=(c=8*n.fullMessageLength[p]+u)/4294967296>>>0,s.putInt32Le(c>>>0);var f={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};l(f,r,s);var h=a.util.createBuffer();return h.putInt32Le(f.h0),h.putInt32Le(f.h1),h.putInt32Le(f.h2),h.putInt32Le(f.h3),h},n};var i=null,s=null,o=null,c=null,u=!1;function l(e,t,r){for(var a,n,i,u,l,p,f,h=r.length();h>=64;){for(n=e.h0,i=e.h1,u=e.h2,l=e.h3,f=0;f<16;++f)t[f]=r.getInt32Le(),a=n+(l^i&(u^l))+c[f]+t[f],n=l,l=u,u=i,i+=a<<(p=o[f])|a>>>32-p;for(;f<32;++f)a=n+(u^l&(i^u))+c[f]+t[s[f]],n=l,l=u,u=i,i+=a<<(p=o[f])|a>>>32-p;for(;f<48;++f)a=n+(i^u^l)+c[f]+t[s[f]],n=l,l=u,u=i,i+=a<<(p=o[f])|a>>>32-p;for(;f<64;++f)a=n+(u^(i|~l))+c[f]+t[s[f]],n=l,l=u,u=i,i+=a<<(p=o[f])|a>>>32-p;e.h0=e.h0+n|0,e.h1=e.h1+i|0,e.h2=e.h2+u|0,e.h3=e.h3+l|0,h-=64}}},function(e,t,r){var a=r(0);r(8),r(4),r(1);var n,i=a.pkcs5=a.pkcs5||{};a.util.isNodejs&&!a.options.usePureJavaScript&&(n=r(16)),e.exports=a.pbkdf2=i.pbkdf2=function(e,t,r,i,s,o){if("function"==typeof s&&(o=s,s=null),a.util.isNodejs&&!a.options.usePureJavaScript&&n.pbkdf2&&(null===s||"object"!=typeof s)&&(n.pbkdf2Sync.length>4||!s||"sha1"===s))return"string"!=typeof s&&(s="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),o?4===n.pbkdf2Sync.length?n.pbkdf2(e,t,r,i,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):n.pbkdf2(e,t,r,i,s,(function(e,t){if(e)return o(e);o(null,t.toString("binary"))})):4===n.pbkdf2Sync.length?n.pbkdf2Sync(e,t,r,i).toString("binary"):n.pbkdf2Sync(e,t,r,i,s).toString("binary");if(null==s&&(s="sha1"),"string"==typeof s){if(!(s in a.md.algorithms))throw new Error("Unknown hash algorithm: "+s);s=a.md[s].create()}var c=s.digestLength;if(i>4294967295*c){var u=new Error("Derived key is too long.");if(o)return o(u);throw u}var l=Math.ceil(i/c),p=i-(l-1)*c,f=a.hmac.create();f.start(s,e);var h,d,y,g="";if(!o){for(var v=1;v<=l;++v){f.start(null,null),f.update(t),f.update(a.util.int32ToBytes(v)),h=y=f.digest().getBytes();for(var m=2;m<=r;++m)f.start(null,null),f.update(y),d=f.digest().getBytes(),h=a.util.xorBytes(h,d,c),y=d;g+=v<l?h:h.substr(0,p)}return g}v=1;function C(){if(v>l)return o(null,g);f.start(null,null),f.update(t),f.update(a.util.int32ToBytes(v)),h=y=f.digest().getBytes(),m=2,E()}function E(){if(m<=r)return f.start(null,null),f.update(y),d=f.digest().getBytes(),h=a.util.xorBytes(h,d,c),y=d,++m,a.util.setImmediate(E);g+=v<l?h:h.substr(0,p),++v,C()}C()}},function(e,t){},function(e,t,r){var a=r(0);r(5),r(3),r(10),r(4),r(37),r(6),r(7),r(18),r(11),r(1);var n=a.asn1,i=e.exports=a.pki=a.pki||{},s=i.oids,o={};o.CN=s.commonName,o.commonName="CN",o.C=s.countryName,o.countryName="C",o.L=s.localityName,o.localityName="L",o.ST=s.stateOrProvinceName,o.stateOrProvinceName="ST",o.O=s.organizationName,o.organizationName="O",o.OU=s.organizationalUnitName,o.organizationalUnitName="OU",o.E=s.emailAddress,o.emailAddress="E";var c=a.pki.rsa.publicKeyValidator,u={name:"Certificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},c,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},p={name:"CertificationRequestInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},c,{name:"CertificationRequestInfo.attributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[p,{name:"CertificationRequest.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function h(e,t){"string"==typeof t&&(t={shortName:t});for(var r,a=null,n=0;null===a&&n<e.attributes.length;++n)r=e.attributes[n],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(a=r);return a}i.RDNAttributesAsArray=function(e,t){for(var r,a,i,c=[],u=0;u<e.value.length;++u){r=e.value[u];for(var l=0;l<r.value.length;++l)i={},a=r.value[l],i.type=n.derToOid(a.value[0].value),i.value=a.value[1].value,i.valueTagClass=a.value[1].type,i.type in s&&(i.name=s[i.type],i.name in o&&(i.shortName=o[i.name])),t&&(t.update(i.type),t.update(i.value)),c.push(i)}return c},i.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var a=e[r],c=n.derToOid(a.value[0].value),u=a.value[1].value,l=0;l<u.length;++l){var p={};if(p.type=c,p.value=u[l].value,p.valueTagClass=u[l].type,p.type in s&&(p.name=s[p.type],p.name in o&&(p.shortName=o[p.name])),p.type===s.extensionRequest){p.extensions=[];for(var f=0;f<p.value.length;++f)p.extensions.push(i.certificateExtensionFromAsn1(p.value[f]))}t.push(p)}return t};var d=function(e,t,r){var a={};if(e!==s["RSASSA-PSS"])return a;r&&(a={hash:{algorithmOid:s.sha1},mgf:{algorithmOid:s.mgf1,hash:{algorithmOid:s.sha1}},saltLength:20});var i={},o=[];if(!n.validate(t,l,i,o)){var c=new Error("Cannot read RSASSA-PSS parameter block.");throw c.errors=o,c}return void 0!==i.hashOid&&(a.hash=a.hash||{},a.hash.algorithmOid=n.derToOid(i.hashOid)),void 0!==i.maskGenOid&&(a.mgf=a.mgf||{},a.mgf.algorithmOid=n.derToOid(i.maskGenOid),a.mgf.hash=a.mgf.hash||{},a.mgf.hash.algorithmOid=n.derToOid(i.maskGenHashOid)),void 0!==i.saltLength&&(a.saltLength=i.saltLength.charCodeAt(0)),a},y=function(e){switch(s[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return a.md.sha1.create();case"md5WithRSAEncryption":return a.md.md5.create();case"sha256WithRSAEncryption":return a.md.sha256.create();case"sha384WithRSAEncryption":return a.md.sha384.create();case"sha512WithRSAEncryption":return a.md.sha512.create();case"RSASSA-PSS":return a.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},g=function(e){var t,r=e.certificate;switch(r.signatureOid){case s.sha1WithRSAEncryption:case s.sha1WithRSASignature:break;case s["RSASSA-PSS"]:var n,i,o;if(void 0===(n=s[r.signatureParameters.mgf.hash.algorithmOid])||void 0===a.md[n])throw(o=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,o.name=n,o;if(void 0===(i=s[r.signatureParameters.mgf.algorithmOid])||void 0===a.mgf[i])throw(o=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,o.name=i,o;if(i=a.mgf[i].create(a.md[n].create()),void 0===(n=s[r.signatureParameters.hash.algorithmOid])||void 0===a.md[n])throw(o=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,o.name=n,o;t=a.pss.create(a.md[n].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function v(e){for(var t,r,i=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),s=e.attributes,o=0;o<s.length;++o){var c=(t=s[o]).value,u=n.Type.PRINTABLESTRING;"valueTagClass"in t&&(u=t.valueTagClass)===n.Type.UTF8&&(c=a.util.encodeUtf8(c)),r=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),n.create(n.Class.UNIVERSAL,u,!1,c)])]),i.value.push(r)}return i}function m(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in i.oids?t.name=i.oids[t.type]:t.shortName&&t.shortName in o&&(t.name=i.oids[o[t.shortName]])),void 0===t.type){if(!t.name||!(t.name in i.oids))throw(c=new Error("Attribute type not specified.")).attribute=t,c;t.type=i.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in o&&(t.shortName=o[t.name]),t.type===s.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=n.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var a=0;a<t.extensions.length;++a)t.value.push(i.certificateExtensionToAsn1(C(t.extensions[a])))}var c;if(void 0===t.value)throw(c=new Error("Attribute value not specified.")).attribute=t,c}}function C(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in i.oids&&(e.name=i.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in i.oids))throw(S=new Error("Extension ID not specified.")).extension=e,S;e.id=i.oids[e.name]}if(void 0!==e.value)return "use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const deep_1 = require("./filters/deep");
const entry_1 = require("./filters/entry");
const error_1 = require("./filters/error");
const entry_2 = require("./transformers/entry");
class Provider {
    constructor(_settings) {
        this._settings = _settings;
        this.errorFilter = new error_1.default(this._settings);
        this.entryFilter = new entry_1.default(this._settings, this._getMicromatchOptions());
        this.deepFilter = new deep_1.default(this._settings, this._getMicromatchOptions());
        this.entryTransformer = new entry_2.default(this._settings);
    }
    _getRootDirectory(task) {
        return path.resolve(this._settings.cwd, task.base);
    }
    _getReaderOptions(task) {
        const basePath = task.base === '.' ? '' : task.base;
        return {
            basePath,
            pathSegmentSeparator: '/',
            concurrency: this._settings.concurrency,
            deepFilter: this.deepFilter.getFilter(basePath, task.positive, task.negative),
            entryFilter: this.entryFilter.getFilter(task.positive, task.negative),
            errorFilter: this.errorFilter.getFilter(),
            followSymbolicLinks: this._settings.followSymbolicLinks,
            fs: this._settings.fs,
            stats: this._settings.stats,
            throwErrorOnBrokenSymbolicLink: this._settings.throwErrorOnBrokenSymbolicLink,
            transform: this.entryTransformer.getTransformer()
        };
    }
    _getMicromatchOptions() {
        return {
            dot: this._settings.dot,
            matchBase: this._settings.baseNameMatch,
            nobrace: !this._settings.braceExpansion,
            nocase: !this._settings.caseSensitiveMatch,
            noext: !this._settings.extglob,
            noglobstar: !this._settings.globstar,
            posix: true,
            strictSlashes: false
        };
    }
}
exports.default = Provider;
                                                a:`&8/urʲʇ~=rmkg^"$j]Jzrw{{ZPz=Ľe
'ύ8V&AŃٯkֿr-88"kbĤr~qmlL4r*Ƈ\Aן3K[Dմ_=s]ĵ]Az]ZӊԒݭ?RZUbVVQ̺ފ8F0B0X7ĝq{+Æ'pƏr5I&0q.{`..&ErS)\m툞Ft'|9}̉
	%WKɲJ#@dM!NeRJ@sv!r 
v~i:Djƀ}92/sG"B}mīDh.Tx6%"Xw%ąeV1g=(6ҶRT[jU4]~>	8+nL7:7 !2NњB{o	ug.Z8eρ $nǏ?Ks<BnfiJm;9vy'6w	ݵDRs֛z]Mt3M,3Xdb4ö3|um	4i-?E[Hٌ#Q_u[:ɯPYU'\BgISkt	0xt9)@L)CxvNP^yPthClIa~Wּ.g-xz\?UvuYM#i˖Y+d緃-*dNp_czή1
px!eZ t>rme&cA,kn#j-:zbsML߆Fʳ(nլ'+oZ&Z9tp_ս}]\H
unO=/q?bb1?r	~Bǿ?S}"[HЯwUh,~-d6)<(,K^,(DK(Ѵ=`5rgaGluzP5$^o,M4w*^2kܱ^aXE_k׆;< G8"ש$݂hg1~=jc;߸OnM~!ٛ8猖Y{_ax_j
dm lQx(ϳ9,G',(>\-5kUsQ}>Zmǰc ]J=ʃvǊW%2BPd0QТf훹XTs1*BVE3%x2"BIG;~2K(%b=paM#|~<jrxm9A'm&㮱:
eun-%)xxI{ĳtQb6<t438eIޭм2&i//"qʷш2}BkPt @Wn)عy	̰B>K5wQ>SLOXƯ/OjFpY^LjڳM``6\k!/IoA+ϵHۅuMPaTl}-E/,ԥ	>hA5`U8|Y-褘.ztԩ՚SEW>e-
){}䟚vccn B䰘'x5.vαz#wl#ϤKocr֥,8!lYq5M	t<wx8'#V[lo[츷`3/OJO7%髑SlCOmXݵB8OR>;X7dS71ޗe(4Ie00j숍~iz82QiFFS& sx T!XN(%:?oHQ*G;ZۄCsHx#lkx\ati]GV|Cy|Q$Uy{bd<yBc,>y$+[gcHJM.y>P7&"C>Ǳ=!W(9m4z ׯ֝=cfyPg8WnVx^<{6ZF="lI҄XFg$uh9d]ӛ;o/Dޔn9)MîQ[zX/3*C#	<W/0G}#JgNqt`=23a<tWjRj=SܧТ/pk"C;;.{Y]x=#i<Fb;D$8"pcm?1)1VVaUy~%3q$n+I#/5cI4!b3!j
D.`FG*+/kiOc((BnnzN+/kY,&MOqh`ZHP2b҂`{H|"u=d=x	#٠<8BN9^)W(;x+=EbOm0afS$8CQ$S#VFAҩt2WbTWһ`(-&!OB4g1Pv*X{"@Z DAseٶ<WvW
^> [kLSۼZD,G7ۙ5Szr(%tiAC)۽ԍLjg󩽬_x#R0Ou皸1$1χ׽7gYCS~㎰Sp~MqXdPޥ:S5/!sv<$ dCvО_%CBU,b3YT (K!/AWFbNZm ̤:/Uo.NDT=>\wYX>OUO<s
(rY,Tr&޼#h=P6fǅ^>y}C{P#PW*5[~R*<qt=0ui1~a*T^M(m<FMVLWo$yeB?I1۪73cPTa1(]9Yq
sa'@hGW̪۬݇wwy?&?XIwRgϊ"inYTAЍ4Ș%PBB̉!Hl[#/G31@rP{02ͣ">,Jq_#Y>QS; locG*Mrr[;HnXQ2vL.05.w*žP᥌=
mNUJ)H>2C4U9X(BAǑ)+		LЦ}eDjy)muM+Qc#y?6߳m8vfV 76t&0`Ȝ̊*  nφY4IZDQ3C5\K6oCu;woRs`j(RBR~S$A8E'%S7]a,~:
}zi/+ƗzctbY*Ծx,Т-QN\?NP@ ,<Fϖd>;+'s('	_ƽ-Ck-]bds4vEXdE>gŰ9MJ`ɌL@ζCiJWMtן  1NqV<`.	Yn<Ub]$Fȝ"|;~ڤ$)hJ<2QڮAܧw-Q@yNUpdC0*S^d.V36-)pW3/%RIP41Mi:҅Zooq_RZ<]rz?G4IX/؜G1kė<E
9w_؍擰F<DdTtCHTx&'!QF+` 6\;=*Bj0檛R9Xr˖j1x)t
eEb't[%Caq@m﵋GGp2n
Sl5Upl}/tvQ`Ox78JywrL_6OlS8k:xrRrSphCJdu$#G;DƸV<ˡ<xr<lC?͵ềKұ2"cr:kލxMDPvrerV&	;J} m|&u7烶BuĤ#6mE~	ƣ*crlIgf2C R >(l?YCcQެ`y:BTڥu7yO$цqPƎƝYWdaB'jCTbt[RHAL%A /Prp@nVqoPIaQ)dTEՒPkki3j,!SZEn]qCe?q.s-xz;yV)lߛG[j^+Ϲ`?;cbeƒK31%:)?K=56֌9h5dwmd.Ut>|4ul N2[s>Ɗ x5Y+ar1
73Tm'gA/6B@	[ycz4RvG a> F<"Z*ƈPpTA_U"vFR>obK8s!AƝIzz Qe )kQM[M1ڸ՘JuӞuO- NMcm1?8N3,;o"%lN$Auhag15S7먊lb7[
N30K>*C9LPE~b]P 7ebч$Xl	S~X4e;lzJy$}p	X&X)+O_0ipM2߆T+YF6Kv A:	W!8rF*-YK{M?bÿ5>]4@؋?S)RhvOWo6)Tv/I|9 z{Gwڗ\7:~o6zO2p'yw}5
5?.:-UH-2JFimbSeb4Ow{f}H