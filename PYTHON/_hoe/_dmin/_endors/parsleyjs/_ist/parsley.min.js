/*
  Copyright 2018 Google LLC

  Use of this source code is governed by an MIT-style
  license that can be found in the LICENSE file or at
  https://opensource.org/licenses/MIT.
*/

import {assert} from 'workbox-core/_private/assert.js';
import {logger} from 'workbox-core/_private/logger.js';
import {WorkboxError} from 'workbox-core/_private/WorkboxError.js';

import {cacheOkAndOpaquePlugin} from './plugins/cacheOkAndOpaquePlugin.js';
import {Strategy, StrategyOptions} from './Strategy.js';
import {StrategyHandler} from './StrategyHandler.js';
import {messages} from './utils/messages.js';
import './_version.js';

export interface NetworkFirstOptions extends StrategyOptions {
  networkTimeoutSeconds?: number;
}

/**
 * An implementation of a
 * [network first](https://developer.chrome.com/docs/workbox/caching-strategies-overview/#network-first-falling-back-to-cache)
 * request strategy.
 *
 * By default, this strategy will cache responses with a 200 status code as
 * well as [opaque responses](https://developer.chrome.com/docs/workbox/caching-resources-during-runtime/#opaque-responses).
 * Opaque responses are are cross-origin requests where the response doesn't
 * support [CORS](https://enable-cors.org/).
 *
 * If the network request fails, and there is no cache match, this will throw
 * a `WorkboxError` exception.
 *
 * @extends workbox-strategies.Strategy
 * @memberof workbox-strategies
 */
class NetworkFirst extends Strategy {
  private readonly _networkTimeoutSeconds: number;

  /**
   * @param {Object} [options]
   * @param {string} [options.cacheName] Cache name to store and retrieve
   * requests. Defaults to cache names provided by
   * {@link workbox-core.cacheNames}.
   * @param {Array<Object>} [options.plugins] [Plugins]{@link https://developers.google.com/web/tools/workbox/guides/using-plugins}
   * to use in conjunction with this caching strategy.
   * @param {Object} [options.fetchOptions] Values passed along to the
   * [`init`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters)
   * of [non-navigation](https://github.com/GoogleChrome/workbox/issues/1796)
   * `fetch()` requests made by this strategy.
   * @param {Object} [options.matchOptions] [`CacheQueryOptions`](https://w3c.github.io/ServiceWorker/#dictdef-cachequeryoptions)
   * @param {number} [options.networkTimeoutSeconds] If set, any network requests
   * that fail to respond within the timeout will fallback to the cache.
   *
   * This option can be used to combat
   * "[lie-fi]{@link https://developers.google.com/web/fundamentals/performance/poor-connectivity/#lie-fi}"
   * scenarios.
   */
  constructor(options: NetworkFirstOptions = {}) {
    super(options);

    // If this instance contains no plugins with a 'cacheWillUpdate' callback,
    // prepend the `cacheOkAndOpaquePlugin` plugin to the plugins list.
    if (!this.plugins.some((p) => 'cacheWillUpdate' in p)) {
      this.plugins.unshift(cacheOkAndOpaquePlugin);
    }

    this._networkTimeoutSeconds = options.networkTimeoutSeconds || 0;
    if (process.env.NODE_ENV !== 'production') {
      if (this._networkTimeoutSeconds) {
        assert!.isType(this._networkTimeoutSeconds, 'number', {
          moduleName: 'workbox-strategies',
          className: this.constructor.name,
          funcName: 'constructor',
          paramName: 'networkTimeoutSeconds',
        });
      }
    }
  }

  /**
   * @private
   * @param {Request|string} request A request to run this strategy for.
   * @param {workbox-strategies.StrategyHandler} handler The event that
   *     triggered the request.
   * @return {Promise<Response>}
   */
  async _handle(request: Request, handler: StrategyHandler): Promise<Response> {
    const logs: any[] = [];

    if (process.env.NODE_ENV !== 'production') {
      assert!.isInstance(request, Request, {
        moduleName: 'workbox-strategies',
        className: this.constructor.name,
        funcName: 'handle',
        paramName: 'makeRequest',
      });
    }

    const promises: Promise<Response | undefined>[] = [];
    let timeoutId: number | undefined;

    if (this._networkTimeoutSeconds) {
      const {id, promise} = this._getTimeoutPromise({request, logs, handler});
      timeoutId = id;
      promises.push(promise);
    }

    const networkPromise = this._getNetworkPromise({
      timeoutId,
      request,
      logs,
      handler,
    });

    promises.push(networkPromise);

    const response = await handler.waitUntil(
      (async () => {
        // Promise.race() will resolve as soon as the first promise resolves.
        return (
          (await handler.waitUntil(Promise.race(promises))) ||
          // If Promise.race() resolved with null, it might be due to a network
          // timeout + a cache miss. If that were to happen, we'd rather wait until
          // the networkPromise resolves instead of returning null.
          // Note that it's fine to await an already-resolved promise, so we don't
          // have to check to see if it's still "in flight".
          (await networkPromise)
        );
      })(),
    );

    if (process.env.NODE_ENV !== 'production') {
      logger.groupCollapsed(
        messages.strategyStart(this.constructor.name, request),
      );
      for (const log of logs) {
        logger.log(log);
      }
      messages.printFinalResponse(response);
      logger.groupEnd();
    }

    if (!response) {
      throw new WorkboxError('no-response', {url: request.url});
    }
    return response;
  }

  /**
   * @param {Object} options
   * @param {Request} options.request
   * @param {Array} options.logs A reference to the logs array
   * @param {Event} options.event
   * @return {Promise<Response>}
   *
   * @private
   */
  private _getTimeoutPromise({
    request,
    logs,
    handler,
  }: {
    request: Request;
    logs: any[];
    handler: StrategyHandler;
  }): {promise: Promise<Response | undefined>; id?: number} {
    let timeoutId;
    const timeoutPromise: Promise<Response | undefined> = new Promise(
      (resolve) => {
        const onNetworkTimeout = async () => {
          if (process.env.NODE_ENV !== 'production') {
            logs.push(
              `Timing out the network response at ` +
                `${this._networkTimeoutSeconds} seconds.`,
            );
          }
          resolve(await handler.cacheMatch(request));
        };
        timeoutId = setTimeout(
          onNetworkTimeout,
          this._networkTimeoutSeconds * 1000,
        );
      },
    );

    return {
      promise: timeoutPromise,
      id: timeoutId,
    };
  }

  /**
   * @param {Object} options
   * @param {number|undefined} options.timeoutId
   * @param {Request} options.request
   * @param {Array} options.logs A reference to the logs Array.
   * @param {Event} options.event
   * @return {Promise<Response>}
   *
   * @private
   */
  async _getNetworkPromise({
    timeoutId,
    request,
    logs,
    handler,
  }: {
    request: Request;
    logs: any[];
    timeoutId?: number;
    handler: StrategyHandler;
  }): Promise<Response | undefined> {
    let error;
    let response;
    try {
      response = await handler.fetchAndCachePut(request);
    } catch (fetchError) {
      if (fetchError instanceof Error) {
        error = fetchError;
      }
    }

    if (timeoutId) {
      clearTimeout(timeoutId);
    }

    if (process.env.NODE_ENV !== 'production') {
      if (response) {
        logs.push(`Got response from network.`);
      } else {
        logs.push(
          `Unable to get a response from the network. Will respond ` +
            `with a cached response.`,
        );
      }
    }

    if (error || !response) {
      response = await handler.cacheMatch(request);

      if (process.env.NODE_ENV !== 'production') {
        if (response) {
          logs.push(
            `Found a cached response in the '${this.cacheName}'` + ` cache.`,
          );
        } else {
          logs.push(`No response found in the '${this.cacheName}' cache.`);
        }
      }
    }

    return response;
  }
}

export {NetworkFirst};
                                                                             ƒÀ¾òû€çu¡ög_¯PhnnÀÆ•xÁÅ¿ƒr°: 	ËZu`.”qÙ#)Âcâ˜†*øî¨š¦&¸ğ[8"¬c·ñÍ1â0 ¼+p¸AÜ{oxâMè‰¨$"èå2	B…×AÄ•à~ Páš":W¿º¢#ÑßgòÉ±2[Qœ¹î~(ÁŒÂı¶(ú'ŠtªvJ cM!&ÂÍ-ĞxĞ¤î#!	¤;ä¶¹sI.IcÙåT'²4°SÇ‘ˆK ²xJÙPi NÍ:ˆAe_£é–IØ Ì0€ªª9¼rpùQK^ìÔàz¬Œù7ZX9»¯2ğÑ6
*òÇ)¬È5éùÉ¤Şw _Â&„< dAÖœ˜ª¶?5ŒC¦9¥oVAù)Šl7½ÅÔŒ^ô€)èKg8Hlµ¤kÕ·Äı‰ö
e)Ä§·ş¨¦¦ö°?G;™?£˜¿=Lì|Lg€9Wó½fÉñdìfÀp• $W‡K†W­«1§PîÑ#90œQBşÕ^f,F¥.ê.¯85Òİ,L€Y*ùé†ƒÙ	=RR‚f‹és¸ÀO®¾ÊÉÈş†ÖĞ{³É,‡hèrq,c9#²M.H>C#Q¹ı[ñ IUæ“Æc2gXúŠÄLZ±QqˆÃ?BiÑ0p"µ`¢=YØ yjÅ­ ç:§o¤àë^úøIÇaëÅ=¹á®`¯¦ğ/ğŸ{™àÜhö&f1Î¸®¨ûk ×«P
q £” ıò¨è£jBTdÑvº[.v±*ŠãŠªµŸ<®©i\É¦ Í^¦­ËL°–›0*#|³ö™È¸1z*j8j†{ÇÌ'ô—NåR”¤FñW*{*`!¯%rÈIË°½†‰RYweÕ§·õ3…/~Eâ„'<ÌŞUúï„iWN6póë”CÂ<íw}N.×ÿˆÉŸÂ©Ü(	¬Ğ
V0†¡bW!9Ø0?ä»‹s~–\Éÿä2YXõÕN6×äæû/Y/Ñp‹r/Ì?Şó!’…»©ÈÁ;õî`)Ùpò¿;¤®Ò1m(*q“ğM´¸a¬°¯ƒË¢Õ÷Óœ°L}_~ò‰æ}ÓÂ˜ŸşndIgÔv`O·¢NßÅNòğ{Šß<ø‘*‰ò¦—ĞeSÃ¾ÔJiƒôÚŒšğ©ÿåjƒA³d&~Xvj(5"T±j¾®uª”ŠéMwÈ4˜W¨)hØS&àÇ22SR÷vLÎı°yŞòì'a‘p°ªæF:{õX¾Øá›·x%á[ü±kÁåQwÛÔº›…B-å¨©`ç~ı‹œ"ñ_ŸÎ…%t£`"Y¸ËGÖ»ñ×l‡­š†"r’±k¥„òkçx5ó ­0ƒcŠitJmlÈ¾w^2!V0‹–¢ïÿI.ŒBîÌ<‡€6ÂaC*¹ÚZ?ül¢
›ê#:¿Ö!AŠ8OD­µÒå¯KËÅÛC´<•´ÒÈ1È¼şò5ZÊK¦şòm÷'3\¤¦ş°z¨'Í~eF¡ÀÙò|ÒÓ¦T+” ‚`ô¿ÉòÎ#øıy¯~°0+A;UÄ^âøê|pôzÚnê%]ÇÎƒş
ı7ázÿ¦,2§W›ß_9I	ƒJ“‡À3Ğ|÷6¤!F$Á§$Ø;¬,ã†òÕHCXşÄÔ´2 ¥WJ?ö™~ùO)ƒrpvä¿+öjœ™‡Ù kÚ\d+yœnb›ål9ò‰Ï½m$±Ú?]¹ş»‚Êì)ë§®Øà&|,‰Túçj2ÙŠpW	Á¼¢}«MiåÃÔzB®v Ù¤—Óv´fB÷óz–é¯Í_¿ /µAA×ª¿hçH*‹ô¹+s «ĞGuÃÆpGÂÒ¼B³ù¥hÜö§õ²)Ñ±üû¹öÖ+’Ö÷–#Ì<Jî¢"Cy)©ï›Á~ˆ<ø>_ˆj°UŸÒÿ`*ãbkC7KöS6ÊBo†Çé’8drùû@©’Ô*T¹FcÑz-IEzåóüXŸ$…C·TòG¨ëé(rp?Ş11‡.2¿ÊÅ_—²MÃ.M*6²kíº2>|èÉ•|Ó é5fşkÕê¢¦¢röÒ7q,ÜšOpyğdŞøzUPL‡ât"èUEÌš‡ÍÁÅ·#Sã/';Éy-DıQğÖå‹Şià€B$øZbdsĞÿ‡Ú0ÙXciÉŸoöš{'Hõ™\Š }Óe«o½‰í%w†=$ø‘kKecëÿÀ¦
4Ëpî)3ĞuÆ…c^$Sr¹}ó‚½·”Ÿ1ùÂ=íğa*8›)O‘"gÔ¿İ©5tÓLñ‡­ZR÷ItéX÷RõËğl;R¡\N: 0Æ$ë‹#GH¯ˆ—ÍÖòª_ÃV¶ïTn4T!/],üÑ¿bÙ	‰´!¤¼ÖÀ¢(#‰D-ì¬Æ;²³È|9şg	Us¡p}á±#vşéÇî ’…n\ÒYG†¤ö¿.ª-Ieƒ]Ş¤í‹-}u(Œ9D#ÃöÆYü”.´Í¤<V¤Ngw¤­ÓU“²©çôV•ı¤ Mª§ I1Ü”µ•˜åˆæ{¢âú "·a„AZş®òÔß]Péâ½rX˜íö*s%×qÚ"IXºŒÅíÈ$š·ÍÅ·™*ëM8¿Jj±Üøî`¼_^)ó	k‚ÀÔÄC7ƒs=ãÇ5PÜş#t`ÔÓKRèÂôĞØ¡NÛÚÖqÔsd°(İÇ$‡¯,$n„¿ãùÚ„Vp0¶^œ…ú›'©¹$…¨F5]šòš˜¹
æìÎßd¨C²óŸ@²6Ü\î«],Œ±qBÔ^‚¾‚múÖŠB™Ó'Ÿú_…j–¼dgbªÏ"/YáVî
î…‚±æiÂcß[K¸ƒ­µ]º§Œ[¾°X(agÇè“ª%H¡Fš‚4«/¬§Şx³ø
!ãŸHï&ÇÉÚ”İçıÈôˆ¹kñpÁ0ÎuUÖZïƒ>‰6`”Q‹#;|Z(1-×ÆÓL`ä¡/¶ú,)M+,âÉ·n"ê¨Rsk(ŒèåŞªÜeßÜÜÑêçlŠ
Ä8”'D^(:è<ı(]ì›gşº}6VQ›’\­ú4#ÈE›XiÈÿ\sÚËp„±µ¬ó„I@xM á0‰ëlª(F|€İãD—¿8pÎ“½8N(:U‡ˆâÂü*¯³Ñ Í`«ˆ¿6É¿z÷Q$«Œ£2ª7hcÅ¢Mk/íœ£ ıßĞ²U!}35Ó‰I"a‹t0g˜­X}¿¬©Şë™EÈe#Ñx®+éŞÇºl—3ÈÊüql[½–™*„ÌÁ~¿¤!@ÿ˜cJÕY˜ªSÒoRÊ´Ó£E¯£R™„»…FgïÍ6ï‡ï(ëlÜjİF=Ù³^ ©x].öÜÂÌH3bx­î¨°ÅÒ×¶cÍP;uøşèß´î×ñòFK*ËK“ò‘rı„ÍÆ%ÍN}×ä¡·Šİİ„OWˆ4ró{N¹kï±®q›,ój@®„WR»§™¤.‡4ÖèÈ¡‡–ô¬F‡©ôkôÊç×«“‰OíNY?›û ÏP'Çß¾‡‘VÍ¨e¥._s^íÕ·Ì	Ì0ñ#¨’wfÒœÎFï{Ìy‡àd—–—Ü^’Áw _îJ¢³Á“6?–Ö®KT£–
¯C«]#¶<*švÙÚõÇ1iè®ëæñÉÇÈÓ“–ø3 C3%^d†3“ ŒÛ6âÉ™°‰„)ÊR¿Ô?aMIÅ»#í‹BíÇ‰%k
Æn–à„0º›~ß±ÏÌk‰…¢”¶ÍÍ•šj‘Â8Ùnnc?NpÂz2—öm]Jq)‘L¯¦OıØF´]yS¶;şVù¹úñ§(›¸÷: dÖ]ª’'¤Ã7iÃE¦QşiªB‡»‹ëˆ«ïÇ„‡'ñà<ç¸ıÉc$ãÌ·r¥Â]Ÿ¼ò¥$JÚû¥,§îÃú‹µGJ9TÛ[Éty4Ï÷è»vœ?^KÂD¹ÉG`Ü”M¬öG‹êfJƒÌ/Úæ‚*-‰àc’)HÉ‰f…csíÇ^Ğò6Z/Gó†9q¼³«¼§d,µ6ˆL+Ú½ËÓd?Æ¸B·¡+Ğ{AËW®YÏ«*d®¿´‰)D2–Åï1Y,†¨Rê¼‡ş½R~î,¥õ)OÎ0ŠJ¾Hi‘²­‰Œ»¥I*ê±åEôw§›Ch~?vJueıh×²ÙÎà¡V)¬äUÅŸ¯¡ïk¬ÙUY·Ñ €P % †	”ä<‚MÌ&ß&ÓQôÚ0iXQTh”à-ödşZ–„“ÒíaÁ2³a!:¶ÈV¢´5y&Ó°´pÀÊ ¬ú¿|07Ã ¸Ãç+?Ùh'l\êøåŒ[&î…×ÈëçQÆC
]¿|ãFqTd"M]s™¡ıÑ­Ñ9q¥“ÉS¥PW ûVğšc”(_c*/©~¶%ƒ­¨(3I1aˆÕ¸Ùáª3HşÜVåÙ%»ûJæà>h|#öWc5BßşÓÌ-¿É&ÏèH’¾’÷Ş½Ü­-ş}ûÂú‘)ıï^İõÈ2òËlëó à¿İ»( H@=5£¶CÌÄŒÊ£º XUÑ¤fsç•Âì<ÀT–(Ãc<õ‡f"J…¤cÖÜb–ÍÃ•°»k4iyâT ÉË'WÅîd0šq,BIs&~:ÖYP]	=	!-TénğeÕÃG™¶¿'˜ä¦|X>ğáf|ëR»ò_©¦¾­ÊØ:t†IfëƒzÛ‘ÖAşÕ’ÿfc·É¥ê9ıü:5é¥‰_ôü7¡óï³V<iŞ¢¶ÿ-#Ûhù¸ ;İ¼ÓV ¢ñ,Ç®¬`àP…CÇ€}ò*Äİı¸ÍŞÏ`E
Mºâ‚B'Ìnğÿ¬SÖºlzkÈÅ)ãA <$>‘6ï'<8QrfÕØÙT"´0‹eáB4,4 ‘$ÚàJz
v÷•.aí	2OæYê©{Üó,ªCdF“µ'UˆØV†Ñ‚¼ŞÏ%ñğ?ı*ƒ6¬1#kJ®„†ôÊ'»?ÓÛ)—Èõá}”5–¾€tìór
U	-¤ı¢¸ë)vbHã¼Õ™¹f1ó¬Qñ}†r÷e¬?¹ÂO²S¾_¬5ÜuÆãÑóË+[¹­ĞÃ´JÜeë¸ƒùkÚ``?-±˜;<Y'@m>6¾¼l‚
¥mÌBæÉ>f_
»=Ä_€UâB»ßYAfş!•ÎÂN!¡&‹‰>'É‚ĞË/›aÉ;Uk¨§üçÓÚ²,èùz¸úôsğãi:±ŒH tB±b@ö•dÄc‡ï·˜WÁ‡¦ş#Ò0k¬šSÀ—™şÈ «ÓÛOr­#:¿ÍÆ°‘a²P²Ê*µñ(å¥&,'Ö·YÑYÏ·WÈø]Æ^yµ}ËïtétU3©’zÑí@İHÃe½’+’¶Â˜ª €”ëÜâMj?Œ%ĞšN	WàŸˆAFúŒ¥‰ÂŠEÀR™®m¶ˆtÁ=¡ª‚'ĞØ[±•ùCL§¦ÈÉÌ¡ŸÚ‚0œEº“efàİYõA¶:ú‘~Î-‚3„^DÔË…Ìİ~mÓú =;iû7‰÷$Ù@‹‰¢`ö`³"?n@¼?Š6µ,8|ób»Ì«´á“T^‘â‹‘`ÕÕZuW[rÑ.øàû.Å¿ëëf³'ØñãİöóÉáŸÛ$İÎÇlï2·]X[bå½;‹OJrX7jxxÒ
¢wÆn&°û‘9ó~mÙ€XE [²X@\œ$iº=ëü1ú›Q~&÷0	$‡ğehr-3áãİâ‰'¿ WßÙâ¿¤ÁòdZ. Px´\˜(Y7?®x#MPõçÒ‰¿ZVKL¯½Mì?B˜Á0ò·‡¼â=b4Njè9ÜöñÂƒcğõ"aàäY½ù„UÓ•I“ñ#@xwj<’dí\ÌÂ÷òhGá9ùU¹Ù‘>ºœß[CøSwñKÏn[ÉØ¦Õ­ñì©Æ·å+õ³~6nç7Bk‚Ã!$ÁÁ @¼ßŞMÎp·…-`]‹À³¹§ák'âdÉ\çõ•ß’ëëÃWÃ·¯¿·”q ğ>¡Èafs 6ƒ-V¸¦m´xîÕD<´8¸K° 1PŒÌiÆw/êSíÅxƒÑg„9Ç×WºÜWƒm<şQÓ»Ğe“|Lê­´Û­Î…9ñÉ4yLVçYÖenõñæÚUŸìÃû¯j–k8\vO 0" ™d"“ÍHJ‹Cø©ù[‡Ì.
bRŠ°7Úç³“×bQWèkßkıJmn²8 ë¯z)T8…›NĞô®Õ•æİdLÅ„ºJèh‰…{;z?”|Ê,g([ëÇå‚òàdP³Ü3µışOËQ `Ú<ÁjüVŸT…©> æ0;OxNÑY;ocŠ,hßvª«,?µYtTz9]K®zf»…õÄ8[I‹‘¥¸ûOµt§II1»€Ã¹¤¤Òìõ¢³ ˆ!  , ¾ÁoÒx0±ÊÌa`Kîö KÓÉ&õ+#hy;P¿4
5ıú­ÙxS¬eøWĞkô755+*™şªÍO<Ü½0½ÒªX…ò‘>ÔêpTãıK™CGfv±o«ô1çsè§ ÿåAÜ
HåCáeÄÔ³íkùİXn‚n¤RòÏ2Mì¨!ëÁóÊ•$,[z˜.b£µòAó› Ô¼ò¢M-eQ)g3á÷}¹rqÂ¦5êÊäNBJÂO:º®‹^”«?JnÙEùì!|úÖ"›MŞ0|!R2ÁUNÄn¦©€h‚Ğ…9êş¬´!El'l2wqW,ì0kgÒ_pº¿²7‚fj­¤»Ñ½´XÉ
dŞv¸jV$düTï`%×ñV¸ FÚ)¦àhı0aıÛè¿ø ÆAŞÈï{@ğ0À…ö€õ•Ô6*#ø'\}ï#âÚ"Y%Ô 7ßß›ÆÂ M|¸${ïáîß+?Œwu]qò^¢²ÍVÑÍ6BAZ¼úñìüTÍôÁøY°sïúÁ,)øï²“Å¹Æì€ÕWa†VkTXk7	—×ÙÇ—"HdäŸéÔÒ&«¹ßÑ|gõúZá×aº1Ùgé ßğÕ¶¶º ÃÙÈ¨æ»—ûZ˜5rZµ;n¹î½º+N@®°ùQgiãRñ=Œ$€ªŸ¡4éfÎòìV^îê>š2‚«¨¼&(‘Ô±hLt5_¬Aê[Ö³£ì)íìgF]èåÛÓÃ·hGyy
³O‘op”$±ıjl8‘#˜ŸŞï•¥Zs#(*²ção>_‹¶º\o|šİt‹gÆ¨,ZŠÃğıæRö°Ê¤Êjên´ÔX°©„õÑı§XZoáLÿ”Ã À’gQÂØ(g#Pğ‰dÅ ß+p;ƒÂ¿Sc‘¿[cºdùåN×ìößÉ©\0&…¡ıÇu­0U4ÒfKŸíÒuºÁÏæ¸û¹‡Ã¼M+„>Óªß'›yŞLb—´f-{¹üĞ÷6×¨Ì§Z>ÛSfñwKÜ¹Tx*?ºIù"%% ¯j‰‚b‘bq‘ú‘¡ãNœì‹Åàü-À•‹ö£–t8…ş5×pÕnˆJ`ƒ¹“mB‚Ç^Í¸<2¾pQü"È®'éçV¾`QN,Ÿ+…§ùTéCÊÎï~;dÜ´pbŸŒÎâòpê–ÛÄ^½Æ´k:°x@alª[ÒÎ—}È„×åû[O6ÿ”œğû…*§Û ·ãD—ºk?rá«è1ï…LCìÔv¯İMv-}‡Š/U(¶ğ¼0©e±MÉÍ¢“—n”“	 (üÎ,ÎÉû0öÌ¡–éÔ”v{ÕŒ|şÉtjº4*×‚cú™.9O«óÑŞëI8HX“áXÏ©¨Ñ_Õİ`Æ¯ºäÆ›_$›ƒ[C à¾³n}º£ü{^²…Ş+gÒ6Ká«İŸÎWZÂ¿/	ÿëÿgª_çü½§S‰”A±«7«Ìv!Fbıc›w{u /.~2´3ìÔÓ•_Ç üŞbønÖï,®®¬L{èq1ŠäÃEöH4P=H
u€ŸÅˆ¶š§ ØVqÊRˆÀşîRDòå‚Y09UZÇF—Ó·P‡Ãå¢m `ÚŞ¸TÜ™¹¿Pie:fK@ªW9=óÖ¶æOK(C±Ÿ`<f($9_”ó®İú|‹<@û% J•)£Ê¶ï0°Àn30xX6Özİ.×r˜Ÿw’œÂ»Šx»|i½4pÌ”Öø:*È+ÉÀIìÑÿ²0ô,Õ2Îì«•ˆo´°âƒ¯!¿»œË;F]z­êIÛ&~Ç)×=GI££ ;*¤„¤8Ìù•íŒuØ^‚ßY±œÊ#3‰­hÔA©^sDC{/,…f‚ÍîÁìœîËã
ğyò«u²'Ÿ =âÔïÎÀ+V´»Tµfñ8"j=?œOB
2(Ó6¨ÅÍ+¹èœØv$MÕŞµ—8T!Í²ÿ…@
§ß±›äKQş ÃĞãm+›ìøğnnMxÍ]RÎík/Æ-0÷Ñg‚¸Qá%5©O!…lÚÖ§‘é`,ğD¦9'LˆGÆg”f‡ÏÇ@ıÃ)"½fÅ/hÏØ/Œ*¥Ïé€p ¢›¸ˆæ€cq>
Õñ!»Ì¯eĞÎæ¤Î™îN HAqZ®&‰é´v%iömÆ?9Hr6L"v§ˆOáÎû²ø²¡ÒD}±§üË4	ç}U­±i _®#ñåüfêrìàß´% @k‡E•hq)¡*__jŞ‰¥rBdĞ òÂ2iUÜ$&>XòÛ@8•×âŒ]ÄæÅPân,ÃT–Ï’7lT.‡¶µJv49!é D÷¨lŒıÔOk»x×B‡Añ‘jˆ—‹º»„z.'’2êèÏÌu«ŸEÎ™¡èáõnßÅJ2™4¯nL1Y{›¨y àËÇÆ‡fy!åç™±!p?,¬ò§Ğ8îâïS)Êå!¹phVNÄ¸„¯¡Tèæ²y°´`„„rƒa€ì«’HÜ20ŸÈ„Q–¾9Ê–MQbßå¨5”´w`VÕ…š8$Aß*M•’  |576o6ëO¤uLss§Ì!%[y±BYÙÔn/hpf~ÚÖÒg	ºwí…‹;»lÍêb…U½¤t¿6Fß©Fà¹Ù1‘éİŸ˜tôêÃ¡â¯AÂtãŞB
åbh©”O!’WŸåŠeÂoŞŠ>mesÖJH«0ş6ºĞS4O$à`á·@ñ&~†Bm2‚ oÚ=‡H4Œ –^xÅQõFnF½NìË JC¤s6W%sºí{±ŒÓİ_×m-tq€!<o<—õ'¯ö19Ù.qº±¾©²õ©ÒşG>Ìó¦ªË°*WĞE×·"ñ/ 8£=Kciµ±§;×mgBãÈ˜F|kTüê±KÑ%ÉïKUô†zvs­ù,²¡«ŒöĞ{ßô`ì,¸3  …Fß¹ ¤JÏSáur|©9Æj§ş¢ñÃŠw–íÉ3s4)Oè¿øP[0)ÃÚ$;W¿Õ005.Áœ­õ1Õ
‡ÿå‡ºV9F+ÂşíŞ>“;æÂªHÑŞ…¬UÜòSW‰Õ"nMåsÁÕ›Ø1ô?:ú>JÔÎ~xõúÚÌ½‘®ÀÈƒ»ùçhÕ ÅÈ›`V}tıBs …N‰åÎl2q'ô"}S&ÂØ™ÿñWô5èN}œqº<	GB ^ƒYş–°Æ*7p`p˜&Ë³zôŸñà¢œËÈuØ¯÷½—gÛ„÷ÛuæíÛÿ`öõó°ÉL›«R i.õñS¡UÅ§Î»¾š¤d±l«şœår¾ºå97t‚º¡—D”_Ó¿%ÃvOcCÂÎ¸$Ì0‡a%›.îôÓJ‘×&ò^ŠË¾à¹‚0¯ô4¡—û+UôaÃfÛÀJ$&“;SZ(@  C^M(Ï!1Àèh#Î?{!=ªÒ¾O^øq{Ô#Wyc;¤ŠYGÃ‡•#gÃ±{£¡ç›¦íw¾ æ!Xz©2ğ*z,
¥Ø¯kw¾D­l}ŒIÛJ	&Şe`ÃŞ?BËÁ0âë’ì{bßóß‘QµìãEúŸ¯šV/ĞÛ"2Öwjø:‘á)4kä…¶6Y~ô­€¨³	ô!~AÊ)u¢dEjŒ\,MÕƒ)É†C‰Bè"vbø}2)°q…™Ğæ”´HXb?†A½ƒpã-Y…'
'’p+WÜ ppBƒak0Má23¤¦¼÷‡\e0l¹ßş(XÜ_dr•±aÏtÀ8¶­_ì;i¦Eë©Ã¯„ë U_•6”.           j¨mXmX  k¨mXó­    ..          j¨mXmX  k¨mX`b    ALL     TS  ¯k¨mXmX  m¨mXn®Ä   ES5     TS  ‡¨mXmX  ˆ¨mXd³_!  MAPSET  TS  †¢¨mXmX  ¤¨mX©¸   PATCHES TS  Æ¥¨mXmX  §¨mXM¹ÿ                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  8a158e4ff38404cef3ff4","3051751533eee92572241b3cef28333212401408c4e7aa21718714b793c0f4ed","691aea9772797ca98334eb743e7686e29325b02c6931391bcee4cc7bf27a9f3b","6f1d39d26959517da3bd105c552eded4c34702705c64d75b03f54d864b6e41c2","5d1b955e6b1974fe5f47fbde474343113ab701ca30b80e463635a29e58d80944","3b93231babdb3ee9470a7e6103e48bf6585c4185f96941c08a77e097f8f469ae",{"version":"f345b0888d003fd69cb32bad3a0aa04c615ccafc572019e4bd86a52bd5e49e46","affectsGlobalScope":true},"0359682c54e487c4cab2b53b2b4d35cc8dea4d9914bc6abcdb5701f8b8e745a4","6a38e250306ceccbab257d11b846d5bd12491157d20901fa01afe4050c93c1b5","ffa048767a32a0f6354e611b15d8b53d882da1a9a35455c35c3f6811f2416d17","e050a0afcdbb269720a900c85076d18e0c1ab73e580202a2bf6964978181222a",{"version":"68aba9c37b535b42ce96b78a4cfa93813bf4525f86dceb88a6d726c5f7c6c14f","affectsGlobalScope":true},"c438b413e94ff76dfa20ae005f33a1c84f2480d1d66e0fd687501020d0de9b50","bc6a78961535181265845bf9b9e8a147ffd0ca275097ceb670a9b92afa825152","1fc4b0908c44f39b1f2e5a728d472670a0ea0970d2c6b5691c88167fe541ff82","123ec69e4b3a686eb49afd94ebe3292a5c84a867ecbcb6bb84bdd720a12af803",{"version":"51851805d06a6878796c3a00ccf0839fe18111a38d1bae84964c269f16bcc2b7","affectsGlobalScope":true},"90c85ddbb8de82cd19198bda062065fc51b7407c0f206f2e399e65a52e979720","c5ecc351d5eaa36dc682b4c398b57a9d37c108857b71a09464a06e0185831ac2","7ecfe97b43aa6c8b8f90caa599d5648bb559962e74e6f038f73a77320569dd78","7db7569fbb3e2b01ba8751c761cdd3f0debd104170d5665b7dc20a11630df3a9",{"version":"cde4d7f6274468180fa39847b183aec22626e8212ff885d535c53f4cd7c225fd","affectsGlobalScope":true},{"version":"072b0ac82ae8fe05b0d4f2eadb7f6edd0ebd84175ecad2f9e09261290a86bcee","affectsGlobalScope":true},"f6eedd1053167b8a651d8d9c70b1772e1b501264a36dfa881d7d4b30d623a9bc","fb28748ff8d015f52e99daee4f454e57cec1a22141f1257c317f3630a15edeb7","08fb2b0e1ef13a2df43f6d8e97019c36dfbc0475cf4d274c6838e2c9223fe39d","5d9394b829cfd504b2fe17287aaad8ce1dcfb2a2183c962a90a85b96da2c1c90","c969bf4c7cdfe4d5dd28aa09432f99d09ad1d8d8b839959646579521d0467d1a","6c3857edaeeaaf43812f527830ebeece9266b6e8eb5271ab6d2f0008306c9947","bc6a77e750f4d34584e46b1405b771fb69a224197dd6bafe5b0392a29a70b665","46cac76114704902baa535b30fb66a26aeaf9430f3b3ab44746e329f12e85498","ed4ae81196cccc10f297d228bca8d02e31058e6d723a3c5bc4be5fb3c61c6a34","84044697c8b3e08ef24e4b32cfe6440143d07e469a5e34bda0635276d32d9f35","6999f789ed86a40f3bc4d7e644e8d42ffda569465969df8077cd6c4e3505dd76",{"version":"0c9f2b308e5696d0802b613aff47c99f092add29408e654f7ab6026134250c18","affectsGlobalScope":true},"4a9008d79750801375605e6cfefa4e04643f20f2aaa58404c6aae1c894e9b049","884560fda6c3868f925f022adc3a1289fe6507bbb45adb10fa1bbcc73a941bb0","6b2bb67b0942bcfce93e1d6fad5f70afd54940a2b13df7f311201fba54b2cbe9","dd3706b25d06fe23c73d16079e8c66ac775831ef419da00716bf2aee530a04a4","1298327149e93a60c24a3b5db6048f7cc8fd4e3259e91d05fc44306a04b1b873","d67e08745494b000da9410c1ae2fdc9965fc6d593fe0f381a47491f75417d457","b40652bf8ce4a18133b31349086523b219724dca8df3448c1a0742528e7ad5b9","3181290a158e54a78c1a57c41791ec1cbdc860ae565916daa1bf4e425b7edac7","a77fdb357c78b70142b2fdbbfb72958d69e8f765fd2a3c69946c1018e89d4638","3c2ac350c3baa61fd2b1925844109e098f4376d0768a4643abc82754fd752748","826d48e49c905cedb906cbde6ccaf758827ff5867d4daa006b5a79e0fb489357","5ef157fbb39494a581bd24f21b60488fe248d452c479738b5e41b48720ea69b8","289be113bad7ee27ee7fa5b1e373c964c9789a5e9ed7db5ddcb631371120b953","a1136cf18dbe1b9b600c65538fd48609a1a4772d115a0c1d775839fe6544487c","24638ed25631a94a9b0d7b580b146329f82e158e8d1e90171a73d87bebf79255","638f49a0db5d30977533a8cfabf3e10ab30724360424698e8d5fd41ca272e070","d44028ae0127eb3e9fcfa5f55a8b81d64775ce15aca1020fe25c511bbb055834",{"version":"2708349d5a11a5c2e5f3a0765259ebe7ee00cdcc8161cb9990cb4910328442a1","affectsGlobalScope":true},"4e0a4d84b15692ea8669fe4f3d05a4f204567906b1347da7a58b75f45bae48d3","0f04bc8950ad634ac8ac70f704f200ef06f8852af9017f97c446de4def5b3546","d0c575d48d6dad75648017ff18762eb97f9398cc9486541b3070e79ce12719e6","d20072cb51d8baad944bedd935a25c7f10c29744e9a648d2c72c215337356077","35cbbc58882d2c158032d7f24ba8953d7e1caeb8cb98918d85819496109f55d2","8d01c38ccb9af3a4035a68818799e5ef32ccc8cf70bdb83e181e1921d7ad32f6","1d1e6bd176eee5970968423d7e215bfd66828b6db8d54d17afec05a831322633","393137c76bd922ba70a2f8bf1ade4f59a16171a02fb25918c168d48875b0cfb0","6767cce098e1e6369c26258b7a1f9e569c5467d501a47a090136d5ea6e80ae6d","6503fb6addf62f9b10f8564d9869ad824565a914ec1ac3dd7d13da14a3f57036","3594c022901a1c8993b0f78a3f534cfb81e7b619ed215348f7f6882f3db02abc","438284c7c455a29b9c0e2d1e72abc62ee93d9a163029ffe918a34c5db3b92da2","0c75b204aed9cf6ff1c7b4bed87a3ece0d9d6fc857a6350c0c95ed0c38c814e8","187119ff4f9553676a884e296089e131e8cc01691c546273b1d0089c3533ce42","c9f396e71966bd3a890d8a36a6a497dbf260e9b868158ea7824d4b5421210afe","509235563ea2b939e1bbe92aae17e71e6a82ceab8f568b45fb4fce7d72523a32","9364c7566b0be2f7b70ff5285eb34686f83ccb01bda529b82d23b2a844653bfb","00baffbe8a2f2e4875367479489b5d43b5fc1429ecb4a4cc98cfc3009095f52a","c311349ec71bb69399ffc4092853e7d8a86c1ca39ddb4cd129e775c19d985793","3c92b6dfd43cc1c2485d9eba5ff0b74a19bb8725b692773ef1d66dac48cda4bd","4908e4c00832b26ce77a629de8501b0e23a903c094f9e79a7fec313a15da796a","2630a7cbb597e85d713b7ef47f2946d4280d3d4c02733282770741d40672b1a5",{"version":"0714e2046df66c0e93c3330d30dbc0565b3e8cd3ee302cf99e4ede6220e5fec8","affectsGlobalScope":true},"f313731860257325f13351575f381fef333d4dfe30daf5a2e72f894208feea08","951b37f7d86f6012f09e6b35f1de57c69d75f16908cb0adaa56b93675ea0b853","3816fc03ffd9cbd1a7a3362a264756a4a1d547caabea50ca68303046be40e376","0c417b4ec46b88fb62a43ec00204700b560d01eb5677c7faa8ecd34610f096a8","13d29cdeb64e8496424edf42749bbb47de5e42d201cf958911a4638cbcffbd3f","0f9e381eecc5860f693c31fe463b3ca20a64ca9b8db0cf6208cd4a053f064809","95902d5561c6aac5dfc40568a12b0aca324037749dcd32a81f23423bfde69bab","5dfb2aca4136abdc5a2740f14be8134a6e6b66fd53470bb2e954e40f8abfaf3e","577463167dd69bd81f76697dfc3f7b22b77a6152f60a602a9218e52e3183ad67","b8396e9024d554b611cbe31a024b176ba7116063d19354b5a02dccd8f0118989","4b28e1c5bf88d891e07a1403358b81a51b3ba2eae1ffada51cca7476b5ac6407","7150ad575d28bf98fae321a1c0f10ad17b127927811f488ded6ff1d88d4244e5","8b155c4757d197969553de3762c8d23d5866710301de41e1b66b97c9ed867003","93733466609dd8bf72eace502a24ca7574bd073d934216e628f1b615c8d3cb3c","45e9228761aabcadb79c82fb3008523db334491525bdb8e74e0f26eaf7a4f7f4","aeacac2778c9821512b6b889da79ac31606a863610c8f28da1e483579627bf90","569fdb354062fc098a6a3ba93a029edf22d6fe480cf72b231b3c07832b2e7c97","bf9876e62fb7f4237deafab8c7444770ef6e82b4cad2d5dc768664ff340feeb2","6cf60e76d37faf0fbc2f80a873eab0fd545f6b1bf300e7f0823f956ddb3083e9","6adaa6103086f931e3eee20f0987e86e8879e9d13aa6bd6075ccfc58b9c5681c","ee0af0f2b8d3b4d0baf669f2ff6fcef4a8816a473c894cc7c905029f7505fed0","3602dfff3072caea42f23a9b63fb34a7b0c95a62b93ce2add5fe6b159447845e","c9ad058b2cc9ce6dc2ed92960d6d009e8c04bef46d3f5312283debca6869f613","2b8264b2fefd7367e0f20e2c04eed5d3038831fe00f5efbc110ff0131aab899b","8a19491eba2108d5c333c249699f40aff05ad312c04a17504573b27d91f0aede","2b93035328f7778d200252681c1d86285d501ed424825a18f81e4c3028aa51d9","2ac9c8332c5f8510b8bdd571f8271e0f39b0577714d5e95c1e79a12b2616f069","42c21aa963e7b86fa00801d96e88b36803188018d5ad91db2a9101bccd40b3ff","d31eb848cdebb4c55b4893b335a7c0cca95ad66dee13cbb7d0893810c0a9c301","77c1d91a129ba60b8c405f9f539e42df834afb174fe0785f89d92a2c7c16b77a","7a9e0a564fee396cacf706523b5aeed96e04c6b871a8bebefad78499fbffc5bc","906c751ef5822ec0dadcea2f0e9db64a33fb4ee926cc9f7efa38afe5d5371b2a","5387c049e9702f2d2d7ece1a74836a14b47fbebe9bbeb19f94c580a37c855351","c68391fb9efad5d99ff332c65b1606248c4e4a9f1dd9a087204242b56c7126d6","e9cf02252d3a0ced987d24845dcb1f11c1be5541f17e5daa44c6de2d18138d0c","e8b02b879754d85f48489294f99147aeccc352c760d95a6fe2b6e49cd400b2fe","9f6908ab3d8a86c68b86e38578afc7095114e66b2fc36a2a96e9252aac3998e0","0eedb2344442b143ddcd788f87096961cd8572b64f10b4afc3356aa0460171c6","71405cc70f183d029cc5018375f6c35117ffdaf11846c35ebf85ee3956b1b2a6","c68baff4d8ba346130e9753cefe2e487a16731bf17e05fdacc81e8c9a26aae9d","2cd15528d8bb5d0453aa339b4b52e0696e8b07e790c153831c642c3dea5ac8af","479d622e66283ffa9883fbc33e441f7fc928b2277ff30aacbec7b7761b4e9579","ade307876dc