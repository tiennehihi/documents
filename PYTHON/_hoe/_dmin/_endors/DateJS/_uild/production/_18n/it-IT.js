(e,t){this._audit=t,this.id=e.id,this.selector=e.selector||"*",e.impact&&(d(g.impact.includes(e.impact),"Impact ".concat(e.impact," is not a valid impact")),this.impact=e.impact),this.excludeHidden="boolean"!=typeof e.excludeHidden||e.excludeHidden,this.enabled="boolean"!=typeof e.enabled||e.enabled,this.pageLevel="boolean"==typeof e.pageLevel&&e.pageLevel,this.reviewOnFail="boolean"==typeof e.reviewOnFail&&e.reviewOnFail,this.any=e.any||[],this.all=e.all||[],this.none=e.none||[],this.tags=e.tags||[],this.preload=!!e.preload,this.actIds=e.actIds,e.matches&&(this.matches=Wp(e.matches))}function Zp(e){var n,a;if(e.length)return n=!1,a={},e.forEach(function(e){var t=e.results.filter(function(e){return e});(a[e.type]=t).length&&(n=!0)}),n?a:null}Qp.prototype.matches=function(){return!0},Qp.prototype.gather=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n="mark_gather_start_"+this.id,a="mark_gather_end_"+this.id,r="mark_isVisibleToScreenReaders_start_"+this.id,o="mark_isVisibleToScreenReaders_end_"+this.id,i=(t.performanceTimer&&s.mark(n),gu(this.selector,e));return this.excludeHidden&&(t.performanceTimer&&s.mark(r),i=i.filter(N),t.performanceTimer)&&(s.mark(o),s.measure("rule_"+this.id+"#gather_axe.utils.isVisibleToScreenReaders",r,o)),t.performanceTimer&&(s.mark(a),s.measure("rule_"+this.id+"#gather",n,a)),i},Qp.prototype.runChecks=function(t,r,o,i,n,e){var l=this,s=ha();this[t].forEach(function(e){var n=l._audit.checks[e.id||e],a=fs(n,l.id,o);s.defer(function(e,t){n.run(r,a,i,e,t)})}),s.then(function(e){e=e.filter(function(e){return e}),n({type:t,results:e})}).catch(e)},Qp.prototype.runChecksSync=function(e,n,a,r){var o=this,i=[];return this[e].forEach(function(e){var e=o._audit.checks[e.id||e],t=fs(e,o.id,a);i.push(e.runSync(n,t,r))}),{type:e,results:i=i.filter(function(e){return e})}},Qp.prototype.run=function(r){var e,o=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length?arguments[2]:void 0,n=3<arguments.length?arguments[3]:void 0,l=(i.performanceTimer&&this._trackPerformance(),ha()),s=new Xp(this);try{e=this.gatherAndMatchNodes(r,i)}catch(e){return void n(new S({cause:e,ruleId:this.id}))}i.performanceTimer&&this._logGatherPerformance(e),e.forEach(function(a){l.defer(function(n,t){var e=ha();["any","all","none"].forEach(function(n){e.defer(function(e,t){o.runChecks(n,a,i,r,e,t)})}),e.then(function(e){var t=Zp(e);t&&(t.node=new Qn(a,i),s.nodes.push(t),o.reviewOnFail)&&(["any","all"].forEach(function(e){t[e].forEach(function(e){!1===e.result&&(e.result=void 0)})}),t.none.forEach(function(e){!0===e.result&&(e.result=void 0)})),n()}).catch(function(e){return t(e)})})}),l.defer(function(e){return setTimeout(e,0)}),i.performanceTimer&&this._logRulePerformance(),l.then(function(){return t(s)}).catch(function(e){return n(e)})},Qp.prototype.runSync=function(r){var e,o=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=(i.performanceTimer&&this._trackPerformance(),new Xp(this));try{e=this.gatherAndMatchNodes(r,i)}catch(e){throw new S({cause:e,ruleId:this.id})}return i.performanceTimer&&this._logGatherPerformance(e),e.forEach(function(t){var n=[],a=(["any","all","none"].forEach(function(e){n.push(o.runChecksSync(e,t,i,r))}),Zp(n));a&&(a.node=t.actualNode?new Qn(t,i):null,l.nodes.push(a),o.reviewOnFail)&&(["any","all"].forEach(function(e){a[e].forEach(function(e){!1===e.result&&(e.result=void 0)})}),a.none.forEach(function(e){!0===e.result&&(e.result=void 0)}))}),i.performanceTimer&&this._logRulePerformance(),l},Qp.prototype._trackPerformance=function(){this._markStart="mark_rule_start_"+this.id,this._markEnd="mark_rule_end_"+this.id,this._markChecksStart="mark_runchecks_start_"+this.id,this._markChecksEnd="mark_runchecks_end_"+this.id},Qp.prototype._logGatherPerformance=function(e){sn("gather (",e.length,"):",s.timeElapsed()+"ms"),s.mark(this._markChecksStart)},Qp.prototype._logRulePerformance=function(){s.mark(this._markChecksEnd),s.mark(this._markEnd),s.measure("runchecks_"+this.id,this._markChecksStart,this._markChecksEnd),s.measure("rule_"+this.id,this._markStart,this._markEnd)},Qp.prototype.gatherAndMatchNodes=function(t,e){var n=this,a="mark_matches_start_"+this.id,r="mark_matches_end_"+this.id,o=this.gather(t,e);return e.performanceTimer&&s.mark(a),o=o.filter(function(e){return n.matches(e.actualNode,e,t)}),e.performanceTimer&&(s.mark(r),s.measure("rule_"+this.id+"#matches",a,r)),o},Qp.prototype.after=function(i,l){var t,e,n,s=this,a=Ja(t=this).map(function(e){e=t._audit.checks[e.id||e];return e&&"function"==typeof e.after?e:null}).filter(Boolean),u=this.id;return a.forEach(function(e){t=i.nodes,n=e.id,a=[],t.forEach(function(t){Ja(t).forEach(function(e){e.id===n&&(e.node=t.node,a.push(e))})});var n,a,t=a,r=fs(e,u,l),o=e.after(t,r);s.reviewOnFail&&o.forEach(function(e){var t=(s.any.includes(e.id)||s.all.includes(e.id))&&!1===e.result,n=s.none.includes(e.id)&&!0===e.result;(t||n)&&(e.result=void 0)}),t.forEach(function(e){delete e.node,-1===o.indexOf(e)&&(e.filtered=!0)})}),i.nodes=(e=["any","all","none"],n=(a=i).nodes.filter(function(t){var n=0;return e.forEach(function(e){t[e]=t[e].filter(function(e){return!0!==e.filtered}),n+=t[e].length}),0<n}),n=a.pageLevel&&n.length?[n.reduce(function(t,n){if(t)return e.forEach(function(e){t[e].push.apply(t[e],n[e])}),t})]:n),i},Qp.prototype.configure=function(e){e.hasOwnProperty("selector")&&(this.selector=e.selector),e.hasOwnProperty("excludeHidden")&&(this.excludeHidden="boolean"!=typeof e.excludeHidden||e.excludeHidden),e.hasOwnProperty("enabled")&&(