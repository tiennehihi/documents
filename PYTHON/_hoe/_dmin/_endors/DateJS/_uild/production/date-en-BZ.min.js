FyZyhhQXJncywgJ3NvdXJjZScpLFxuICAgICAgb3JpZ2luYWxMaW5lOiBsaW5lLFxuICAgICAgb3JpZ2luYWxDb2x1bW46IHV0aWwuZ2V0QXJnKGFBcmdzLCAnY29sdW1uJywgMClcbiAgICB9O1xuXG4gICAgbmVlZGxlLnNvdXJjZSA9IHRoaXMuX2ZpbmRTb3VyY2VJbmRleChuZWVkbGUuc291cmNlKTtcbiAgICBpZiAobmVlZGxlLnNvdXJjZSA8IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgbWFwcGluZ3MgPSBbXTtcblxuICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmRNYXBwaW5nKG5lZWRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JpZ2luYWxMaW5lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmlnaW5hbENvbHVtblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluYXJ5U2VhcmNoLkxFQVNUX1VQUEVSX0JPVU5EKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgdmFyIG1hcHBpbmcgPSB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzW2luZGV4XTtcblxuICAgICAgaWYgKGFBcmdzLmNvbHVtbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbExpbmUgPSBtYXBwaW5nLm9yaWdpbmFsTGluZTtcblxuICAgICAgICAvLyBJdGVyYXRlIHVudGlsIGVpdGhlciB3ZSBydW4gb3V0IG9mIG1hcHBpbmdzLCBvciB3ZSBydW4gaW50b1xuICAgICAgICAvLyBhIG1hcHBpbmcgZm9yIGEgZGlmZmVyZW50IGxpbmUgdGhhbiB0aGUgb25lIHdlIGZvdW5kLiBTaW5jZVxuICAgICAgICAvLyBtYXBwaW5ncyBhcmUgc29ydGVkLCB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gZmluZCBhbGwgbWFwcGluZ3MgZm9yXG4gICAgICAgIC8vIHRoZSBsaW5lIHdlIGZvdW5kLlxuICAgICAgICB3aGlsZSAobWFwcGluZyAmJiBtYXBwaW5nLm9yaWdpbmFsTGluZSA9PT0gb3JpZ2luYWxMaW5lKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkTGluZScsIG51bGwpLFxuICAgICAgICAgICAgY29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBwaW5nID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5nc1srK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsQ29sdW1uID0gbWFwcGluZy5vcmlnaW5hbENvbHVtbjtcblxuICAgICAgICAvLyBJdGVyYXRlIHVudGlsIGVpdGhlciB3ZSBydW4gb3V0IG9mIG1hcHBpbmdzLCBvciB3ZSBydW4gaW50b1xuICAgICAgICAvLyBhIG1hcHBpbmcgZm9yIGEgZGlmZmVyZW50IGxpbmUgdGhhbiB0aGUgb25lIHdlIHdlcmUgc2VhcmNoaW5nIGZvci5cbiAgICAgICAgLy8gU2luY2UgbWFwcGluZ3MgYXJlIHNvcnRlZCwgdGhpcyBpcyBndWFyYW50ZWVkIHRvIGZpbmQgYWxsIG1hcHBpbmdzIGZvclxuICAgICAgICAvLyB0aGUgbGluZSB3ZSBhcmUgc2VhcmNoaW5nIGZvci5cbiAgICAgICAgd2hpbGUgKG1hcHBpbmcgJiZcbiAgICAgICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxMaW5lID09PSBsaW5lICYmXG4gICAgICAgICAgICAgICBtYXBwaW5nLm9yaWdpbmFsQ29sdW1uID09IG9yaWdpbmFsQ29sdW1uKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkTGluZScsIG51bGwpLFxuICAgICAgICAgICAgY29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBwaW5nID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5nc1srK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXBwaW5ncztcbiAgfTtcblxuZXhwb3J0cy5Tb3VyY2VNYXBDb25zdW1lciA9IFNvdXJjZU1hcENvbnN1bWVyO1xuXG4vKipcbiAqIEEgQmFzaWNTb3VyY2VNYXBDb25zdW1lciBpbnN0YW5jZSByZXByZXNlbnRzIGEgcGFyc2VkIHNvdXJjZSBtYXAgd2hpY2ggd2UgY2FuXG4gKiBxdWVyeSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9yaWdpbmFsIGZpbGUgcG9zaXRpb25zIGJ5IGdpdmluZyBpdCBhIGZpbGVcbiAqIHBvc2l0aW9uIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLlxuICpcbiAqIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgdGhlIHJhdyBzb3VyY2UgbWFwIChlaXRoZXIgYXMgYSBKU09OIHN0cmluZywgb3JcbiAqIGFscmVhZHkgcGFyc2VkIHRvIGFuIG9iamVjdCkuIEFjY29yZGluZyB0byB0aGUgc3BlYywgc291cmNlIG1hcHMgaGF2ZSB0aGVcbiAqIGZvbGxvd2luZyBhdHRyaWJ1dGVzOlxuICpcbiAqICAgLSB2ZXJzaW9uOiBXaGljaCB2ZXJzaW9uIG9mIHRoZSBzb3VyY2UgbWFwIHNwZWMgdGhpcyBtYXAgaXMgZm9sbG93aW5nLlxuICogICAtIHNvdXJjZXM6IEFuIGFycmF5IG9mIFVSTHMgdG8gdGhlIG9yaWdpbmFsIHNvdXJjZSBmaWxlcy5cbiAqICAgLSBuYW1lczogQW4gYXJyYXkgb2YgaWRlbnRpZmllcnMgd2hpY2ggY2FuIGJlIHJlZmVycmVuY2VkIGJ5IGluZGl2aWR1YWwgbWFwcGluZ3MuXG4gKiAgIC0gc291cmNlUm9vdDogT3B0aW9uYWwuIFRoZSBVUkwgcm9vdCBmcm9tIHdoaWNoIGFsbCBzb3VyY2VzIGFyZSByZWxhdGl2ZS5cbiAqICAgLSBzb3VyY2VzQ29udGVudDogT3B0aW9uYWwuIEFuIGFycmF5IG9mIGNvbnRlbnRzIG9mIHRoZSBvcmlnaW5hbCBzb3VyY2UgZmlsZXMuXG4gKiAgIC0gbWFwcGluZ3M6IEEgc3RyaW5nIG9mIGJhc2U2NCBWTFFzIHdoaWNoIGNvbnRhaW4gdGhlIGFjdHVhbCBtYXBwaW5ncy5cbiAqICAgLSBmaWxlOiBPcHRpb25hbC4gVGhlIGdlbmVyYXRlZCBmaWxlIHRoaXMgc291cmNlIG1hcCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogSGVyZSBpcyBhbiBleGFtcGxlIHNvdXJjZSBtYXAsIHRha2VuIGZyb20gdGhlIHNvdXJjZSBtYXAgc3BlY1swXTpcbiAqXG4gKiAgICAge1xuICogICAgICAgdmVyc2lvbiA6IDMsXG4gKiAgICAgICBmaWxlOiBcIm91dC5qc1wiLFxuICogICAgICAgc291cmNlUm9vdCA6IFwiXCIsXG4gKiAgICAgICBzb3VyY2VzOiBbXCJmb28uanNcIiwgXCJiYXIuanNcIl0sXG4gKiAgICAgICBuYW1lczogW1wic3JjXCIsIFwibWFwc1wiLCBcImFyZVwiLCBcImZ1blwiXSxcbiAqICAgICAgIG1hcHBpbmdzOiBcIkFBLEFCOztBQkNERTtcIlxuICogICAgIH1cbiAqXG4gKiBUaGUgc2Vjb25kIHBhcmFtZXRlciwgaWYgZ2l2ZW4sIGlzIGEgc3RyaW5nIHdob3NlIHZhbHVlIGlzIHRoZSBVUkxcbiAqIGF0IHdoaWNoIHRoZSBzb3VyY2UgbWFwIHdhcyBmb3VuZC4gIFRoaXMgVVJMIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIHNvdXJjZXMgYXJyYXkuXG4gKlxuICogWzBdOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFVMVJHQWVoUXdSeXBVVG92RjFLUmxwaU9GemUwYi1fMmdjNmZBSDBLWTBrL2VkaXQ/cGxpPTEjXG4gKi9cbmZ1bmN0aW9uIEJhc2ljU291cmNlTWFwQ29uc3VtZXIoYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICB2YXIgc291cmNlTWFwID0gYVNvdXJjZU1hcDtcbiAgaWYgKHR5cGVvZiBhU291cmNlTWFwID09PSAnc3RyaW5nJykge1xuICAgIHNvdXJjZU1hcCA9IHV0aWwucGFyc2VTb3VyY2VNYXBJbnB1dChhU291cmNlTWFwKTtcbiAgfVxuXG4gIHZhciB2ZXJzaW9uID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAndmVyc2lvbicpO1xuICB2YXIgc291cmNlcyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZXMnKTtcbiAgLy8gU2FzcyAzLjMgbGVhdmVzIG91dCB0aGUgJ25hbWVzJyBhcnJheSwgc28gd2UgZGV2aWF0ZSBmcm9tIHRoZSBzcGVjICh3aGljaFxuICAvLyByZXF1aXJlcyB0aGUgYXJyYXkpIHRvIHBsYXkgbmljZSBoZXJlLlxuICB2YXIgbmFtZXMgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICduYW1lcycsIFtdKTtcbiAgdmFyIHNvdXJjZVJvb3QgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICdzb3VyY2VSb290JywgbnVsbCk7XG4gIHZhciBzb3VyY2VzQ29udGVudCA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZXNDb250ZW50JywgbnVsbCk7XG4gIHZhciBtYXBwaW5ncyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ21hcHBpbmdzJyk7XG4gIHZhciBmaWxlID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAnZmlsZScsIG51bGwpO1xuXG4gIC8vIE9uY2UgYWdhaW4sIFNhc3MgZGV2aWF0ZXMgZnJvbSB0aGUgc3BlYyBhbmQgc3VwcGxpZXMgdGhlIHZlcnNpb24gYXMgYVxuICAvLyBzdHJpbmcgcmF0aGVyIHRoYW4gYSBudW1iZXIsIHNvIHdlIHVzZSBsb29zZSBlcXVhbGl0eSBjaGVja2luZyBoZXJlLlxuICBpZiAodmVyc2lvbiAhPSB0aGlzLl92ZXJzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCB2ZXJzaW9uOiAnICsgdmVyc2lvbik7XG4gIH1cblxuICBpZiAoc291cmNlUm9vdCkge1xuICAgIHNvdXJjZVJvb3QgPSB1dGlsLm5vcm1hbGl6ZShzb3VyY2VSb290KTtcbiAgfVxuXG4gIHNvdXJjZXMgPSBzb3VyY2VzXG4gICAgLm1hcChTdHJpbmcpXG4gICAgLy8gU29tZSBzb3VyY2UgbWFwcyBwcm9kdWNlIHJlbGF0aXZlIHNvdXJjZSBwYXRocyBsaWtlIFwiLi9mb28uanNcIiBpbnN0ZWFkIG9mXG4gICAgLy8gXCJmb28uanNcIi4gIE5vcm1hbGl6ZSB0aGVzZSBmaXJzdCBzbyB0aGF0IGZ1dHVyZSBjb21wYXJpc29ucyB3aWxsIHN1Y2NlZWQuXG4gICAgLy8gU2VlIGJ1Z3ppbC5sYS8xMDkwNzY4LlxuICAgIC5tYXAodXRpbC5ub3JtYWxpemUpXG4gICAgLy8gQWx3YXlzIGVuc3VyZSB0aGF0IGFic29sdXRlIHNvdXJjZXMgYXJlIGludGVybmFsbHkgc3RvcmVkIHJlbGF0aXZlIHRvXG4gICAgLy8gdGhlIHNvdXJjZSByb290LCBpZiB0aGUgc291cmNlIHJvb3QgaXMgYWJzb2x1dGUuIE5vdCBkb2luZyB0aGlzIHdvdWxkXG4gICAgLy8gYmUgcGFydGljdWxhcmx5IHByb2JsZW1hdGljIHdoZW4gdGhlIHNvdXJjZSByb290IGlzIGEgcHJlZml4IG9mIHRoZVxuICAgIC8vIHNvdXJjZSAodmFsaWQsIGJ1dCB3aHk/PykuIFNlZSBnaXRodWIgaXNzdWUgIzE5OSBhbmQgYnVnemlsLmxhLzExODg5ODIuXG4gICAgLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gc291cmNlUm9vdCAmJiB1dGlsLmlzQWJzb2x1dGUoc291cmNlUm9vdCkgJiYgdXRpbC5pc0Fic29sdXRlKHNvdXJjZSlcbiAgICAgICAgPyB1dGlsLnJlbGF0aXZlKHNvdXJjZVJvb3QsIHNvdXJjZSlcbiAgICAgICAgOiBzb3VyY2U7XG4gICAgfSk7XG5cbiAgLy8gUGFzcyBgdHJ1ZWAgYmVsb3cgdG8gYWxsb3cgZHVwbGljYXRlIG5hbWVzIGFuZCBzb3VyY2VzLiBXaGlsZSBzb3VyY2UgbWFwc1xuICAvLyBhcmUgaW50ZW5kZWQgdG8gYmUgY29tcHJlc3NlZCBhbmQgZGVkdXBsaWNhdGVkLCB0aGUgVHlwZVNjcmlwdCBjb21waWxlclxuICAvLyBzb21ldGltZXMgZ2VuZXJhdGVzIHNvdXJjZSBtYXBzIHdpdGggZHVwbGljYXRlcyBpbiB0aGVtLiBTZWUgR2l0aHViIGlzc3VlXG4gIC8vICM3MiBhbmQgYnVnemlsLmxhLzg4OTQ5Mi5cbiAgdGhpcy5fbmFtZXMgPSBBcnJheVNldC5mcm9tQXJyYXkobmFtZXMubWFwKFN0cmluZyksIHRydWUpO1xuICB0aGlzLl9zb3VyY2VzID0gQXJyYXlTZXQuZnJvbUFycmF5KHNvdXJjZXMsIHRydWUpO1xuXG4gIHRoaXMuX2Fic29sdXRlU291cmNlcyA9IHRoaXMuX3NvdXJjZXMudG9BcnJheSgpLm1hcChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiB1dGlsLmNvbXB1dGVTb3VyY2VVUkwoc291cmNlUm9vdCwgcywgYVNvdXJjZU1hcFVSTCk7XG4gIH0pO1xuXG4gIHRoaXMuc291cmNlUm9vdCA9IHNvdXJjZVJvb3Q7XG4gIHRoaXMuc291cmNlc0NvbnRlbnQgPSBzb3VyY2VzQ29udGVudDtcbiAgdGhpcy5fbWFwcGluZ3MgPSBtYXBwaW5ncztcbiAgdGhpcy5fc291cmNlTWFwVVJMID0gYVNvdXJjZU1hcFVSTDtcbiAgdGhpcy5maWxlID0gZmlsZTtcbn1cblxuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSk7XG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5jb25zdW1lciA9IFNvdXJjZU1hcENvbnN1bWVyO1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gZmluZCB0aGUgaW5kZXggb2YgYSBzb3VyY2UuICBSZXR1cm5zIC0xIGlmIG5vdFxuICogZm91bmQuXG4gKi9cbkJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl9maW5kU291cmNlSW5kZXggPSBmdW5jdGlvbihhU291cmNlKSB7XG4gIHZhciByZWxhdGl2ZVNvdXJjZSA9IGFTb3VyY2U7XG4gIGlmICh0aGlzLnNvdXJjZVJvb3QgIT0gbnVsbCkge1xuICAgIHJlbGF0aXZlU291cmNlID0gdXRpbC5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsIHJlbGF0aXZlU291cmNlKTtcbiAgfVxuXG4gIGlmICh0aGlzLl9zb3VyY2VzLmhhcyhyZWxhdGl2ZVNvdXJjZSkpIHtcbiAgICByZXR1cm4gdGhpcy5fc291cmNlcy5pbmRleE9mKHJlbGF0aXZlU291cmNlKTtcbiAgfVxuXG4gIC8vIE1heWJlIGFTb3VyY2UgaXMgYW4gYWJzb2x1dGUgVVJMIGFzIHJldHVybmVkIGJ5IHxzb3VyY2VzfC4gIEluXG4gIC8vIHRoaXMgY2FzZSB3ZSBjYW4ndCBzaW1wbHkgdW5kbyB0aGUgdHJhbnNmb3JtLlxuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IHRoaXMuX2Fic29sdXRlU291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgIGlmICh0aGlzLl9hYnNvbHV0ZVNvdXJjZXNbaV0gPT0gYVNvdXJjZSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBCYXNpY1NvdXJjZU1hcENvbnN1bWVyIGZyb20gYSBTb3VyY2VNYXBHZW5lcmF0b3IuXG4gKlxuICogQHBhcmFtIFNvdXJjZU1hcEdlbmVyYXRvciBhU291cmNlTWFwXG4gKiAgICAgICAgVGhlIHNvdXJjZSBtYXAgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuICogQHBhcmFtIFN0cmluZyBhU291cmNlTWFwVVJMXG4gKiAgICAgICAgVGhlIFVSTCBhdCB3aGljaCB0aGUgc291cmNlIG1hcCBjYW4gYmUgZm91bmQgKG9wdGlvbmFsKVxuICogQHJldHVybnMgQmFzaWNTb3VyY2VNYXBDb25zdW1lclxuICovXG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLmZyb21Tb3VyY2VNYXAgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBDb25zdW1lcl9mcm9tU291cmNlTWFwKGFTb3VyY2VNYXAsIGFTb3VyY2VNYXBVUkwpIHtcbiAgICB2YXIgc21jID0gT2JqZWN0LmNyZWF0ZShCYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSk7XG5cbiAgICB2YXIgbmFtZXMgPSBzbWMuX25hbWVzID0gQXJyYXlTZXQuZnJvbUFycmF5KGFTb3VyY2VNYXAuX25hbWVzLnRvQXJyYXkoKSwgdHJ1ZSk7XG4gICAgdmFyIHNvdXJjZXMgPSBzbWMuX3NvdXJjZXMgPSBBcnJheVNldC5mcm9tQXJyYXkoYVNvdXJjZU1hcC5fc291cmNlcy50b0FycmF5KCksIHRydWUpO1xuICAgIHNtYy5zb3VyY2VSb290ID0gYVNvdXJjZU1hcC5fc291cmNlUm9vdDtcbiAgICBzbWMuc291cmNlc0NvbnRlbnQgPSBhU291cmNlTWFwLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50KHNtYy5fc291cmNlcy50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWMuc291cmNlUm9vdCk7XG4gICAgc21jLmZpbGUgPSBhU291cmNlTWFwLl9maWxlO1xuICAgIHNtYy5fc291cmNlTWFwVVJMID0gYVNvdXJjZU1hcFVSTDtcbiAgICBzbWMuX2Fic29sdXRlU291cmNlcyA9IHNtYy5fc291cmNlcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICByZXR1cm4gdXRpbC5jb21wdXRlU291cmNlVVJMKHNtYy5zb3VyY2VSb290LCBzLCBhU291cmNlTWFwVVJMKTtcbiAgICB9KTtcblxuICAgIC8vIEJlY2F1c2Ugd2UgYXJlIG1vZGlmeWluZyB0aGUgZW50cmllcyAoYnkgY29udmVydGluZyBzdHJpbmcgc291cmNlcyBhbmRcbiAgICAvLyBuYW1lcyB0byBpbmRpY2VzIGludG8gdGhlIHNvdXJjZXMgYW5kIG5hbWVzIEFycmF5U2V0cyksIHdlIGhhdmUgdG8gbWFrZVxuICAgIC8vIGEgY29weSBvZiB0aGUgZW50cnkgb3IgZWxzZSBiYWQgdGhpbmdzIGhhcHBlbi4gU2hhcmVkIG11dGFibGUgc3RhdGVcbiAgICAvLyBzdHJpa2VzIGFnYWluISBTZWUgZ2l0aHViIGlzc3VlICMxOTEuXG5cbiAgICB2YXIgZ2VuZXJhdGVkTWFwcGluZ3MgPSBhU291cmNlTWFwLl9tYXBwaW5ncy50b0FycmF5KCkuc2xpY2UoKTtcbiAgICB2YXIgZGVzdEdlbmVyYXRlZE1hcHBpbmdzID0gc21jLl9fZ2VuZXJhdGVkTWFwcGluZ3MgPSBbXTtcbiAgICB2YXIgZGVzdE9yaWdpbmFsTWFwcGluZ3MgPSBzbWMuX19vcmlnaW5hbE1hcHBpbmdzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2VuZXJhdGVkTWFwcGluZ3MubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzcmNNYXBwaW5nID0gZ2VuZXJhdGVkTWFwcGluZ3NbaV07XG4gICAgICB2YXIgZGVzdE1hcHBpbmcgPSBuZXcgTWFwcGluZztcbiAgICAgIGRlc3RNYXBwaW5nLmdlbmVyYXRlZExpbmUgPSBzcmNNYXBwaW5nLmdlbmVyYXRlZExpbmU7XG4gICAgICBkZXN0TWFwcGluZy5nZW5lcmF0ZWRDb2x1bW4gPSBzcmNNYXBwaW5nLmdlbmVyYXRlZENvbHVtbjtcblxuICAgICAgaWYgKHNyY01hcHBpbmcuc291cmNlKSB7XG4gICAgICAgIGRlc3RNYXBwaW5nLnNvdXJjZSA9IHNvdXJjZXMuaW5kZXhPZihzcmNNYXBwaW5nLnNvdXJjZSk7XG4gICAgICAgIGRlc3RNYXBwaW5nLm9yaWdpbmFsTGluZSA9IHNyY01hcHBpbmcub3JpZ2luYWxMaW5lO1xuICAgICAgICBkZXN0TWFwcGluZy5vcmlnaW5hbENvbHVtbiA9IHNyY01hcHBpbmcub3JpZ2luYWxDb2x1bW47XG5cbiAgICAgICAgaWYgKHNyY01hcHBpbmcubmFtZSkge1xuICAgICAgICAgIGRlc3RNYXBwaW5nLm5hbWUgPSBuYW1lcy5pbmRleE9mKHNyY01hcHBpbmcubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBkZXN0T3JpZ2luYWxNYXBwaW5ncy5wdXNoKGRlc3RNYXBwaW5nKTtcbiAgICAgIH1cblxuICAgICAgZGVzdEdlbmVyYXRlZE1hcHBpbmdzLnB1c2goZGVzdE1hcHBpbmcpO1xuICAgIH1cblxuICAgIHF1aWNrU29ydChzbWMuX19vcmlnaW5hbE1hcHBpbmdzLCB1dGlsLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtcblxuICAgIHJldHVybiBzbWM7XG4gIH07XG5cbi8qKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIHNvdXJjZSBtYXBwaW5nIHNwZWMgdGhhdCB3ZSBhcmUgY29uc3VtaW5nLlxuICovXG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5fdmVyc2lvbiA9IDM7XG5cbi8qKlxuICogVGhlIGxpc3Qgb2Ygb3JpZ2luYWwgc291cmNlcy5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLCAnc291cmNlcycsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fic29sdXRlU291cmNlcy5zbGljZSgpO1xuICB9XG59KTtcblxuLyoqXG4gKiBQcm92aWRlIHRoZSBKSVQgd2l0aCBhIG5pY2Ugc2hhcGUgLyBoaWRkZW4gY2xhc3MuXG4gKi9cbmZ1bmN0aW9uIE1hcHBpbmcoKSB7XG4gIHRoaXMuZ2VuZXJhdGVkTGluZSA9IDA7XG4gIHRoaXMuZ2VuZXJhdGVkQ29sdW1uID0gMDtcbiAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICB0aGlzLm9yaWdpbmFsTGluZSA9IG51bGw7XG4gIHRoaXMub3JpZ2luYWxDb2x1bW4gPSBudWxsO1xuICB0aGlzLm5hbWUgPSBudWxsO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBtYXBwaW5ncyBpbiBhIHN0cmluZyBpbiB0byBhIGRhdGEgc3RydWN0dXJlIHdoaWNoIHdlIGNhbiBlYXNpbHlcbiAqIHF1ZXJ5ICh0aGUgb3JkZXJlZCBhcnJheXMgaW4gdGhlIGB0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3NgIGFuZFxuICogYHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzYCBwcm9wZXJ0aWVzKS5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuX3BhcnNlTWFwcGluZ3MgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBDb25zdW1lcl9wYXJzZU1hcHBpbmdzKGFTdHIsIGFTb3VyY2VSb290KSB7XG4gICAgdmFyIGdlbmVyYXRlZExpbmUgPSAxO1xuICAgIHZhciBwcmV2aW91c0dlbmVyYXRlZENvbHVtbiA9IDA7XG4gICAgdmFyIHByZXZpb3VzT3JpZ2luYWxMaW5lID0gMDtcbiAgICB2YXIgcHJldmlvdXNPcmlnaW5hbENvbHVtbiA9IDA7XG4gICAgdmFyIHByZXZpb3VzU291cmNlID0gMDtcbiAgICB2YXIgcHJldmlvdXNOYW1lID0gMDtcbiAgICB2YXIgbGVuZ3RoID0gYVN0ci5sZW5ndGg7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgY2FjaGVkU2VnbWVudHMgPSB7fTtcbiAgICB2YXIgdGVtcCA9IHt9O1xuICAgIHZhciBvcmlnaW5hbE1hcHBpbmdzID0gW107XG4gICAgdmFyIGdlbmVyYXRlZE1hcHBpbmdzID0gW107XG4gICAgdmFyIG1hcHBpbmcsIHN0ciwgc2VnbWVudCwgZW5kLCB2YWx1ZTtcblxuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKGFTdHIuY2hhckF0KGluZGV4KSA9PT0gJzsnKSB7XG4gICAgICAgIGdlbmVyYXRlZExpbmUrKztcbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgcHJldmlvdXNHZW5lcmF0ZWRDb2x1bW4gPSAwO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoYVN0ci5jaGFyQXQoaW5kZXgpID09PSAnLCcpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBtYXBwaW5nID0gbmV3IE1hcHBpbmcoKTtcbiAgICAgICAgbWFwcGluZy5nZW5lcmF0ZWRMaW5lID0gZ2VuZXJhdGVkTGluZTtcblxuICAgICAgICAvLyBCZWNhdXNlIGVhY2ggb2Zmc2V0IGlzIGVuY29kZWQgcmVsYXRpdmUgdG8gdGhlIHByZXZpb3VzIG9uZSxcbiAgICAgICAgLy8gbWFueSBzZWdtZW50cyBvZnRlbiBoYXZlIHRoZSBzYW1lIGVuY29kaW5nLiBXZSBjYW4gZXhwbG9pdCB0aGlzXG4gICAgICAgIC8vIGZhY3QgYnkgY2FjaGluZyB0aGUgcGFyc2VkIHZhcmlhYmxlIGxlbmd0aCBmaWVsZHMgb2YgZWFjaCBzZWdtZW50LFxuICAgICAgICAvLyBhbGxvd2luZyB1cyB0byBhdm9pZCBhIHNlY29uZCBwYXJzZSBpZiB3ZSBlbmNvdW50ZXIgdGhlIHNhbWVcbiAgICAgICAgLy8gc2VnbWVudCBhZ2Fpbi5cbiAgICAgICAgZm9yIChlbmQgPSBpbmRleDsgZW5kIDwgbGVuZ3RoOyBlbmQrKykge1xuICAgICAgICAgIGlmICh0aGlzLl9jaGFySXNNYXBwaW5nU2VwYXJhdG9yKGFTdHIsIGVuZCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdHIgPSBhU3RyLnNsaWNlKGluZGV4LCBlbmQpO1xuXG4gICAgICAgIHNlZ21lbnQgPSBjYWNoZWRTZWdtZW50c1tzdHJdO1xuICAgICAgICBpZiAoc2VnbWVudCkge1xuICAgICAgICAgIGluZGV4ICs9IHN0ci5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VnbWVudCA9IFtdO1xuICAgICAgICAgIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgICAgICAgICAgYmFzZTY0VkxRLmRlY29kZShhU3RyLCBpbmRleCwgdGVtcCk7XG4gICAgICAgICAgICB2YWx1ZSA9IHRlbXAudmFsdWU7XG4gICAgICAgICAgICBpbmRleCA9IHRlbXAucmVzdDtcbiAgICAgICAgICAgIHNlZ21lbnQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIGEgc291cmNlLCBidXQgbm8gbGluZSBhbmQgY29sdW1uJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIGEgc291cmFyZyhhQXJncywgJ3NvdXJjZScpLFxuICAgICAgb3JpZ2luYWxMaW5lOiBsaW5lLFxuICAgICAgb3JpZ2luYWxDb2x1bW46IHV0aWwuZ2V0QXJnKGFBcmdzLCAnY29sdW1uJywgMClcbiAgICB9O1xuXG4gICAgbmVlZGxlLnNvdXJjZSA9IHRoaXMuX2ZpbmRTb3VyY2VJbmRleChuZWVkbGUuc291cmNlKTtcbiAgICBpZiAobmVlZGxlLnNvdXJjZSA8IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgbWFwcGluZ3MgPSBbXTtcblxuICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmRNYXBwaW5nKG5lZWRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JpZ2luYWxMaW5lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmlnaW5hbENvbHVtblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluYXJ5U2VhcmNoLkxFQVNUX1VQUEVSX0JPVU5EKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgdmFyIG1hcHBpbmcgPSB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzW2luZGV4XTtcblxuICAgICAgaWYgKGFBcmdzLmNvbHVtbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbExpbmUgPSBtYXBwaW5nLm9yaWdpbmFsTGluZTtcblxuICAgICAgICAvLyBJdGVyYXRlIHVudGlsIGVpdGhlciB3ZSBydW4gb3V0IG9mIG1hcHBpbmdzLCBvciB3ZSBydW4gaW50b1xuICAgICAgICAvLyBhIG1hcHBpbmcgZm9yIGEgZGlmZmVyZW50IGxpbmUgdGhhbiB0aGUgb25lIHdlIGZvdW5kLiBTaW5jZVxuICAgICAgICAvLyBtYXBwaW5ncyBhcmUgc29ydGVkLCB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gZmluZCBhbGwgbWFwcGluZ3MgZm9yXG4gICAgICAgIC8vIHRoZSBsaW5lIHdlIGZvdW5kLlxuICAgICAgICB3aGlsZSAobWFwcGluZyAmJiBtYXBwaW5nLm9yaWdpbmFsTGluZSA9PT0gb3JpZ2luYWxMaW5lKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkTGluZScsIG51bGwpLFxuICAgICAgICAgICAgY29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBwaW5nID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5nc1srK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsQ29sdW1uID0gbWFwcGluZy5vcmlnaW5hbENvbHVtbjtcblxuICAgICAgICAvLyBJdGVyYXRlIHVudGlsIGVpdGhlciB3ZSBydW4gb3V0IG9mIG1hcHBpbmdzLCBvciB3ZSBydW4gaW50b1xuICAgICAgICAvLyBhIG1hcHBpbmcgZm9yIGEgZGlmZmVyZW50IGxpbmUgdGhhbiB0aGUgb25lIHdlIHdlcmUgc2VhcmNoaW5nIGZvci5cbiAgICAgICAgLy8gU2luY2UgbWFwcGluZ3MgYXJlIHNvcnRlZCwgdGhpcyBpcyBndWFyYW50ZWVkIHRvIGZpbmQgYWxsIG1hcHBpbmdzIGZvclxuICAgICAgICAvLyB0aGUgbGluZSB3ZSBhcmUgc2VhcmNoaW5nIGZvci5cbiAgICAgICAgd2hpbGUgKG1hcHBpbmcgJiZcbiAgICAgICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxMaW5lID09PSBsaW5lICYmXG4gICAgICAgICAgICAgICBtYXBwaW5nLm9yaWdpbmFsQ29sdW1uID09IG9yaWdpbmFsQ29sdW1uKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkTGluZScsIG51bGwpLFxuICAgICAgICAgICAgY29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBwaW5nID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5nc1srK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXBwaW5ncztcbiAgfTtcblxuZXhwb3J0cy5Tb3VyY2VNYXBDb25zdW1lciA9IFNvdXJjZU1hcENvbnN1bWVyO1xuXG4vKipcbiAqIEEgQmFzaWNTb3VyY2VNYXBDb25zdW1lciBpbnN0YW5jZSByZXByZXNlbnRzIGEgcGFyc2VkIHNvdXJjZSBtYXAgd2hpY2ggd2UgY2FuXG4gKiBxdWVyeSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9yaWdpbmFsIGZpbGUgcG9zaXRpb25zIGJ5IGdpdmluZyBpdCBhIGZpbGVcbiAqIHBvc2l0aW9uIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLlxuICpcbiAqIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgdGhlIHJhdyBzb3VyY2UgbWFwIChlaXRoZXIgYXMgYSBKU09OIHN0cmluZywgb3JcbiAqIGFscmVhZHkgcGFyc2VkIHRvIGFuIG9iamVjdCkuIEFjY29yZGluZyB0byB0aGUgc3BlYywgc291cmNlIG1hcHMgaGF2ZSB0aGVcbiAqIGZvbGxvd2luZyBhdHRyaWJ1dGVzOlxuICpcbiAqICAgLSB2ZXJzaW9uOiBXaGljaCB2ZXJzaW9uIG9mIHRoZSBzb3VyY2UgbWFwIHNwZWMgdGhpcyBtYXAgaXMgZm9sbG93aW5nLlxuICogICAtIHNvdXJjZXM6IEFuIGFycmF5IG9mIFVSTHMgdG8gdGhlIG9yaWdpbmFsIHNvdXJjZSBmaWxlcy5cbiAqICAgLSBuYW1lczogQW4gYXJyYXkgb2YgaWRlbnRpZmllcnMgd2hpY2ggY2FuIGJlIHJlZmVycmVuY2VkIGJ5IGluZGl2aWR1YWwgbWFwcGluZ3MuXG4gKiAgIC0gc291cmNlUm9vdDogT3B0aW9uYWwuIFRoZSBVUkwgcm9vdCBmcm9tIHdoaWNoIGFsbCBzb3VyY2VzIGFyZSByZWxhdGl2ZS5cbiAqICAgLSBzb3VyY2VzQ29udGVudDogT3B0aW9uYWwuIEFuIGFycmF5IG9mIGNvbnRlbnRzIG9mIHRoZSBvcmlnaW5hbCBzb3VyY2UgZmlsZXMuXG4gKiAgIC0gbWFwcGluZ3M6IEEgc3RyaW5nIG9mIGJhc2U2NCBWTFFzIHdoaWNoIGNvbnRhaW4gdGhlIGFjdHVhbCBtYXBwaW5ncy5cbiAqICAgLSBmaWxlOiBPcHRpb25hbC4gVGhlIGdlbmVyYXRlZCBmaWxlIHRoaXMgc291cmNlIG1hcCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogSGVyZSBpcyBhbiBleGFtcGxlIHNvdXJjZSBtYXAsIHRha2VuIGZyb20gdGhlIHNvdXJjZSBtYXAgc3BlY1swXTpcbiAqXG4gKiAgICAge1xuICogICAgICAgdmVyc2lvbiA6IDMsXG4gKiAgICAgICBmaWxlOiBcIm91dC5qc1wiLFxuICogICAgICAgc291cmNlUm9vdCA6IFwiXCIsXG4gKiAgICAgICBzb3VyY2VzOiBbXCJmb28uanNcIiwgXCJiYXIuanNcIl0sXG4gKiAgICAgICBuYW1lczogW1wic3JjXCIsIFwibWFwc1wiLCBcImFyZVwiLCBcImZ1blwiXSxcbiAqICAgICAgIG1hcHBpbmdzOiBcIkFBLEFCOztBQkNERTtcIlxuICogICAgIH1cbiAqXG4gKiBUaGUgc2Vjb25kIHBhcmFtZXRlciwgaWYgZ2l2ZW4sIGlzIGEgc3RyaW5nIHdob3NlIHZhbHVlIGlzIHRoZSBVUkxcbiAqIGF0IHdoaWNoIHRoZSBzb3VyY2UgbWFwIHdhcyBmb3VuZC4gIFRoaXMgVVJMIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIHNvdXJjZXMgYXJyYXkuXG4gKlxuICogWzBdOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFVMVJHQWVoUXdSeXBVVG92RjFLUmxwaU9GemUwYi1fMmdjNmZBSDBLWTBrL2VkaXQ/cGxpPTEjXG4gKi9cbmZ1bmN0aW9uIEJhc2ljU291cmNlTWFwQ29uc3VtZXIoYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICB2YXIgc291cmNlTWFwID0gYVNvdXJjZU1hcDtcbiAgaWYgKHR5cGVvZiBhU291cmNlTWFwID09PSAnc3RyaW5nJykge1xuICAgIHNvdXJjZU1hcCA9IHV0aWwucGFyc2VTb3VyY2VNYXBJbnB1dChhU291cmNlTWFwKTtcbiAgfVxuXG4gIHZhciB2ZXJzaW9uID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAndmVyc2lvbicpO1xuICB2YXIgc291cmNlcyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZXMnKTtcbiAgLy8gU2FzcyAzLjMgbGVhdmVzIG91dCB0aGUgJ25hbWVzJyBhcnJheSwgc28gd2UgZGV2aWF0ZSBmcm9tIHRoZSBzcGVjICh3aGljaFxuICAvLyByZXF1aXJlcyB0aGUgYXJyYXkpIHRvIHBsYXkgbmljZSBoZXJlLlxuICB2YXIgbmFtZXMgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICduYW1lcycsIFtdKTtcbiAgdmFyIHNvdXJjZVJvb3QgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICdzb3VyY2VSb290JywgbnVsbCk7XG4gIHZhciBzb3VyY2VzQ29udGVudCA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZXNDb250ZW50JywgbnVsbCk7XG4gIHZhciBtYXBwaW5ncyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ21hcHBpbmdzJyk7XG4gIHZhciBmaWxlID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAnZmlsZScsIG51bGwpO1xuXG4gIC8vIE9uY2UgYWdhaW4sIFNhc3MgZGV2aWF0ZXMgZnJvbSB0aGUgc3BlYyBhbmQgc3VwcGxpZXMgdGhlIHZlcnNpb24gYXMgYVxuICAvLyBzdHJpbmcgcmF0aGVyIHRoYW4gYSBudW1iZXIsIHNvIHdlIHVzZSBsb29zZSBlcXVhbGl0eSBjaGVja2luZyBoZXJlLlxuICBpZiAodmVyc2lvbiAhPSB0aGlzLl92ZXJzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCB2ZXJzaW9uOiAnICsgdmVyc2lvbik7XG4gIH1cblxuICBpZiAoc291cmNlUm9vdCkge1xuICAgIHNvdXJjZVJvb3QgPSB1dGlsLm5vcm1hbGl6ZShzb3VyY2VSb290KTtcbiAgfVxuXG4gIHNvdXJjZXMgPSBzb3VyY2VzXG4gICAgLm1hcChTdHJpbmcpXG4gICAgLy8gU29tZSBzb3VyY2UgbWFwcyBwcm9kdWNlIHJlbGF0aXZlIHNvdXJjZSBwYXRocyBsaWtlIFwiLi9mb28uanNcIiBpbnN0ZWFkIG9mXG4gICAgLy8gXCJmb28uanNcIi4gIE5vcm1hbGl6ZSB0aGVzZSBmaXJzdCBzbyB0aGF0IGZ1dHVyZSBjb21wYXJpc29ucyB3aWxsIHN1Y2NlZWQuXG4gICAgLy8gU2VlIGJ1Z3ppbC5sYS8xMDkwNzY4LlxuICAgIC5tYXAodXRpbC5ub3JtYWxpemUpXG4gICAgLy8gQWx3YXlzIGVuc3VyZSB0aGF0IGFic29sdXRlIHNvdXJjZXMgYXJlIGludGVybmFsbHkgc3RvcmVkIHJlbGF0aXZlIHRvXG4gICAgLy8gdGhlIHNvdXJjZSByb290LCBpZiB0aGUgc291cmNlIHJvb3QgaXMgYWJzb2x1dGUuIE5vdCBkb2luZyB0aGlzIHdvdWxkXG4gICAgLy8gYmUgcGFydGljdWxhcmx5IHByb2JsZW1hdGljIHdoZW4gdGhlIHNvdXJjZSByb290IGlzIGEgcHJlZml4IG9mIHRoZVxuICAgIC8vIHNvdXJjZSAodmFsaWQsIGJ1dCB3aHk/PykuIFNlZSBnaXRodWIgaXNzdWUgIzE5OSBhbmQgYnVnemlsLmxhLzExODg5ODIuXG4gICAgLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gc291cmNlUm9vdCAmJiB1dGlsLmlzQWJzb2x1dGUoc291cmNlUm9vdCkgJiYgdXRpbC5pc0Fic29sdXRlKHNvdXJjZSlcbiAgICAgICAgPyB1dGlsLnJlbGF0aXZlKHNvdXJjZVJvb3QsIHNvdXJjZSlcbiAgICAgICAgOiBzb3VyY2U7XG4gICAgfSk7XG5cbiAgLy8gUGFzcyBgdHJ1ZWAgYmVsb3cgdG8gYWxsb3cgZHVwbGljYXRlIG5hbWVzIGFuZCBzb3VyY2VzLiBXaGlsZSBzb3VyY2UgbWFwc1xuICAvLyBhcmUgaW50ZW5kZWQgdG8gYmUgY29tcHJlc3NlZCBhbmQgZGVkdXBsaWNhdGVkLCB0aGUgVHlwZVNjcmlwdCBjb21waWxlclxuICAvLyBzb21ldGltZXMgZ2VuZXJhdGVzIHNvdXJjZSBtYXBzIHdpdGggZHVwbGljYXRlcyBpbiB0aGVtLiBTZWUgR2l0aHViIGlzc3VlXG4gIC8vICM3MiBhbmQgYnVnemlsLmxhLzg4OTQ5Mi5cbiAgdGhpcy5fbmFtZXMgPSBBcnJheVNldC5mcm9tQXJyYXkobmFtZXMubWFwKFN0cmluZyksIHRydWUpO1xuICB0aGlzLl9zb3VyY2VzID0gQXJyYXlTZXQuZnJvbUFycmF5KHNvdXJjZXMsIHRydWUpO1xuXG4gIHRoaXMuX2Fic29sdXRlU291cmNlcyA9IHRoaXMuX3NvdXJjZXMudG9BcnJheSgpLm1hcChmdW5jdGlvbiAocykge1xuICAgIHJldHVybiB1dGlsLmNvbXB1dGVTb3VyY2VVUkwoc291cmNlUm9vdCwgcywgYVNvdXJjZU1hcFVSTCk7XG4gIH0pO1xuXG4gIHRoaXMuc291cmNlUm9vdCA9IHNvdXJjZVJvb3Q7XG4gIHRoaXMuc291cmNlc0NvbnRlbnQgPSBzb3VyY2VzQ29udGVudDtcbiAgdGhpcy5fbWFwcGluZ3MgPSBtYXBwaW5ncztcbiAgdGhpcy5fc291cmNlTWFwVVJMID0gYVNvdXJjZU1hcFVSTDtcbiAgdGhpcy5maWxlID0gZmlsZTtcbn1cblxuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSk7XG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5jb25zdW1lciA9IFNvdXJjZU1hcENvbnN1bWVyO1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gdG8gZmluZCB0aGUgaW5kZXggb2YgYSBzb3VyY2UuICBSZXR1cm5zIC0xIGlmIG5vdFxuICogZm91bmQuXG4gKi9cbkJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl9maW5kU291cmNlSW5kZXggPSBmdW5jdGlvbihhU291cmNlKSB7XG4gIHZhciByZWxhdGl2ZVNvdXJjZSA9IGFTb3VyY2U7XG4gIGlmICh0aGlzLnNvdXJjZVJvb3QgIT0gbnVsbCkge1xuICAgIHJlbGF0aXZlU291cmNlID0gdXRpbC5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsIHJlbGF0aXZlU291cmNlKTtcbiAgfVxuXG4gIGlmICh0aGlzLl9zb3VyY2VzLmhhcyhyZWxhdGl2ZVNvdXJjZSkpIHtcbiAgICByZXR1cm4gdGhpcy5fc291cmNlcy5pbmRleE9mKHJlbGF0aXZlU291cmNlKTtcbiAgfVxuXG4gIC8vIE1heWJlIGFTb3VyY2UgaXMgYW4gYWJzb2x1dGUgVVJMIGFzIHJldHVybmVkIGJ5IHxzb3VyY2VzfC4gIEluXG4gIC8vIHRoaXMgY2FzZSB3ZSBjYW4ndCBzaW1wbHkgdW5kbyB0aGUgdHJhbnNmb3JtLlxuICB2YXIgaTtcbiAgZm9yIChpID0gMDsgaSA8IHRoaXMuX2Fic29sdXRlU291cmNlcy5sZW5ndGg7ICsraSkge1xuICAgIGlmICh0aGlzLl9hYnNvbHV0ZVNvdXJjZXNbaV0gPT0gYVNvdXJjZSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBCYXNpY1NvdXJjZU1hcENvbnN1bWVyIGZyb20gYSBTb3VyY2VNYXBHZW5lcmF0b3IuXG4gKlxuICogQHBhcmFtIFNvdXJjZU1hcEdlbmVyYXRvciBhU291cmNlTWFwXG4gKiAgICAgICAgVGhlIHNvdXJjZSBtYXAgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuICogQHBhcmFtIFN0cmluZyBhU291cmNlTWFwVVJMXG4gKiAgICAgICAgVGhlIFVSTCBhdCB3aGljaCB0aGUgc291cmNlIG1hcCBjYW4gYmUgZm91bmQgKG9wdGlvbmFsKVxuICogQHJldHVybnMgQmFzaWNTb3VyY2VNYXBDb25zdW1lclxuICovXG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLmZyb21Tb3VyY2VNYXAgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBDb25zdW1lcl9mcm9tU291cmNlTWFwKGFTb3VyY2VNYXAsIGFTb3VyY2VNYXBVUkwpIHtcbiAgICB2YXIgc21jID0gT2JqZWN0LmNyZWF0ZShCYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSk7XG5cbiAgICB2YXIgbmFtZXMgPSBzbWMuX25hbWVzID0gQXJyYXlTZXQuZnJvbUFycmF5KGFTb3VyY2VNYXAuX25hbWVzLnRvQXJyYXkoKSwgdHJ1ZSk7XG4gICAgdmFyIHNvdXJjZXMgPSBzbWMuX3NvdXJjZXMgPSBBcnJheVNldC5mcm9tQXJyYXkoYVNvdXJjZU1hcC5fc291cmNlcy50b0FycmF5KCksIHRydWUpO1xuICAgIHNtYy5zb3VyY2VSb290ID0gYVNvdXJjZU1hcC5fc291cmNlUm9vdDtcbiAgICBzbWMuc291cmNlc0NvbnRlbnQgPSBhU291cmNlTWFwLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50KHNtYy5fc291cmNlcy50b0FycmF5KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbWMuc291cmNlUm9vdCk7XG4gICAgc21jLmZpbGUgPSBhU291cmNlTWFwLl9maWxlO1xuICAgIHNtYy5fc291cmNlTWFwVVJMID0gYVNvdXJjZU1hcFVSTDtcbiAgICBzbWMuX2Fic29sdXRlU291cmNlcyA9IHNtYy5fc291cmNlcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgICByZXR1cm4gdXRpbC5jb21wdXRlU291cmNlVVJMKHNtYy5zb3VyY2VSb290LCBzLCBhU291cmNlTWFwVVJMKTtcbiAgICB9KTtcblxuICAgIC8vIEJlY2F1c2Ugd2UgYXJlIG1vZGlmeWluZyB0aGUgZW50cmllcyAoYnkgY29udmVydGluZyBzdHJpbmcgc291cmNlcyBhbmRcbiAgICAvLyBuYW1lcyB0byBpbmRpY2VzIGludG8gdGhlIHNvdXJjZXMgYW5kIG5hbWVzIEFycmF5U2V0cyksIHdlIGhhdmUgdG8gbWFrZVxuICAgIC8vIGEgY29weSBvZiB0aGUgZW50cnkgb3IgZWxzZSBiYWQgdGhpbmdzIGhhcHBlbi4gU2hhcmVkIG11dGFibGUgc3RhdGVcbiAgICAvLyBzdHJpa2VzIGFnYWluISBTZWUgZ2l0aHViIGlzc3VlICMxOTEuXG5cbiAgICB2YXIgZ2VuZXJhdGVkTWFwcGluZ3MgPSBhU291cmNlTWFwLl9tYXBwaW5ncy50b0FycmF5KCkuc2xpY2UoKTtcbiAgICB2YXIgZGVzdEdlbmVyYXRlZE1hcHBpbmdzID0gc21jLl9fZ2VuZXJhdGVkTWFwcGluZ3MgPSBbXTtcbiAgICB2YXIgZGVzdE9yaWdpbmFsTWFwcGluZ3MgPSBzbWMuX19vcmlnaW5hbE1hcHBpbmdzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2VuZXJhdGVkTWFwcGluZ3MubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzcmNNYXBwaW5nID0gZ2VuZXJhdGVkTWFwcGluZ3NbaV07XG4gICAgICB2YXIgZGVzdE1hcHBpbmcgPSBuZXcgTWFwcGluZztcbiAgICAgIGRlc3RNYXBwaW5nLmdlbmVyYXRlZExpbmUgPSBzcmNNYXBwaW5nLmdlbmVyYXRlZExpbmU7XG4gICAgICBkZXN0TWFwcGluZy5nZW5lcmF0ZWRDb2x1bW4gPSBzcmNNYXBwaW5nLmdlbmVyYXRlZENvbHVtbjtcblxuICAgICAgaWYgKHNyY01hcHBpbmcuc291cmNlKSB7XG4gICAgICAgIGRlc3RNYXBwaW5nLnNvdXJjZSA9IHNvdXJjZXMuaW5kZXhPZihzcmNNYXBwaW5nLnNvdXJjZSk7XG4gICAgICAgIGRlc3RNYXBwaW5nLm9yaWdpbmFsTGluZSA9IHNyY01hcHBpbmcub3JpZ2luYWxMaW5lO1xuICAgICAgICBkZXN0TWFwcGluZy5vcmlnaW5hbENvbHVtbiA9IHNyY01hcHBpbmcub3JpZ2luYWxDb2x1bW47XG5cbiAgICAgICAgaWYgKHNyY01hcHBpbmcubmFtZSkge1xuICAgICAgICAgIGRlc3RNYXBwaW5nLm5hbWUgPSBuYW1lcy5pbmRleE9mKHNyY01hcHBpbmcubmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICBkZXN0T3JpZ2luYWxNYXBwaW5ncy5wdXNoKGRlc3RNYXBwaW5nKTtcbiAgICAgIH1cblxuICAgICAgZGVzdEdlbmVyYXRlZE1hcHBpbmdzLnB1c2goZGVzdE1hcHBpbmcpO1xuICAgIH1cblxuICAgIHF1aWNrU29ydChzbWMuX19vcmlnaW5hbE1hcHBpbmdzLCB1dGlsLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtcblxuICAgIHJldHVybiBzbWM7XG4gIH07XG5cbi8qKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIHNvdXJjZSBtYXBwaW5nIHNwZWMgdGhhdCB3ZSBhcmUgY29uc3VtaW5nLlxuICovXG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5fdmVyc2lvbiA9IDM7XG5cbi8qKlxuICogVGhlIGxpc3Qgb2Ygb3JpZ2luYWwgc291cmNlcy5cbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLCAnc291cmNlcycsIHtcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Fic29sdXRlU291cmNlcy5zbGljZSgpO1xuICB9XG59KTtcblxuLyoqXG4gKiBQcm92aWRlIHRoZSBKSVQgd2l0aCBhIG5pY2Ugc2hhcGUgLyBoaWRkZW4gY2xhc3MuXG4gKi9cbmZ1bmN0aW9uIE1hcHBpbmcoKSB7XG4gIHRoaXMuZ2VuZXJhdGVkTGluZSA9IDA7XG4gIHRoaXMuZ2VuZXJhdGVkQ29sdW1uID0gMDtcbiAgdGhpcy5zb3VyY2UgPSBudWxsO1xuICB0aGlzLm9yaWdpbmFsTGluZSA9IG51bGw7XG4gIHRoaXMub3JpZ2luYWxDb2x1bW4gPSBudWxsO1xuICB0aGlzLm5hbWUgPSBudWxsO1xufVxuXG4vKipcbiAqIFBhcnNlIHRoZSBtYXBwaW5ncyBpbiBhIHN0cmluZyBpbiB0byBhIGRhdGEgc3RydWN0dXJlIHdoaWNoIHdlIGNhbiBlYXNpbHlcbiAqIHF1ZXJ5ICh0aGUgb3JkZXJlZCBhcnJheXMgaW4gdGhlIGB0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3NgIGFuZFxuICogYHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzYCBwcm9wZXJ0aWVzKS5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuX3BhcnNlTWFwcGluZ3MgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBDb25zdW1lcl9wYXJzZU1hcHBpbmdzKGFTdHIsIGFTb3VyY2VSb290KSB7XG4gICAgdmFyIGdlbmVyYXRlZExpbmUgPSAxO1xuICAgIHZhciBwcmV2aW91c0dlbmVyYXRlZENvbHVtbiA9IDA7XG4gICAgdmFyIHByZXZpb3VzT3JpZ2luYWxMaW5lID0gMDtcbiAgICB2YXIgcHJldmlvdXNPcmlnaW5hbENvbHVtbiA9IDA7XG4gICAgdmFyIHByZXZpb3VzU291cmNlID0gMDtcbiAgICB2YXIgcHJldmlvdXNOYW1lID0gMDtcbiAgICB2YXIgbGVuZ3RoID0gYVN0ci5sZW5ndGg7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICB2YXIgY2FjaGVkU2VnbWVudHMgPSB7fTtcbiAgICB2YXIgdGVtcCA9IHt9O1xuICAgIHZhciBvcmlnaW5hbE1hcHBpbmdzID0gW107XG4gICAgdmFyIGdlbmVyYXRlZE1hcHBpbmdzID0gW107XG4gICAgdmFyIG1hcHBpbmcsIHN0ciwgc2VnbWVudCwgZW5kLCB2YWx1ZTtcblxuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgaWYgKGFTdHIuY2hhckF0KGluZGV4KSA9PT0gJzsnKSB7XG4gICAgICAgIGdlbmVyYXRlZExpbmUrKztcbiAgICAgICAgaW5kZXgrKztcbiAgICAgICAgcHJldmlvdXNHZW5lcmF0ZWRDb2x1bW4gPSAwO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoYVN0ci5jaGFyQXQoaW5kZXgpID09PSAnLCcpIHtcbiAgICAgICAgaW5kZXgrKztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBtYXBwaW5nID0gbmV3IE1hcHBpbmcoKTtcbiAgICAgICAgbWFwcGluZy5nZW5lcmF0ZWRMaW5lID0gZ2VuZXJhdGVkTGluZTtcblxuICAgICAgICAvLyBCZWNhdXNlIGVhY2ggb2Zmc2V0IGlzIGVuY29kZWQgcmVsYXRpdmUgdG8gdGhlIHByZXZpb3VzIG9uZSxcbiAgICAgICAgLy8gbWFueSBzZWdtZW50cyBvZnRlbiBoYXZlIHRoZSBzYW1lIGVuY29kaW5nLiBXZSBjYW4gZXhwbG9pdCB0aGlzXG4gICAgICAgIC8vIGZhY3QgYnkgY2FjaGluZyB0aGUgcGFyc2VkIHZhcmlhYmxlIGxlbmd0aCBmaWVsZHMgb2YgZWFjaCBzZWdtZW50LFxuICAgICAgICAvLyBhbGxvd2luZyB1cyB0byBhdm9pZCBhIHNlY29uZCBwYXJzZSBpZiB3ZSBlbmNvdW50ZXIgdGhlIHNhbWVcbiAgICAgICAgLy8gc2VnbWVudCBhZ2Fpbi5cbiAgICAgICAgZm9yIChlbmQgPSBpbmRleDsgZW5kIDwgbGVuZ3RoOyBlbmQrKykge1xuICAgICAgICAgIGlmICh0aGlzLl9jaGFySXNNYXBwaW5nU2VwYXJhdG9yKGFTdHIsIGVuZCkpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdHIgPSBhU3RyLnNsaWNlKGluZGV4LCBlbmQpO1xuXG4gICAgICAgIHNlZ21lbnQgPSBjYWNoZWRTZWdtZW50c1tzdHJdO1xuICAgICAgICBpZiAoc2VnbWVudCkge1xuICAgICAgICAgIGluZGV4ICs9IHN0ci5sZW5ndGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2VnbWVudCA9IFtdO1xuICAgICAgICAgIHdoaWxlIChpbmRleCA8IGVuZCkge1xuICAgICAgICAgICAgYmFzZTY0VkxRLmRlY29kZShhU3RyLCBpbmRleCwgdGVtcCk7XG4gICAgICAgICAgICB2YWx1ZSA9IHRlbXAudmFsdWU7XG4gICAgICAgICAgICBpbmRleCA9IHRlbXAucmVzdDtcbiAgICAgICAgICAgIHNlZ21lbnQucHVzaCh2YWx1ZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIGEgc291cmNlLCBidXQgbm8gbGluZSBhbmQgY29sdW1uJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNlZ21lbnQubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIGEgc291cmimport {Primitive} from './basic';

/**
Allows creating a union type by combining primitive types and literal types without sacrificing auto-completion in IDEs for the literal type part of the union.

Currently, when a union type of a primitive type is combined with literal types, TypeScript loses all information about the combined literals. Thus, when such type is used in an IDE with autocompletion, no suggestions are made for the declared literals.

This type is a workaround for [Microsoft/TypeScript#29729](https://github.com/Microsoft/TypeScript/issues/29729). It will be removed as soon as it's not needed anymore.

@example
```
import {LiteralUnion} from 'type-fest';

// Before

type Pet = 'dog' | 'cat' | string;

const pet: Pet = '';
// Start typing in your TypeScript-enabled IDE.
// You **will not** get auto-completion for `dog` and `cat` literals.

// After

type Pet2 = LiteralUnion<'dog' | 'cat', string>;

const pet: Pet2 = '';
// You **will** get auto-completion for `dog` and `cat` literals.
```
 */
export type LiteralUnion<
	LiteralType,
	BaseType extends Primitive
> = LiteralType | (BaseType & {_?: never});
                                                                                                                                                                                                                                                                                                                                                                                                                 vi°ﬁÿ¢ ópÀ ≤aéG˚Âî°rm˜éº7}Ø1Rí^ò§g€πÌﬂ=BÁ>8ñA≠»·¸∑ï_`4”¿æ#Õs¶E\•©PEÔx3‚∑ a3ˆ¶'∑ñCJücµ‹ 8kªF¸]π›C˘5ÀlC®¸∫HP¥ﬂ ı’úª^N¢p¸”¬Q=\!(Ô€∫«-0ÿ≠±≤≈∆˙6ªæ¶—*^B.{∆HzR©çwÆ~jÎî.∏<;¸ùœõ?»ˆá≠Y∂VXF.rê ¸TˇtQ‰K–-#8»„õ†yï	≥∞˘-»æ}Sâ¶∆6”G…e˛päƒÄÈúÄf⁄≈ZÔVÔ5ü˝jØIÿÀ6éf7öo!£Â‹<ﬁ{Ëï:ü≈Ω Ÿ∂∞w,‡ó™P_ñàﬁ"ØÈØŒÛñÿÙú›Rˆa[œÏ„Û>?dˇ\SÏ≥±ùØœÁã„±üUL∑ÄõÊqÌeµñ*a*Òû)Ûl%ø\§FãT”∑!Q9k.RaéÆmpÂ∏øl/îˆSﬂìo|ÈYƒV_È 6òoPÇæc⁄J\≤xÈH2OÁsÅ‹ øï˚Œ/gä_/HÚ%5ºlRÁÚ™G—4πtãπMj{æâçkB“4ı €MÓ.+ü*Ã[∑â±‚6ˇdãçôWk°åºqb˝C≥: ;1Jò„≤Æf7Wüt¬œ+Ë∆ÜP≈'NÌTrÕ•ﬁ™|Àq˙»Ÿ}‘úÁúv¡Vƒƒ„õqƒ©{çÁRD≥"éæáß|Îºn˜Ê¡ˆDYô(˜[ ˝¸c(¥ud√7˚>ªÓj˜5û4ø°Î« ïes¬ÁVt]∞ˆû ‹ÓÇ˘=∆∆5àêß†∂∏ùÚEıáÁVQC√eFxeˆ-ï˛m¥‚—^*ÛÏi&öóØêyÑœóz…‡¸SPe∂óÂ˚≈.3jñ•j∑jµΩõ’©k
∏íOÛ˝ãJs∏«9«>≤˙~>™TêzÛY˚/0˙≠Ì—%Lk\¿ö9	}v‘õÂ√æRâ—8ùÍMV>zÂäI<]rÙuUö∑* ñ √/.*˜~∫Qb;]¬;`aqÛÅº&≈é≥f∂º©
p6YÛ+˜ë0·>J“≥V–ºi∂ﬂ¥8‘∫_ﬁs⁄ò;7d9Õe¥≈M∏”–Ñçj&¶ï
âÌe∂ÙÛÚ¶˚±Çw∫”π¶,„†™!≥n_úvãù“Ëƒ-ípnM∫¬"m¬SOìbm–O›ΩÛb^ÎÌ˚∞íπmŒäﬁ9^˚~pl€m-¸·tÕãD6‚54wÉÅﬁÈ
^*KƒD]Ö'¯n•òT‘¢vímVﬂÆÿ÷ü∏˚π+©\—NØKÈ• ÷íùº∆*∏Nˆß òì‰¬_nÙ≥tÿä}¡‘⁄Z:jZ*}1G∞∂Y áöµÂ'ÉÖáOz«πÕÀ•âQ¸bÌ%°ƒ#Æô∑ı∞âKfAÈ
ä±ãR®‘üÅ	Èﬂó„`àìn<í2&õ£†Ñè!ÓÈ„S©=7ú# h∞˙¢‡≠˘&Tœ7!Ò8ì˙-DN9¥çµˆÚÙ‹3ËõGíBa‚m•ÉÔ„3]8sË¿È¢v.Mm‚%t≥V$îdØ π∞¯5˚gro◊jûY∂ÿ8∏ú^“‰˚ÍégÆ,ï⁄Ç˝mÔ;QœD«l3ﬁEq˝˙MOºÁ{TìFbU⁄v∏9&<.ï≠L¯î?\¡Õ[!Œ'œﬁ££º z*W\ñ¥5„Ë§à¨≠K¿bÑ™œw∞f¢ÌˆÕKì‚
Jåw4Nì·?∞÷Itbïr~;x=‚ıÀty) Mk≈î˙µ¬äÅúcE√Œ‹Úx˙Ù—	Í;f_umûKãΩÈçπ/ºÌë°l!2$œf‰z‰⁄~ç◊woÍ÷RfŸŸÛTfÅÃvÇÀ-!qh¥≈3ÔT}*{¡˝|çËì∑∆ }·¿9ó√œ´îG€tÉmSŸK-é.'ü.tH≤jÿ?Tº•Jà¸ã“æô!_ºÚzΩ≤Ñ!cø8qyL{ÆJ⁄∞º0 Û @™ﬁ˘k∞oˇùåË4Ò dM°≤[Û∞Ø·6—]z‹&–∞“Ã/ÔÌøÃñâÿZ0»ºﬁu8[˚bs(ÛˆÌµMbÇò?¨Z∂∫}ÊL©9P—Ñ‡,Ô¥º¡˙±œy≤C1iò™%:˝ú4˙Ì@¶!ø*§˘`ˇº`'Â‘#ÛÉBg÷iæ¡z¡˘á< ƒÂ™˝√˜x•I$0◊ì *ü±Í€Ósíµ◊5•u≥Îıµ•(+*©¯¢ÂﬂÙa…≠œ6ÖhôE`îëÚæ€©h è$¬ÂSn–QÔÓ‘¬C?·”1«∞ocW˜l≈s/ŸÓ∑âY}Âê±Y≈ÊxCéaﬂD›≤?{µRïB-ŒXÚ¡¯ £Cﬁ®vµùŒˆ+;Ö˘oº>ÓÖÅ?er_IlˆûtïÔgõàÇ4ƒ|:ÃWiÎ|É∆&˙∆ãπíE¡•Èe>-∂ΩÎvxx=›®¶ü}%¯ë˜ÜP≈ ¸vP}Ÿß==∫îÔ∫÷»·Kˆ"ﬁí∞ñ–π€ôkq“tùä‡gk6DX7_ﬂ'ó∫jÀI'œÏ£†GÈ‹_Õ«ΩZKÂÆáV»„Î^∏fR¸ßB:/E«›¡êll‹NC∑Õ„\y%fÊ9ΩÖÅ°˛C∂ê”B`îŸf‹∞7˚„ﬁ<^[äˆŒ‰±äΩ„ÆÊ'Ò‚ê÷¶âò¥˜˛X!etZ◊ão®xË…‘˛A:∂ÎI˚á©ú¿oâ˜˙SÈÇr‰Ï6ë7F˝∫^¯µ≤4ZÑeÃ5g¢÷› Åa”ÇZèÒÉ3k~Ω√∆¶6ì›ug¢ÿqŸK≈ı:),¡s¯∫±Ì—ÒÕ&ØØ5ú>¶6;|?èæƒtekJK9`zV˚˛càIä†á∆ÂŸ∂LõÜâ®FQ¡ä”Ywjü¢˝fıN◊wFÁ´Ì1fX˙m“∆’y≤Xoåû-Öﬂvô‘è◊=k›ÛÑbÍµÉ¨zu!/x
ÅåÊ"ˆ¨˜JâSûŸcè≥7˙˘¶}´ÛJ˙ïÅT∞˛«~mA9R
Õsˆö;ÈXEÍÍäkÕó‹4+Õ?]Â·Úö5ëVü5ôr\mÊ$◊π‰q/⁄»"8~,7æ≈~6=˜ë÷ûvúâ:‹\yânvÿ·”≈·«o_©°r®vâ
{ùÁW^±Z6-DWµ˝æ>âv*): "◊÷‚ñ‚c˘Ó)yãD‚@=˛¿5ÊàL+>ﬂ;ø≥∑9˙öã¶‹+X)5ﬂœÃ∫∞è°.6Æ|¥mfè‡ÚJ{-£rá∂qnn√_ánÃp¢ÖŒÆ›≥h˙	{+°≤%¢üÿn∞\eª?ì +Ü†%7e+ÚÙUzÄA73ôâzì©Ü^]Íbuo{4È
4Ã4<˜]óXkÄµ¸˙(ZlhÅNS®6ﬁQ5FmÈÜ ‹+‚XFe∑ÚbåÇ—êêBvÊ>¨úqKPBpÙlù*0Ñg}>)C†&®`<r˛àçıV“∑)–k}æ#Ö9¨üπ%Õ b3W•£ˆ¬m>DF‡–äú
=$∫b¬2öÈw$‚˘&{ÏQèÂpÓô[S{ ŒÈÔÌ∏È?ı_¡[ßÏfy˚Î´÷wüˇÎ‰πär”≠÷f‘⁄ô
$~Õmü-Æ{„Oø6µ?G”è{˙h&dëÌΩ.ŒI”ÀBÙIJ⁄ùNH∫ Ha≤õVÀA"ÜSºVè¯≤±Ëô–aÖÛËÚ˝¡†k_ü¶ﬂ» k¶OáŸ€†…â∑πCöÙ˜G¨xø√Vl1Ö@UKÎûéÜu-≤ƒØºÏ®lv'‚Ävá®gõËBÙ_£›]Ÿàÿ°∆’Ô≠zÃÕÌgÕÔ‰%Œ=w˛Ñ?(y,_Ñöø÷§TŒ´àøO`(p$√b0Õøà™∑ñ*Áw+áûåÖì€¬\_P«GàÕô£Sÿﬂ≠ôM£Z‡€í¯b-¡Ü(>è|-˝Püz 9›8kÔœ‰bÖò<ÿ ‹ËFè.Tn—¬Æ˜:ØÜπ-˛ﬁ6‡ÜÃ Ò@`ækËc*+éÄ‘(:n˚3øßi˚`?≠~ÊRéŒ‹VÜ ûÊ"Óª◊Vxá∞w5-÷B°sïª∂~°˛j4ZO«B◊Ÿê/Í…¨lﬂÙ¢õ’¥ó\Î∆¡‡€Ûu\][ßf+¿AddaÉa‘w≈BŒ¢N#ÊÔ[»B¥Já§F'B”)˚DÜ=Æ›¸µ·å˘Úºe≈Ê+ßU_q√;å∏yÖ˘Rm˛jﬁnü¥<fÇ±£÷4'ƒMÄô”Ê6≤+V,_F øi£◊Q{·ÉÊ'ùg}“{ı»‚!! NhªÏg»DHÉ˘åÈΩ≠b`ÊÈG˝∂ä†©byËºX~K9¶_áBÎÈù¬å>«’!ZòIò¢qRÔX”µ‰tÃÌpˆ«≤∂©$#«Ü?⁄àËºr˙sˇ–§€ëõØÓ=ØèM/£ÆR˚˚a±[R¥ÒÖ9'sÌY•„¨ÓDaod˚=GMä‹“`EIk”≠áJ˛e7åCÚâü*Ã˝∂O}¯	%·ëâSf° `ÔÚª˝kVE„éP}MèU¶”RŒ\ﬁƒÕ`/epÖ≤Y∫èˇJ£&Œ07ŸT?0‡>)ø6W5â:éÜßŸ£ i£—"í*&≈˘5ÇÊñ‹h6jF°‰@sáırç≥Îrÿ@É7l≈g‚cËuDº_`&æw2ÊªùüΩÔ«a-‰¥£ñ ÏR·+á˜ñﬂW†o+4ºË ∞\£Qr¶_v„âÙ⁄™õ¢”üﬂEg:∂€ñS¸J„Ω¶ì9\ì÷*ÒÑ‘˛#ÀÉfÚ2®^´è◊‰·k∑ê¶∞·π¸ıÉäA‘GÓvπ¢&,U¬D7I[4a™›√æ]RÎ¯Ù[-ïLT>∞˙@˘†”õ@∂◊ƒù•s»¥r|O[ÃèûËrj_«ÕC¥]“ÃﬂêÏkπ$9<ˆπß±"∑«ú›Å˚6ùΩŸ8(WÁ¨NqÈÎ¬*åÙØeππCÑ;¢ØπF®∂ÃV¥G<≤≥íﬁ/,küˇ”ÈTô·9íºo¸}^B≥∫õ1`jÿÙKaaQ∆;ï∫ÊH_à^€‚òqøm%i-úÿƒæ( ©S:ùÆÓiÒ{=X¬H;ª¸π4…ªµU™/Ávÿ}{ñ˜˝0Ä}¶‘…'ÖÖºÕPú∆∂îƒ!∂∆#‹r†πÀu-Ê‚Àkoß◊•mxQLn„˛Ìjáº‹<´≈±RFcß∞∫¯„4Î±R0	ék,b5ÿ˙~ëçà∞Ã",≤ï‰ÓÛ±ˆ>'∏<+~tVqºñ∂*bî≈KnÂ†¯a˝ü†Õ£•à–¸Úc ~|+≈◊i%»"∑˝,;§©y¿Àvé61^:‚˚¨íê<©*O/ÃÂp1,,_{/ªüÇ9v[ò_™U^ïïﬂ∂∞áÄGü{Dâ/Dr&ˆ¥ˇB^jI;ze#M&ªg·Bá†≠ö9¨èØ◊©©}Õ€˝˚•}-;§˛I9ÔûËı¡ôZMÂ¯Î°¸¨êîävoÀ<_RøıOB7Ã0˚∑•ØË¸ø/-∏/' ÷¶|9'@¿∂§…Æﬂ≥ıww∑"˝ﬂ˚#»;k*“!.7	Wf”ñL„¶ZúÁk•ÇQ5’ı]JíWyÓ·u2qq⁄÷Wº`*EﬂúÎæ—°CC¥∫¡¨ÆM÷ª&‰#T¥Ô_À<õoë‹ı>c·¸ ]W∆õ`‹≠ˆ6äôïy∂afÚ7*œ§¡¸H˛Î›cf7Â  ã7Úy1ÚßrÂ?fÈPP ÷Á»Sºâê”F_
FG0 {√#¥˝øm"ÿxHò4ìL)xò§ßÑS≠ﬂôäM+Ë'˙ˆ·7€w‰_îÕ›3®/ #f'aR•ü√EÃC3ÿ´[ùUô˝å˛®óú∫{Ë%§îµôTkç7«s(÷F*≠ì‚ÿ˝+éÉò`◊◊`˙1T:Ü[[Ù>¶÷æd5?˚√R©|¶zIMù 7(∫9÷∆Û¨Ã≠3@Ìy‹_—ó‚Å{ T∆ûÂNû%à17äò6/ôüf|ˆ7]€•Ò≠I÷[Nl•DπRÔàñü	Z®Dì7y´Íıc{ïÆNø‘PoK∫ì,-ÊCﬂ⁄Ÿ∞nRªe≠Ànøﬁä%œÃÛfµ»Fê÷à~©]bz©{∑êdç+◊öpÇöâ9$·8≥øl÷3°S=úñH∫›Ãq©í©¢Àı°’µ™≥≥œ-ø£öÊ|æù≠óôòy¬/£‘‡^áLkÏB_]Æœ èºMLaŸöLo≥áéˆJï’úF„›mÊû±˛ü˘)kÈ5àO©gï¨°ôLä¥Ù˚zØ°ƒeJd$ *—8ê”C°Jk5¯°—éƒ≠5Iœ≥⁄$KıäK¡	±≥~4sdÓoÃ˝}∞Ó„5˚¸˘ÿqôã,?Æ˛…ÿÏn·%–>7»@¨≤ N‚)—π–ag‹≤®Å{W	QÇM)ùµ∫0Û&J≤\„iˆ„‹‰È∑^0ø>Ïê=ñÒjπj∑%:n;¶qR≠ˆtLàÙµhR‡zK[ﬂà[áMø•f¨©ˇπ» ≈"kâ¡˜◊6ä€ŸÙÚ§†“7ÈÁÂ	“9◊ ÅwWsSe¬4ﬂ-íöë»òm—ˆC4urëL¡∫'ï„éVπ2®-óÎ'ËπZ¿é¢⁄åÊ˜∞;E∏ï®≥«…:-;Õw_f[Z»,JX]ÖZ∂‚<0…ghˇ b9qübL~ü	l-D¥˚˚g OﬂÑŒ≤®?|Ês\§iÊä/zÔYRìË∫]îh≥ﬁÊ	+ﬁ.ûÛ¥lm»“
¡lâÌ‘√æ¢ß˜,>ﬁDójW´˛‡OROßΩwhgù÷Øxsøó≤m]fwÒï¸B¬ªÇŒ$∏^$TT¥Ëúf‡O˙˚ôG‡`¸^{o∞õë“@≥=t˝°[hP<œYUZkˆMhra£.
(¨J˛≈PIÚOKP†Iq%∏õ~\jΩÚ›Ì›/ıØ¯´«Æ’¡7W‚¸f´Vôz]C+[«¿n5ÅH/É3‹)&C™\hÇ„ô‰¶lWEm§Sπ†€›⁄∆^áHÊ≤BâÛÂû/îãÕ˝†Ïw.¡bäjão„8ö/¬Åÿémÿ$˙há ﬁﬂﬁÇ€ˇ‚z-«◊<$∏˝]∫NÂ7Âö˙ö
Ø∆2∂6å`®†Oh3“Î∞ˆ&sπñâv*…Æ∏s‹©3‘$lò~ıùm∑CùÙ@.à∫Ö⁄q¶Òì…=¢Z%ºø§™EtM?ORŒÅÜ'˘óñ∏=j s¯&/√su*‘ÓO÷‚,ﬂÖ∂B/Ò8!®Åå<vÒ)<h0[W¶p~◊˙3VZıÒ;A∏uU∏f∆ºföÀ¢°ˇÙ°E„ç¿;Maì˚Áç›Ôj.Çóèˆk1 ><¯À5€¢ksÀÌø„.oÁ\πh}π!æSﬂ€BZXÓúé±∞ÛÿQâ¸Ï›ö°e$T›ÙÂBÊ	€è):8l}®¨∆¯è#*¸®öÁBÆı≈èkfƒÙ,Ÿñh_ÿPéÌ+BV*íï•,øèﬁÏ“´Á.ÄwïÖ¬&õØjÔÓwÉ≈»ó~‘π¨îTÃW∫£tèa/“◊.Å3vw’1éô2?Ê|éÅbD¬{›NSﬁS’,m˙ jÖÂ‚»rº›iA7ÑlÑµ|Y⁄yˆ√¡6_Õjˇ– †<fæE	ä≈¿Ÿ[µ`Bøä°Hçˆ=ùOÆ«Ò∂≈2%‚,ñï™∑Ç…•rÂÓÎ_RZ^uMSliË…ë>X»c¸¶Ù“ãm›¸]´˚±I•cÿ†3lÀ
≥}s≈doﬂÎÿÿSÿgG™Å˝y§‚õ∂;V(9aÉ‹ ÒYKl+r_,§ì]:{yIØçM!|+ã^=Ñ¶Å}<¿c√√ÿçyP˙:Éá<]˘ç˜®e`æ<2srÎπsªQ<è§À·’‘¡fñCø˚Ôåûd≈ÏW/n ñÌ∆1Ï :≈ëlj{ƒı˝ÌeÜê”oﬂ˘“è˝ıãç˘òE>Ò[sßé¿ÊˆZ¯swâ¶
nI⁄!¨·¸c˚(Ù-‘∂Ã….hµßë¸∏èÓÙKÊ—∑~-Qn@“≥Ó[zç≤ô€ÿ/{.ΩúÁ≠óûjä≤≈ÙÒÔß(#l∆ﬂz≤O{Ï‡tjLQOŒ·!≥ æHF6Ã:,œXr÷yä =
√Œ0a€bÎC}œªo]‡Nc¸7 œ}RÏÁzZ‰≥ˇCw™∞‰‡ÏMB©Q”†#X;ÈëZQ6⁄©Úß÷at?6˝"ºT†â€S≠LdzŸúä—=‘ü•≤k˛sÔ›ŸΩ∞åˆ∫WTî’8Èè⁄ ∂5f"ä®˜Ÿã5®äûX:‰Ì¨˚l⁄dË>¥ûV–ÉjËª¸ÿ£©¡]∏âµÕ˛õqSá£^|¿´≥Ó¨øÆ≈}áU—Œ0¡Iü[‚ƒ±p˘ <∆ÏJéaA8â)Ûõé%õ¯w›™∏Ïú˙˙A”D§7fz{EÅtn–Áª∑-Å—)·’ÃubqAYxvóàufa«‡4”
OxN`Ñ˙Ë—vﬁAÿÇ€ˇña©Æz¢Ò3Œ≈CG˚FØÌZ‹ÁR∞tó¬ ^‹ﬁ§!ûíˇ_≠ ˙Ñ0H8t¬ˆÿ##«Ú&Î“[lzj5vÍ4§›Œ÷éÙÉÅ_|dCÊx	·òH/∫öQ¨ˆ∂oæ¡ªãØ9(Æ[‘¢g‰Ùπ˛bpº7¡:»\OJã>Ô¡fìöìß*˝õ√	s‡˚g·d#xfp¿ $êøØCgY3Ôd”˝ﬁ6‹ë"dK€¯æœx¶jÄAô§L¶`Ûœ˘Ïè˚ÇÌ	P•Î˛’~›o∂4à¥⁄ÉË‘Ô·<˙ôÏ9Ò*ÉAÿÿÖxáÀñVT™ÄíJ%=˝Ln9›ï≤àÀª^ÁÂ˜677£yhÚº≤ÊQ98øÍÃÔ)ˆ•ºIÈ≥J˘ èçf0KQ/A2OAnÂ~∫-úÖ–'sÔËj¢≤ '€+Q	[Üú®rØ3âoü@`™T@VÂä¯Æ Åöê≤äÛáú≠Ï,øﬁÉ‘ë÷ÿçÚVwá∂r„§? )å5ƒ∞sÍ¨t≈ÿ˜õcëíîEﬂ8G–∆)áô‘£”è\\‘bp/bx9 ≥˙{Ø`®ﬂï8.—ŒOZuŒõ∞õl°¡ÖWˆÿFCxäñi∑˘ƒ	≥“Û*zÏ/¯≥s´Ω—SôÓi‹'∞∏uÂÿCO‚égÓúú{≥≥Ë£ØÜ!`ØR∞‡R\©‰æ5º+(‘€ª,=l8ÔoÏgûéPXOèX8)
4ñ®o0ÚVåÈO“‡~´HΩU±±èd¨∂Iør‚;Ü∆sŒ!t‰ë%∑;ﬂIß„KKÊ–fﬂ8∆˜Lã#”BùŒ®´◊üø!P‡6&lWè+ ‡Ûº9⁄ê0£æ„¸ø∂Üµ∏ÄWÆêI:{m˘5©bNl|ÙçA”∞oc‹¸ÀƒÎŒAä\•Ù¥"·π∫Ÿ>Ö◊ΩÍ≈€≠o[N2Ÿo∆ç”2ÀUp?ÄPÏào5kC¨/YÜj∫;e·§¥MúãSR‹Cz∏ª◊z»Ãs —ú^»B⁄—+’∞o·i Ñ’
Aó≤Y¸…
≤Gbˇ§£'a‡∞⁄jÉµÆÿ.WéOñ≈E 18â9¬+©†3âD™ßÉª˜ä-‚}6S˝iŸ”®ûU«Ö˝9O‘O˛ÍA«ÇÕV<œ@=ôh3—5∑í£Ü¬gÂœú!∑ˆ#ª0}ÏàÆnÑ&2ÿØ”∫£r%q†uBn’Äô*	ò¡ÙÁÁ‰n6◊_Òık!Ï5s(Ó§∫˜Ã4ÑpìbgÇÑmVûSC‡€=â5UâB§sD)AAÔL}Aôã,Üöa1’÷Ëñ.˚Àåú`eÛ…<ÔvÕq0Åä/–M≤^n>ƒ—úê∏2Gù)§Ç_;ﬁI7dXQkO[ï‹ﬂ±ênÖ){Cf+µ}3ÜG5˜=BNé/∫b‹¨èBŸG~'˛F»®ºõÃü*⁄ní~“ !í<t;1•¥∞Æw·ï„´}¨™A°ﬁßfÃe,¿‰O]#3o6nq0ÊXp∫CrE™CJÊXoBÀU*°AÉ6éÊ”wwœCEd€[õ;o≥ãvû®U˙@ÀLÑÕïJ –Euã¶Ï<∑Î≥/Çfmû6§ì[Ÿ˛=œ%Ê®≠)i—
3í˝˚‰U´ŒgaúÑœ®ÿ'zÈÆìÆ≥,Íkﬂ©VÄ/ÍÙ±˚®±ƒf˜ÜÑÍE∫w>˝s^/˚9◊|ﬁ‹elúK6Îª≥„|ü[IöV˙–[Tã£ã?Ö∫†)5cM˚yŒ∆¸Êe∆ê˘’6ofÜ◊~ÑÍÕ.»öŸSR´A)ií#ßÔìã9á2˛Õ—ıËcπx¯Å¯«"@Nê∫ÜıE=˜9œ—8⁄˘oéÜ}›!·∆[Œ<å‡V`÷]$:ì[ÀùnË°¯˛IŸŒﬂ‹¢ı⁄Æã$Üú/]ØEÈéJGıy$ÂÙëÚBÈô¢Ã∂œ©Ô€Pì5»Ë8QvûËÙŸK%Ë[3ÆN«kww‰›ˇÙwjø∆c5sN=›¥ÉÙQΩ∞'°Aá◊˛õr|ç«@W<1y|Ì_"”Ωcc”ÀdP≤bÆk˚J\Ù°%#˚¸“®⁄*ï√Èã‚´≤∑ü=ˇ<á¯p§•ñ:∑ãfœÓûπ•ÓÎπY†.Åñ!√]Ã´<æ_MÍîﬁÜ≠èÎïˇÕKCIªˆÏØà∆ö jÆøå*Ã(t%±˚J⁄%	B≈`≈TbŒŸ~ïß~P–Â§\dN‡LÊO~€ÔñÎ7ü·ã ]†˜&Rôß\îó∆k{çGäC˘ñ¿di2∞.¶0ÔÎadÿ∑∑Ñ·¿Í‡C9}7öGêﬂVÇEˇ“ùÉÆ-ò bLíg*—£+Ù›öqSUt£f‘™…ê¬Á‘—Æ@°Ö¯Â·–‰–T3ﬁbyY£ƒ"ÇÃ7e_Jë˘¬ÌKH_-Â”Sœ6QÆÕ≥°Ûˇfò1aÖ˙{˙˘÷óÖ˜ﬂ≈Q«úâıRVˆ/Q≥πËEÄ⁄ØBùË´8∆OøVõµ´˛î~v[∆w+£ ÑÁüÙ∂0]‚åËßÆﬁ!U∑8-:SÂU¸‚¨>ïﬂÊÓ.µﬂH‹¶†cb™*õ¯πª>R∞⁄¢ŸRíÇ±˛˚Œo2Œ,Á≈Æ∂*8¢GÊ˛ÛÓø|ìnƒpá®®´;{%JI<ﬁQ8YÑ˚m=¥u+rƒ)aÑX˛ùËÁ€ïÊF3¬É`ÂDh⁄Ó≠ä Ä≤œåÏ¡Î›§m]0ïé8˙‡TÍÖü©ãΩc1°≠FCœ∏Hs‘Qx	 ≥qùû‹˙¢kùm8æ~l∏€"t
ÒÀˇ7õ/¨˙^ ”:zmï◊fìóÏ–˚°Ûœπ¨‰∑« {íx^H’‚” LjÎ6˝Ùw[˙òÔßYÉû¸K[≠É%˛õ\ß,f›	‹È‹QÔ§‹¶∆k§> ññì=>êÕƒƒÎ9≥è\*ºÓ›\a?$Öπ< ΩK∞Òn´©-âŸ3~¯D∞Å1Èﬂ\√æ¥?…‘ÙÛö^¯≠‹RvW—+πt] #´M≥>≠GF_™®ê>ÕmÒÕ∏°
m9ê◊Ü¬ËeéDÛ˜´ÆÍˆfÍ≠œˇΩX´b|µıÕ(Ì˝k<ó~∑_Z˚‚å ,œµ…c¥˙8∫˛h=ÙåzM‰¢Ì.e°˝˘[I∂Aˇñ@#¥Œ/„"g∂Q≠Çá¡Ÿ ]Ê∞‡/{NÏÂsyQ±∆8Œ@Ï±eû¥L∞{*„ªÓ»ê§Ò∑˘Lrr£ˇπ˝åz/:Ä?`‹pî¡B8\î¯uÏë }‰È¿Íûπ>ˇyº˙)ô]XXÿ…v˚*è‹zn◊cv˙
ßW/tp[ëâéâ—ÀÒÆñ
4ºFZcn+≠tﬂÜ∏˝c’OsßŒy&eÖ◊?Öﬂ¨µNv⁄óã€˝∏ﬂ˙˚Øü◊ß˝Ö,…vn)˙≈z∞Lq˚ﬂ~∑St$–3¡®‘Js˝≠„Vï’è ﬁûÅ‡vk«9Â˘µ¶úwÀÔùW‰†
%ÿE‰(å∂f£U”ª3®ˇ)˝VU⁄OZÏNüG(y£ïJ]“ÓñL˝;K®Ö»¿¿@~#5„ÖKÀ}ak≈”1∂'äLq ﬂ•JîÇ-ΩFµñPüS„Wá1ÍÎ˜&c›<9[äf¥Ë*-AÙo…:#ÉË'À∞::>§
0Y–ƒxŸ\á4å7˝Ω¡IEEE’Aqôˇñ≥É=9€≥≈°ππ‰v®@Ò’ÓîMëΩ˛I]]èÔ©‘™˝[…Æó¸ëòœÕ##Ú˛µrÿåá5èu¬÷	Ù_.ÅÏ©1ˇN‹ÍeÿÕ‡D‚≠ø/{¨JÍy˛àÌÓÌˇñ…‰Mæ–Òáˆ’∑Ïﬂwπ	*
ø[üt^ŸÓﬂ[˝¿¿®æÊ•Uº3WoZπègM_≠9≤Â˝;ÄÈﬂ$ø	ï¯Tñˆ2—ó‘ÈπïÔ≈$r]ˆŒñ0—MÒKUä£BzårÕ´?≥"§,”›^Ô¸wtgßJéﬁ)¨q≤%ãDòuFû¢Áo√æ…ønoK4PæÖÆÿr ©>‚ü©t≥∏œ£Ì5FÏÛŸ˛9ß@l˛ü@ã.∏Oß≈ˇ•ãã–˘*_â\Ò◊J©å£smèoÚïoÚIA{£"åÒÆg˚ãõöû∑Œ/µ˛!ÁÙ/;j∆ÏøT_ıÔÂˆøˇ˛∆‹%»óˆÆ]ΩØµÛ«wx»é>†B˘!«C€Í–+ˇ<j%˚WœL–í[—êó¢Ø—‰vÆ¿5XrmV±fÂâöy˘ˇ˚G7Á£iÎu˙„◊\ÄzÙúÛÈY<]œ•0«”rÃÈ,ÌC¨Gﬁ∂*‘˙oØøÇï´e∫>59õJ˛ﬂK∆ªÇW 7éŸ˘ ^†±£c6√yÂëpÓïÆL}õ .¡ñ:¢ô£lÇÒw≈Gæfh
ktÚ‰>ØL∑ÚÚÀ˘GSÉØt¸è§@¯…m≈J◊¨(ÚYÄ´„Ç]¿YÊé'∂3ΩW√<Dÿ/—D∏Eó≤¸#}¶‡¥ÍÎ—éü;Ìó¯.À|˝√Âæ6Ñºöõ®ø›÷ 68=qS®·¯ÊNU¢·ºò[Ø'¨ÒÉﬂåiæª«”Dx_ac_©}C6®ﬂÄ’M);f%”¢≈∆◊aÓˆÖ jf9ﬂºlîÑ´’U~i∏r“8(V,È#É7œq≤-ı	ëõìoKÿ#§HY¯WÓUÂ≠ØºÁﬂ∑¨tÓ®Ç	émcü]íYñ;Ω9K≠ü¨7S/˝ã5Â8ù|eßt[:ö∂´ tˆ—`È@†Kú±ÎÓ©P+}Û÷I}Ä5MŸ‘≠Ä~‹[EC¸-Ì|IÚ•kMõô¡D€ΩÑß]≥∑j‘s…P7Gˆ
·i©_¨J∑ûØ≈sïC6øøD∏É»FÏ°∂ûÌ†IJ–!Í^/w≥˘Ú÷∫ca®X
bœµ4<LaKá•_ÀKeœŸ#πñΩ|ÑÚîÿfÔd‚5Êû≠çÇïI·Ùﬁª¡∑Zﬁa rsô;œöæ#pbDœLEß,iY!oé∫Iπ(üJÈ´˘∞.∂ÚÁîΩêaw¥RìÌ•ôùD”*-◊ÃÖ‘*˝˘√7q&X\µÿÖéz	ø%h∏Ö%÷Ó’ã=ù›¨t1¬:–‚gM‡ûLU£ÁôÕÎﬁfadU;ò≤*€I`õ—§8T≤ ¶¶ä∂õ6≈uƒ˘Ú®\„ßË¯vöf|ÒåË±Ç”πS∞∆y±BHz⁄⁄9ﬂ|@µÈŸwBÇzâ-J!™;\r:Ã∫‹\4å®µ÷ï ˇÖ’ÜïæI|aã¯5ˆÎ¬BÏ©´gBnQ≈µU◊´∑S∫‰„
]∏ãù;LÔ≤0Àì]{ÛÛ[Éçä™ z¥Jƒ’n√÷ã†Äà¸¸Kë÷Ù30VIÁπ;C•ïÒ^í81˛åÚÀ5óÃr«ˆø<©æ4Ò>‹ó•¶◊bGg4ÖdÑZ©)_˝›|¶ô‰KYñ; ù"lÀt+„BÈ‘º|ΩWãÅyÔõGıèΩ‚ùP9™∞Õ¸ˆÍ“<⁄9nÛJÿcS»√zr´õT …˝ÏÌ∏i€AAô¡´<yo?›H|2≠Äå¶¥¨ÃÓÏ«PKzÚØªBZcômk∆çª.Mî±n?{X—üe»°§XÛê–Œ2‘–'ù¨„5’û)ÏìßDÅüºño¡‰*ª(∂n≥m.¨π∆åqÔÌ$¢hº÷êç<&o2ü,/8z6˙UÀ§#ÖsH‹ÌtÌ›U#ª¶∞°˘Ãu∂úIÆ4'ia	ùﬂ¡:ü”¡n˘a<,ÓëE‘ÉC‘˜?πZv≥•‰_∏Ô7·º˙◊–+û$QÉ£ÆR;|RÕÓ∞mÑ≥ô=>∏yWiÚÌŒΩ∏πﬂ\√\WôÈ’‡(á˙	ƒ—˜‚ÔÏpΩF1L≈≈Äí∏’éÙÃZÊòqk«j*≥dNJ÷¢#|FÎﬁ +Sﬂs¥h£>‚‰Õ§€ÜeB-∫¸Õk£CÌ≤ÁëEÒ~«.™¿8á‹t?ÁR¯∂[zfó'=»Ÿ/$ß∞‘Eñµñ2ƒ•Ã•	d¥ëfÊﬂˆ‘∑8ùü“)SXB7gıÚpﬁ52%Œﬂ …™,äˆÎèâ¨Ä§ky\ÆÚLˆ0ä'û◊Ïs{~™"€dù\ƒ’2X¥1§\)ÚŒ€47Á◊®mÏ¢gîXöwOÌ‘7`û^Âì>L	Iﬁ˜y ¿«∆éD…"˙‡hùî[°\∂Õ≥Ì‰}—∑)‘èù…	^›◊‡z*|}i#∏›ÔÊ•ß‰‘åÌå<ır*ŒüÿÄ
ìòdÀ¿‚πTœcà|˘p£√Û…€¥ösK ^ø∏”ﬂ)`Ö/-ÿÌ6ˆÖπ-!-cÙÖ+–ÍS0Î˝‰vÙ8yC‹ô?/b”ìÎ ò¡¿òkKwò&Èùïô®tO!–vÚ2Ë∞Â≠'\&h∂˝Ã∑k^∆åôK@a07›˙£¬ÓÃ5›–i&m¥}_Fò˚<|_¸Ã-îÀiŒí('ƒëW0ª∑ˆnR 	‡ˆ7µ„Ó+‹8ªÈ‡æ @k~"üE¸”zÚn∂+O»WÈ†}µœ≤ÚÌZF7Yd—SzV<Úb;•_Ür‚ïpõLª”2QÊé¬“Í†w	‰\wsn“p—±π√>¥[Òôu(XΩæ!^Ï6†Xîs&‘qÒ–µ3Ò(éRy¡7¶ù«|)FıÃ[Œ≠ïãL˙0IÿfùJ#d˘ò{uÀ+ÈºV¶axóéM˝jÈé≥cc˘˚Cò˜Tñzg™vœ.oP.ÂzîyòaîÊ‚}¨ˆÕáS™•KÚRÒFtLÚãÈ¡=≈˛G
êy†YˆWttŸı·ôRA:∞(˚â<ı=Y“-ΩÖÉíÌ`Æ›h~°Í–_w —BbrlªØM√20œöltxÆ{Õ?Ñ,Tß˙\ˇ.±ô(’√Ó·Ûõ√|ûäæ\“Ó”öv°ÒècrrãdF<˝ò≤ˆ≤W4áV∏µËó®Rü˙Ò_ÂâﬁêÄÜ7zN]πFÛ„ù<•d¸*Ïõà≈‚Ÿ¡Zï’‘¡RËÖΩi
÷7X°∂Ø˘d{√,£0ÏÔìô˚ _ıMW`ˆ¯¿ßmŒ£!"*[˚ü˙•	≈oWd	z–OúaÇò%†bCãïÅÌT áÑ≠S∫7mÌ€‚‹äŒÂÁ—ºfº[“-L"wqBÏ¬áz¸£Üﬁ3∫éﬁv‰dIπ‹VUÌL˙™4¸§Ì†πìLÀ#*OHüìÌ√Û3ck‡wfÆõ˘™–—Õ˝πòœ±.Õ2Éç›¡KÑÃ∏Ÿ–zï.™;¥—˙¿´É∑Û_<ºÿ√xYùÇR|»a7i,W™ïì≈Is_pπarÔfŒ◊mvúˇîÍÚoÊ¿gFúP~|6à9¬Á∑√ëèç|AxÇΩÉâV¶?êfßBµ◊nQ¸ÂÓK)L≥I˝HÖ~&J-X∂ÎÍ±·ØE«ÂR‹‰º!ñ∞æSÇØ/éìÜØƒ®æÑ…≠?D≠çº¨88:ÙÜyÙ£qÎ{Ü€c_ˇG,í…ˆ~Jl|ﬂ÷t±∂ò◊⁄f|$-+≠V¢óHËY∑ƒ∂†Ï0Ÿ	`
1Ôöˇ$}ˆ¢˚ÅüÛ2˘„⁄é9¨ÓòS˘≤‹ªXÏÚΩV0‰©∞dªk_±ÏîŸ⁄¸‚3ÿ2_Ó5(>ª°¬†t˚l§¶"éÛ8‹y¶æ˝ îªÂ–°˙ÕûX vbD7˚s1í\¯>	≈O˛ﬁëeõΩ¨¥‡∆˘ˆ£C˚´P¯ÁA8tl‰˘Âí-X,†≤›Ï÷Ê˘F¥Ìå	˙B—·°ãÖñÆÁfw«îp%ÕûB4.Çà±äß=+”ı”›QÍpÎ¶±pÕπ≠Üi[q+T@9—ŸVAºLS5¨qgª¶+ñP#XClq˚úç{ó
kÅ‹k˚©ôeF¿l;.Ï¿SEöÍ„Ú$uà€à‘ıK†°æÙpyN'‚Ë Î§Œ¬Ã'nfâõfë™†7 &	<œœ/~˘n´◊ö◊˝ä{c®ÛÚ±Õ,ËIlÙª/≠{»oøhâ$•rß∂rhl™û$!πå˝xMwôË≠Ø¶/¶H£ î«1:«/l‡,¢'∑oLÃdpq˝»?˝jr§±D§ø§ô∂°ä∫9Ëeñkìr7ßÂFøúíîËóZ=í’6Í˛4ıÎ‘∏GLWg∫!‰Ú∫¨of≠`√∞øSnbh€R∑¨ôTÌ‡w¯6qªBÔâ◊\Ñ-pLIŸ◊%åÓc‡Nfw€™AMi=r≈o˜ó∂ E°pﬁ¢<≤jC^uL£NàÖI`^Ï2„:Ö∫¡)htØh±˙k/ªÖzôhGÄΩy+„,w√^˚ºÌq∆=‹¿«%Y˜J›ù∂3À¶ä!∞z˚oUAìf’¿π3ÕebD›¬Û0ZïI≤ëñΩä_ø…ÕC¸˚;∫S"N∆‡SøÃ°ª≠çDµ˘®zp∏’ﬂ?øìP∫Ã_Â-ÍÿÜû—8ß)<“ù›N+'P®C[—∫kıµbyÖó@:ÉÈ7¸óÔØ#83ms≤*˚?ÔXP£J≥Z`qâQn:´}_˘Ç√ÀYÜw4Ä˛˜◊c+öÒ1‘,ã˘ÿY·Z'˝w∞>“ÓVçQ]å¬ı'Âon]åC#2>)3wn±ÁV\∫çı—û>~Q”™“â7∞Í+ hÎ'iAU˘°?!5⁄,iÔpèP!GµÇºÅ≠ZÊS√ïof¬~m?5”Õ˜‡GΩŸ‘¯≠@Ô5PÈˆzöÊRì¿ <¬D'ñK[tMº¨p¡)Ã<≈qÃtŸ„ÒÍ$–v pfΩ*âY€π ôaOSµ∫Ô”ˆT*D…åOÇB}§Cö8®ÁÄEë´/ÃC4BæŒøˇ#Ùëê¥O⁄±î∫Mx¥8ÒoQjèŸlùOjf?o`]⁄y«ˇà5	˘≈®7LqsèÖﬁëæﬁQ◊ì‡(Út
U;∞SéiÃ∫¬ÔRH	JÛh"å#Ôf¶€&)úºŸX®©ÿö€ñx¶‡ªΩ †ßÑ˚DÕvofYˇæÑl—1Õ©‰&Œ˘ì≤}n#˝Æ Aœ<Î∫ﬁsæπáà¡-ï+ja¸Ã7xv™;æmï"{‹ºÉ2¬◊˚D»´î‰rÇldUº\ûô‡˛⁄”AÇ≤“Û£ãÿÓpÇX[Ê$/œ)4€_ã(‘Óò‹PD	*ˆÌìüœA*hü±A[à.∆ãêı¬ê∂∂‘¶†u◊ˆ,è@*+œÀ¨tVsƒäﬂ·èV¨îÖ‹ﬁ“ºÛ§R˜ZÛüÜ(Ø®:!>ﬂia"Ô≠GwºˇÓ›~î]Ÿó±ãS3‚ÊI∏{ﬁ≠Œ∏üV<„’8GÁ\Ä—z’jcU%åy◊H‹Sõ&6Ë4sãv[Õ‘˝Î„"~sµˆÍÒòH‰u6CwŒgÄÈZ äM˘^T|”÷ﬂ®îY´Ì6üˆß*~k-£ﬁÁŸˆ®∫ˇÇFã≤™îñé“¸qÏ1‰#È;càﬂ-õ«Û+´*˝7Ã—∞«ˆŸ@OÃ˙D∑Ç!9;g_∫I˘JCHÀ{€\‹ﬂa√æF§€Ù,œCxˆûm»
ù¿#=|µ«Î´Ù}áﬂ˝TÎã,ﬂ©>Xã]E>ñË-%Ó˛3Û∏Ó∞]ÀıÒ;u±ÛΩ£≤≈O8ïü¢:˝î§Ç˝c›÷˚ (Ãˇm∏ÇcëOπ≥ø<f⁄ycÕ≠FâMŸœ~]tU¬†Ãx-xË8≠ó{h7åUR¥â¶ÆâpﬁU_Ù{«Z4v¡ÏÊ'Ui\AØñQ‰.ˆƒÛ˛∑uπ´<˜F¯/tÏ¡Œ`¯K_⁄njñZîaÕD$En5ì•Ïƒ∂®h≤`æPrBˆ`≤&E„Í!‹’öu”Ø/\u9«±›Ôê“¬˘j`¿Sb°Ä1Ö:énBÂÖÁm{ºÌçkÓ==/+¸Û°·ΩJ»Çg˙ç¿˜œ6#/tú∂,˜≤ Z?v"£”ƒ{≠!o“2:ŸxC_ÏÕœ˜Áuæ«÷Ä=Õ¶`+˘"ΩÚÕ@‘Ωœ◊kÕl˙SÅÄx⁄∫g–ùôË
àú5^õÊœ´äπÊÆ˛ªÌ9O™»5àˇ1n *T"RúÂ¯„o»√D*Œ≈œVk›nw/±ÿ…*ºCq”=–	}cÆÍ>œõ·3ÔuÔ"#Â<˜^£ÓﬁaB⁄ﬁiF∞Òä=‡R¢°Cˆ’IY+"ÂÉ”'^x·ˆÎj≈z	f2ç£:ß‡≥U)òwU`ˆUœrÂ#r…“ÕËg¶ÜΩÀÉº•uÖQã/üjÈ£(*KçÅ%ÕpF≈˙®nÕò®ƒ§ñ‹^î´[ …E¬ˆ7¸™B˜◊<±∑ˇ≈êaíñ&kGù°‡ú?ﬁ’Pkæ}•e„n&À&sè◊Ã∏Y∑è
ÿ „ø€o(ﬁØ ÊY.z>z≈Õ⁄0¿Ω˛:Ô–wîÃ⁄›j)Â´˚)ªŒ,}±∫ã°≤µrk‡X∑+›zΩ¶U›aö¢	ãqÏM|∏óÆ$Û‘7g?ZZ˜õv‹5Øqå=C]IE˚¯˜%êPPÆõ≤1™&ÒBÃ˝#œºíòWBM€jÎÑ⁄s\ˇ>∂¿ò§¨táÕYç≤;L“1ƒ°õ—MÓ˘UUΩ≠Ø4ä©ü;∞ #ßØ–‚W-Á◊Z(D4ﬁGFØä.ÔjÈˇFF¨◊&…sE¯›‹D$iÇ¥^S†T√nÈ_]3PºÛ”w{m¿0âN·•´#·ﬁ'jπ¶5 ªâù!€• Ãú<\'˚∆“9±≤fv7n'Nvq›Uz-RÉTuÖÙ	˘a„	+M∆!≈vó'∂ëFyZyhhQXJncywgJ3NvdXJjZScpLFxuICAgICAgb3JpZ2luYWxMaW5lOiBsaW5lLFxuICAgICAgb3JpZ2luYWxDb2x1bW46IHV0aWwuZ2V0QXJnKGFBcmdzLCAnY29sdW1uJywgMClcbiAgICB9O1xuXG4gICAgbmVlZGxlLnNvdXJjZSA9IHRoaXMuX2ZpbmRTb3VyY2VJbmRleChuZWVkbGUuc291cmNlKTtcbiAgICBpZiAobmVlZGxlLnNvdXJjZSA8IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgbWFwcGluZ3MgPSBbXTtcblxuICAgIHZhciBpbmRleCA9IHRoaXMuX2ZpbmRNYXBwaW5nKG5lZWRsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwib3JpZ2luYWxMaW5lXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmlnaW5hbENvbHVtblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0aWwuY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluYXJ5U2VhcmNoLkxFQVNUX1VQUEVSX0JPVU5EKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgdmFyIG1hcHBpbmcgPSB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzW2luZGV4XTtcblxuICAgICAgaWYgKGFBcmdzLmNvbHVtbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbExpbmUgPSBtYXBwaW5nLm9yaWdpbmFsTGluZTtcblxuICAgICAgICAvLyBJdGVyYXRlIHVudGlsIGVpdGhlciB3ZSBydW4gb3V0IG9mIG1hcHBpbmdzLCBvciB3ZSBydW4gaW50b1xuICAgICAgICAvLyBhIG1hcHBpbmcgZm9yIGEgZGlmZmVyZW50IGxpbmUgdGhhbiB0aGUgb25lIHdlIGZvdW5kLiBTaW5jZVxuICAgICAgICAvLyBtYXBwaW5ncyBhcmUgc29ydGVkLCB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gZmluZCBhbGwgbWFwcGluZ3MgZm9yXG4gICAgICAgIC8vIHRoZSBsaW5lIHdlIGZvdW5kLlxuICAgICAgICB3aGlsZSAobWFwcGluZyAmJiBtYXBwaW5nLm9yaWdpbmFsTGluZSA9PT0gb3JpZ2luYWxMaW5lKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkTGluZScsIG51bGwpLFxuICAgICAgICAgICAgY29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBwaW5nID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5nc1srK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsQ29sdW1uID0gbWFwcGluZy5vcmlnaW5hbENvbHVtbjtcblxuICAgICAgICAvLyBJdGVyYXRlIHVudGlsIGVpdGhlciB3ZSBydW4gb3V0IG9mIG1hcHBpbmdzLCBvciB3ZSBydW4gaW50b1xuICAgICAgICAvLyBhIG1hcHBpbmcgZm9yIGEgZGlmZmVyZW50IGxpbmUgdGhhbiB0aGUgb25lIHdlIHdlcmUgc2VhcmNoaW5nIGZvci5cbiAgICAgICAgLy8gU2luY2UgbWFwcGluZ3MgYXJlIHNvcnRlZCwgdGhpcyBpcyBndWFyYW50ZWVkIHRvIGZpbmQgYWxsIG1hcHBpbmdzIGZvclxuICAgICAgICAvLyB0aGUgbGluZSB3ZSBhcmUgc2VhcmNoaW5nIGZvci5cbiAgICAgICAgd2hpbGUgKG1hcHBpbmcgJiZcbiAgICAgICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxMaW5lID09PSBsaW5lICYmXG4gICAgICAgICAgICAgICBtYXBwaW5nLm9yaWdpbmFsQ29sdW1uID09IG9yaWdpbmFsQ29sdW1uKSB7XG4gICAgICAgICAgbWFwcGluZ3MucHVzaCh7XG4gICAgICAgICAgICBsaW5lOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkTGluZScsIG51bGwpLFxuICAgICAgICAgICAgY29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnZ2VuZXJhdGVkQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBtYXBwaW5nID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5nc1srK2luZGV4XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBtYXBwaW5ncztcbiAgfTtcblxuZXhwb3J0cy5Tb3VyY2VNYXBDb25zdW1lciA9IFNvdXJjZU1hcENvbnN1bWVyO1xuXG4vKipcbiAqIEEgQmFzaWNTb3VyY2VNYXBDb25zdW1lciBpbnN0YW5jZSByZXByZXNlbnRzIGEgcGFyc2VkIHNvdXJjZSBtYXAgd2hpY2ggd2UgY2FuXG4gKiBxdWVyeSBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9yaWdpbmFsIGZpbGUgcG9zaXRpb25zIGJ5IGdpdmluZyBpdCBhIGZpbGVcbiAqIHBvc2l0aW9uIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLlxuICpcbiAqIFRoZSBmaXJzdCBwYXJhbWV0ZXIgaXMgdGhlIHJhdyBzb3VyY2UgbWFwIChlaXRoZXIgYXMgYSBKU09OIHN0cmluZywgb3JcbiAqIGFscmVhZHkgcGFyc2VkIHRvIGFuIG9iamVjdCkuIEFjY29yZGluZyB0byB0aGUgc3BlYywgc291cmNlIG1hcHMgaGF2ZSB0aGVcbiAqIGZvbGxvd2luZyBhdHRyaWJ1dGVzOlxuICpcbiAqICAgLSB2ZXJzaW9uOiBXaGljaCB2ZXJzaW9uIG9mIHRoZSBzb3VyY2UgbWFwIHNwZWMgdGhpcyBtYXAgaXMgZm9sbG93aW5nLlxuICogICAtIHNvdXJjZXM6IEFuIGFycmF5IG9mIFVSTHMgdG8gdGhlIG9yaWdpbmFsIHNvdXJjZSBmaWxlcy5cbiAqICAgLSBuYW1lczogQW4gYXJyYXkgb2YgaWRlbnRpZmllcnMgd2hpY2ggY2FuIGJlIHJlZmVycmVuY2VkIGJ5IGluZGl2aWR1YWwgbWFwcGluZ3MuXG4gKiAgIC0gc291cmNlUm9vdDogT3B0aW9uYWwuIFRoZSBVUkwgcm9vdCBmcm9tIHdoaWNoIGFsbCBzb3VyY2VzIGFyZSByZWxhdGl2ZS5cbiAqICAgLSBzb3VyY2VzQ29udGVudDogT3B0aW9uYWwuIEFuIGFycmF5IG9mIGNvbnRlbnRzIG9mIHRoZSBvcmlnaW5hbCBzb3VyY2UgZmlsZXMuXG4gKiAgIC0gbWFwcGluZ3M6IEEgc3RyaW5nIG9mIGJhc2U2NCBWTFFzIHdoaWNoIGNvbnRhaW4gdGhlIGFjdHVhbCBtYXBwaW5ncy5cbiAqICAgLSBmaWxlOiBPcHRpb25hbC4gVGhlIGdlbmVyYXRlZCBmaWxlIHRoaXMgc291cmNlIG1hcCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKlxuICogSGVyZSBpcyBhbiBleGFtcGxlIHNvdXJjZSBtYXAsIHRha2VuIGZyb20gdGhlIHNvdXJjZSBtYXAgc3BlY1swXTpcbiAqXG4gKiAgICAge1xuICogICAgICAgdmVyc2lvbiA6IDMsXG4gKiAgICAgICBmaWxlOiBcIm91dC5qc1wiLFxuICogICAgICAgc291cmNlUm9vdCA6IFwiXCIsXG4gKiAgICAgICBzb3VyY2VzOiBbXCJmb28uanNcIiwgXCJiYXIuanNcIl0sXG4gKiAgICAgICBuYW1lczogW1wic3JjXCIsIFwibWFwc1wiLCBcImFyZVwiLCBcImZ1blwiXSxcbiAqICAgICAgIG1hcHBpbmdzOiBcIkFBLEFCOztBQkNERTtcIlxuICogICAgIH1cbiAqXG4gKiBUaGUgc2Vjb25kIHBhcmFtZXRlciwgaWYgZ2l2ZW4sIGlzIGEgc3RyaW5nIHdob3NlIHZhbHVlIGlzIHRoZSBVUkxcbiAqIGF0IHdoaWNoIHRoZSBzb3VyY2UgbWFwIHdhcyBmb3VuZC4gIFRoaXMgVVJMIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIHNvdXJjZXMgYXJyYXkuXG4gKlxuICogWzBdOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFVMVJHQWVoUXdSeXBVVG92RjFLUmxwaU9GemUwYi1fMmdjNmZBSDBLWTBrL2VkaXQ/cGxpPTEjXG4gKi9cbmZ1bmN0aW9uIEJhc2ljU291cmNlTWFwQ29uc3VtZXIoYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICB2YXIgc291cmNlTWFwID0gYVNvdXJjZU1hcDtcbiAgaWYgKHR5cGVvZiBhU291cmNlTWFwID09PSAnc3RyaW5nJykge1xuICAgIHNvdXJjZU1hcCA9IHV0aWwucGFyc2VTb3VyY2VNYXBJbnB1dChhU291cmNlTWFwKTtcbiAgfVxuXG4gIHZhciB2ZXJzaW9uID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAndmVyc2lvbicpO1xuICB2YXIgc291cmNlcyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZXMnKTtcbiAgLy8gU2FzcyAzLjMgbGVhdmVzIG91dCB0aGUgJ25hbWVzJyBhcnJheSwgc28gd2UgZGV2aWF0ZSBmcm9tIHRoZSBzcGVjICh3aGljaFxuICAvLyByZXF1aXJlcyB0aGUgYXJyYXkpIHRvIHBsYXkgbmljZSBoZXJlLlxuICB2YXIgbmFtZXMgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICduYW1lcycsIFtdKTtcbiAgdmFyIHNvdXJjZVJvb3QgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICdzb3VyY2VSb290JywgbnVsbCk7XG4gIHZhciBzb3VyY2VzQ29udGVudCA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZXNDb250ZW50JywgbnVsbCk7XG4gIHZhciBtYXBwaW5ncyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ21hcHBpbmdzJyk7XG4gIHZhciBmaWxlID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAnZmlsZScsIG51bGwpO1xuXG4gIC8vIE9uY2UgYWdhaW4sIFNhc3MgZGV2aWF0ZXMgZnJvbSB0aGUgc3BlYyBhbmQgc3VwcGxpZXMgdGhlIHZlcnNpb24gYXMgYVxuICAvLyBzdHJpbmcgcmF0aGVyIHRoYW4gYSBudW1iZXIsIHNvIHdlIHVzZSBsb29zZSBlcXVhbGl0eSBjaGVja2luZyBoZXJlLlxuICBpZiAodmVyc2lvbiAhPSB0aGlzLl92ZXJzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCB2ZXJzaW9uOiAnICsgdmVyc2lvbik7XG4gIH1cblxuICBpZiAoc291cmNlUm9vdCkge1xuICAgIHNvdXJjZVJvb3QgPSB1dGlsLm5vcm1hbGl6ZShzb3VyY2VSb290KTtcbiAgfVxuXG4gIHNvdXJjZXMgPSBzb3VyY2VzXG4gICAgLm1hcChTdHJpbmcpXG4gICAgLy8gU29tZSBzb3VyY2UgbWFwcyBwcm9kdWNlIHJlbGF0aXZlIHNvdXJjZSBwYXRocyBsaWtlIFwiLi9mb28uanNcIiBpbnN0ZWFkIG9mXG4gICAgLy8gXCJmb28uanNcIi4gIE5vcm1hbGl6ZSB0aGVzZSBmaXJzdCBzbyB0aGF0IGZ1dHVyZSBjb21wYXJpc29ucyB3aWxsIHN1Y2NlZWQuXG4gICAgLy8gU2VlIGJ1Z3ppbC5sYS8xMDkwNzY4LlxuICAgIC5tYXAodXRpbC5ub3JtYWxpemUpXG4gICAgLy8gQWx3YXlzIGVuc3VyZSB0aGF0IGFic29sdXRlIHNvdXJjZXMgYXJlIGludGVybmFsbHkgc3RvcmVkIHJlbGF0aXZlIHRvXG4gICAgLy8gdGhlIHNvdXJjZSByb290LCBpZiB0aGUgc291cmNlIHJvb3QgaXMgYWJzb2x1dGUuIE5vdCBkb2luZyB0aGlzIHdvdWxkXG4gICAgLy8gYmUgcGFydGljdWxhcmx5IHByb2JsZW1hdGljIHdoZW4gdGhlIHNvdXJjZSByb290IGlzIGEgcHJlZml4IG9mIHRoZVxuICAgIC8vIHNvdXJjZSAodmFsaWQsIGJ1dCB3aHk/PykuIFNlZSBnaXRodWIgaXNzdWUgIzE5OSBhbmQgYnVnemlsLmxhLzExODg5ODIuXG4gICAgLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICByZXR1cm4gc291cmNlUm9vdCAmJiB1dGl